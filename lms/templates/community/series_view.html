<%! from django.utils.translation import ugettext as _ %>
<%namespace name='static' file='/static_content.html'/>
<%block name="pagetitle">묶음강좌</%block>
<%inherit file="../main.html" />

<%block name="header_extras"></%block>

<style>
.section_frame_container{
    display:inline-block;
    width:100%;
    padding-top: 40px;
    padding-bottom: 100px;
}
.real_main_title{
    font-size:180%;
    margin-top:20px;
    margin-bottom:50px;
    border-bottom: solid 1px #DDDDDD;
    padding-bottom: 40px;
    font-weight: bold;
}
.section_1{
    display:inline-block;
    width:100%;
    margin-bottom:10px;
}
.series_img{
    width:250px;
    height:150px;
}
.section_a{
    float:left;
}
.section_b{
    float:left;
    padding-top:15px;
    padding-left:20px;
}
.series_title{
    margin-bottom:20px;
    font-size:150%;
    font-weight: bold;
    width:500px;
}
.series_target{
    margin-bottom:6px;
    font-size:80%;
}
.series_goal{
    font-size:80%;
}
#copy_btn{
    float:right;
    color: #FFFFFF;
}
.section_2{
    display:inline-block;
    width:100%;
    margin-top:10px;
    margin-bottom:10px;
    padding:20px;
    border-top:solid #CCCCCC 0px;
    border-bottom:solid #CCCCCC 1px;
}
.course_intro_title{
    margin-bottom:10px;
    font-size:100%;
    font-weight: bold;
}
.course_intro_content{
    font-size:80%;
}
.section_3{
    display:inline-block;
    width:100%;
    padding-left:20px;
    padding-right:20px;
    margin-top:10px;
}
.pagerLink {
    text-decoration: none !important;
}
.section_4{
    display:inline-block;
    width:100%;
    padding-left:20px;
    padding-right:20px;
    margin-top:10px;
}
.series_img_inner{
    width:180px;
    height:100px;
}
.section_5{
    display: inline-block;
    width: 100%;
    margin-top: 35px;
}
.section_bb{
    float:left;
    padding-top:5px;
    padding-left:20px;
}
.series_a{
    width:300px;
    margin-bottom:2px;
    font-size:80%;
}
.series_b{
    width:300px;
    margin-bottom:2px;
    font-size:80%;
}
.series_c{
    width:300px;
    margin-bottom:2px;
    font-size:80%;
}
.series_d{
    width:500px;
    margin-bottom:10px;
    font-size:120%;
    font-weight: bold;
}
.siz-date {
    padding: 3px;
    border: 1px solid #ccc;
    margin-right: 7px;
    display: inline-block;
    width: 70px;
    text-align: center;
}

</style>

<script>
/*
function print(printArea)
{
		win = window.open();
		self.focus();
		win.document.open();
		win.document.write('<html><head><title></title><style>');
		win.document.write('.section_a,.section_b{float:left}.section_frame_container{display:inline-block;width:100%;padding:40px 100px 100px}.section_3,.section_4{padding-right:20px}.section_3,.section_4,.section_b,.section_bb{padding-left:20px}.real_main_title{font-size:180%;margin-top:20px;margin-bottom:50px;border-bottom:solid 1px #DDD;padding-bottom:40px;font-weight:700}.section_1{display:inline-block;width:100%;margin-bottom:10px}.series_img{width:250px;height:150px}.section_b{padding-top:15px}.series_title{margin-bottom:20px;font-size:150%;font-weight:700;width:500px}.section_2,.section_3,.section_4{width:100%;display:inline-block;margin-top:10px}.series_target{margin-bottom:6px;font-size:80%}.series_goal{font-size:80%}#copy_btn{float:right;position:relative;bottom:40px;color:#FFF}.section_2{margin-bottom:10px;padding:20px;border-top:solid #CCC 0;border-bottom:solid #CCC 1px}.course_intro_title{margin-bottom:10px;font-size:100%;font-weight:700}.course_intro_content{font-size:80%}.pagerLink{text-decoration:none!important}.series_img_inner{width:180px;height:100px}.section_5{display:inline-block;width:100%;margin-top:10px}.section_bb{float:left;padding-top:5px}.series_a,.series_b,.series_c{width:300px;margin-bottom:2px;font-size:80%}.series_d{width:500px;margin-bottom:10px;font-size:120%;font-weight:700}');
		win.document.write('</style></haed><body>');
		win.document.write(printArea);
 		win.document.write('</body></html>');
		win.document.close();
		win.print();
		win.close();
}
*/
function move(){
    var index = '${id}';
    var url = "/series_print/" + index;
    window.open(url, "_blank");
    //$(location).attr('href',url);
}

function SetElements() {
    setTimeout(function () {
        frame = document.getElementById("about_iframe");
        SetHeight();
    });
}

function SetHeight() {
    var fBody = frame.contentWindow || frame.contentDocument;
    console.log(fBody);
    if (fBody.document) fBody = fBody.document.body;
    console.log('----------------------------');
    console.log(fBody.scrollHeight);
    console.log(fBody.clientHeight);
    // alert("scrollHeight: " + fBody.scrollHeight);
    // alert("clientHeight: " + fBody.clientHeight);

    console.log('----------------------------');
    frame.height = fBody.scrollHeight + fBody.clientHeight + 'px';
    frame.width = '100%';
    scrollTo(0,0);

}

function resizeIframe(obj) {
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
  }



$(document).ready(function(){
    $.ajax({
        url: 'about'
    }).done(function(data){
        var $frame = $('#about_iframe');
        var doc = $frame[0].contentWindow.document;
        var $body = $('body', doc);
        $body.html(data.note);
        SetElements();
    });


});
</script>

<div>
  <div class="series_bg_area">
    <div class="series_bg_space">
      <span  class="series_bg_title">
      <h3>묶음 강좌</h3>
      <h6>Bundle Course</h6>
      </span>
    </div>

  </div>
</div>

<section class="container" id="printArea">
    <div class="real_main_title">${_('Series Course')}</div>
    % if main_list:
    <div class="section_1">
        <div class="section_frame_outer">
            <div class="section_frame_inner">
                <div class="float_left section_a1">
                    <img class="series_imges" width="230px" height="130px" src="/static/series/${main_list[4]}.${main_list[5]}" alt="${main_list[1]}"/>
                </div>
                <div class="float_left section_a2">
                    <div class="series_title">${main_list[0]}</div>
                    <span>${main_list[7]}</span>
                    <p class="university_area">
                        <b>${main_list[6]}</b>
                    </p>
                </div>

                <div class="section_a3">
                    <div class="r-list">
                        <table>
                            <tr>
                                <td>
                                    <span class="siz">총주차</span>
                                </td>
                                <td>
                                    <span>${week_total}</span>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <span class="siz">총 학습인정시간</span>
                                </td>
                                <td>
                                    <span>${study_total}</span>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <span class="siz">총 동영상시간</span>
                                </td>
                                <td>
                                    <span>${video_total}</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="section_2">
        <div class="course_intro_title">${_('Course Introduction')}</div>
        <div class="course_intro_content" id="series_about">
            <!--##<pre>${main_list[2]}</pre>-->
            <!--<iframe id="about_iframe" frameborder="0" scrolling="no" src="about" onload="SetHeight()" width="100%" style="display: flex; vertical-align: bottom;"></iframe>-->
            <iframe id="about_iframe" frameborder="0" scrolling="no" onload="SetHeight()" width="100%" style="display: flex; vertical-align: bottom;"></iframe>
        </div>
    </div>
    % endif

    <button class="btn-brand" id="copy_btn" OnClick="move()">${_('Print')}</button>

    <div class="section_3"  style="border-bottom: 2px solid #ccc; margin-top: 55px;">
            <div class="course_intro_title" style="font-size: 23px; padding-bottom: 10px;">${_('Course List')}</div>
    </div>

    <div class="section_4">
        % if len(sub_list) == 0:
            <div class="course_intro_content">현재 묶음강좌에 등록된 강좌가 없습니다</div>
        % endif
        % for item in sub_list:
        <div class="section_5">
            <div class="section_frame_outer">
                <div class="section_frame_inner">
                    <div class="float_left section_a1">
                        <img class="series_imges" src="${item[1]}"/>
                    </div>
                    <div class="float_left section_a2">
                        <a class="pagerLink" href="/courses/${item[0]}/about" target="_blank"><div class="series_title">${item[2]}</div></a>
                        <span>${item[12]}</span>
                    </div>
                    <div class="section_a3">
                        <div class="r-list">
                            <table>
                                <tr>
                                    <td>
                                        <span class="siz">분야</span>
                                    </td>
                                    <td>
                                        <span>${_(item[10])}(${_(item[11])})</span>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span class="siz">주차(주간학습권장시간)</span>
                                    </td>
                                    <td>
                                        <span>${item[13]}${_("week")}(주당 ${item[15]})</span>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span class="siz">학습인정시간(총 동영상시간)</span>
                                    </td>
                                    <td>
                                        <span>${item[14]}(${item[16]})</span>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span class="siz">${_('enrollment')}</span>
                                    </td>
                                    <td>
                                        <span>${item[5]} ~ ${item[6]}</span>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <span class="siz">${_('start')}</span>
                                    </td>
                                    <td>
                                        <span>${item[7]} ~ ${item[8]}</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        % endfor
    </div>



</section>
</div>