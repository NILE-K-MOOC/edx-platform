<%namespace name='static' file='../static_content.html'/>
<%!

from django.utils.translation import ugettext as _
from django.utils.translation import pgettext
from django.urls import reverse
from courseware.courses import get_course_about_section
from django.conf import settings
from six import text_type
from edxmako.shortcuts import marketing_link
from openedx.core.djangolib.markup import HTML
from openedx.core.lib.courses import course_image_url
from six import string_types


import requests, unicodedata, time, json
%>
<%inherit file="../main.html" />
<%block name="headextra">
    ## OG (Open Graph) title and description added below to give social media info to display
    ## (https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content#tags)
    <meta property="og:title" content="${course.display_name_with_default_escaped}" />
    <meta property="og:description" content="${get_course_about_section(request, course, 'short_description')}" />
</%block>
<%
searchcourseid = course.id
# searchcourseid = "course-v1:ACRCEDU+ACRC01+2022_03"
url="https://lms.kmooc.kr/local/coursemos/courseid.php?courseid="+str(searchcourseid)+"&requestfrom=oldkmooc"
print "url=====>",url
header = ''
data='{"courseid":str(searchcourseid)}'
response = requests.post(url, headers=header, data=data)
if response:
    success = response.json().get("success")

if success == "success":
    course_new_id = response.json().get("data")
else:
    course_new_id = ""

case3url = ""
newkoomcmovechek = ""
newkoomcmovechek2 = ""
if str(searchcourseid) == str("course-v1:HansungK+2022HLM001+2023_HLM_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:MA_NSU+MATCHUP_NSU01+2023_01_2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:MA_NSU+MATCHUP_NSU02+2023_02_2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:MA_NSU+MATCHUP_NSU03+2023_03_2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:MA_NSU+MATCHUP_NSU04+2023_04_2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:BUFSk+BUFS_ICFL13+2023_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:AYUk+AYUk_SP+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+CORE_SNU041_040k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+CORE_SNU043_076k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU044_008k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU044_025k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU045_011k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU047_011k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU048_011k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU049_011k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU053.019k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU053.019k+2023_S2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU054.019k+2023_S2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU055.019k+2023_S2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU056.020k+2023_S2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU059.019k+2023_S2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU060.020k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU061.020k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU062.020k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU064.020k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU065.020k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU066.020k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU067.021k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU068.021k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU069.021k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU070.021k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU071.022k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU072.022k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU073.022k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU074.022k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU200_105k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU212.204.2k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU212_204_1k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU212_204_3k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNU701_429k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:SNUk+SNUL0655_000500k+2023_T2"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS213+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS214+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS223+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS225+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS226+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS227+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS228+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS229+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS232+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS233+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS237+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS241+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS242+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS243+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS244+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS245+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS246+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:NRF_COSS+NRF_COSS248+2022_1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP01+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP02+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP03+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP04+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP05+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP06+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP07+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP08+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP09+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"
elif str(searchcourseid) == str("course-v1:SOGANGKAEP+KAEP10+2022_T1"):
    case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
    newkoomcmovechek2 = "true"


if course.start:
    import string
    timedata = string.split(str(course.start)," ")
    timedatatmp = timedata[0].replace("-","")
    if timedatatmp >= "20230705":
        case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
        newkoomcmovechek2 = "true"

if course.enrollment_start:
    import string
    timedata = string.split(str(course.enrollment_start)," ")
    timedatatmp = timedata[0].replace("-","")
    if timedatatmp >= "20230701":
        case3url = "https://new.kmooc.kr/view/course/detail/"+str(course_new_id)
        newkoomcmovechek2 = "true"
%>
<input type="hidden" id="course_new_id" class="course_new_id" value="${course_new_id}">
<input type="hidden" id="case3url" class="case3url" value="${case3url}">
<style>
/* --------------------------
 *    학점인정 수강신청
 * --------------------------
**/

.course-info header.course-profile {
    overflow: visible;
}

.course-info header.course-profile .intro-inner-wrapper .intro .main-cta {
    position: relative;
}

.acbs-wrap {
    z-index: 10;
    position: absolute;
    top: 100%;
    left: 0;
    width: 380px;
    margin-top: 10px;
}

.acbs-wrap .type {
    display: flex;
    padding: 15px 10px;
    border: 1px solid #ccc;
    border-radius: .25rem;
    box-shadow: 0 3px 6px rgba(0, 0, 0, .12);
    background-color: #fff;

}

.acbs-wrap .type .type-btn {
    flex: 1;
    margin: 0 5px;
    padding: 12px 0;
    border: none;
    box-shadow: 0 1px 1px rgba(0, 0, 0, .1);
    background-size: 200% auto;
    text-shadow: none;
    font-size: 15px;
    font-weight: bold;
    letter-spacing: -0.03em;
    color: #fff;
    transition: all .2s ease;
    cursor: pointer;
}

.acbs-wrap .type .type-btn:nth-child(1) {
    background-image: linear-gradient(to right, #7474BF 0%, #598dca 51%, #7474BF 100%);
}

.acbs-wrap .type .type-btn:nth-child(2) {
    background-image: linear-gradient(to right, #4ca2cd 0%, #67B26F 51%, #4ca2cd 100%);
}

.acbs-wrap .type .type-btn:hover {
    background-position: right center;
}

.acbs-wrap .acbs-group {
    margin-top: 10px;
    padding: 1rem;
    border: 1px solid #ccc;
    border-radius: .25rem;
    box-shadow: 0 3px 6px rgba(0, 0, 0, .12);
    background-color: #fff;
    font-size: 15px;
}

.acbs-wrap .acbs-group .form-group {
    display: flex;
    margin-bottom: 1rem;
}

.acbs-wrap .acbs-group .form-group .label-control {
    margin-right: 15px;
    padding-top: 6px;
}

.acbs-wrap .acbs-group .form-group .form-control {
    flex: 1;
    height: 35px;
    padding: .25rem .5rem;
    border: 1px solid #cecece;
    border-radius: .25rem;
    box-shadow: none;
    font-size: 15px;
    font-weight: normal;
}

.acbs-wrap .acbs-group .pa-group {
    margin-bottom: 1rem;
    padding: 1rem;
    background-color: #f4f4f4;
    font-size: 13px;
    text-align: center;
}

.acbs-wrap .acbs-group .pa-group .pa-text {
    margin-top: 0;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e4e4e4;
}

.acbs-wrap .acbs-group .pa-group .radio-inline {
    display: inline-block;
}

.acbs-wrap .acbs-group .pa-group .radio-inline ~ .radio-inline {
    margin-left: 10px;
}

.acbs-wrap .acbs-group .pa-group .radio-inline label {
    font-family: 'Noto Sans KR', 'Malgun Gothic', '맑은 고딕', dotum, sans-serif;
    font-size: 13px;
    font-weight: normal;
    font-style: normal;
}

.acbs-wrap .acbs-group .acbs-btn {
    width: 100%;
    padding: 12px 0;
    border: none;
    box-shadow: 0 1px 1px rgba(0, 0, 0, .1);
    background-image: linear-gradient(to right, #4ca2cd 0%, #67B26F 51%, #4ca2cd 100%);
    background-size: 200% auto;
    text-shadow: none;
    font-size: 15px;
    font-weight: bold;
    letter-spacing: -0.03em;
    color: #fff;
    transition: all .2s ease;
    cursor: pointer;
}

.acbs-wrap .acbs-group .acbs-btn:hover {
    background-position: right center;
}
</style>

<script type="text/javascript">
$(document).ready(function () {
    // var nowviewstate = getUrlParameter('nowviewstate');
    // if (nowviewstate == "new") {
    //     $(".oldbtns").hide();
    //     $(".newbtns").show();
    // } else {
    //     const opendate = new Date('2023-08-21');
    //     const nowdate = new Date();
    //     console.log(opendate+"=====>"+nowdate);
    //     if (opendate >= nowdate) { //오픈날짜가 아닐때
    //         $(".course_new_id").val("");
    //         $(".oldbtns").show();
    //         $(".newbtns").hide();
    //     } else {

    $(".oldbtns").hide();
    setTimeout(function(){
        console.log("======>"+$(".oldbtns").html());
        if ($(".oldbtns").html()=="등록마감") {
            $(".oldbtns").show();
        }
    },800);
    //     }
    // }

    if ($("#case3url").val()) {
        $(".new-btns").show();
        $(".old-btns").hide();
        var checknewkmoocid = $(".course_new_id").val();
        $(".viewoldkmooc").attr("data-href","https://new.kmooc.kr/view/course/detail/"+ checknewkmoocid);
    } else {
        $(".new-btns").hide();
        $(".old-btns").show();
    }
});
</script>
<%block name="js_extra">
<script type="text/javascript">
(function() {
    let course_video_url = document.location.href;
    $(".course_video").prop("href", course_video_url.replace('about', 'video'));

    $(".youtubewrap").bind('contextmenu', function (e) {
        return false;
    });


    $(".registerold").click(function(event) {
        % if not user.is_authenticated():
            alert('${_("You need to register to enrollment.")}');
            window.location.href = "/login";
        % else:
            $("#class_enroll_form").submit();
        % endif
            event.preventDefault();
    });

    $(".register").click(function(event) {
        var checknewkmoocid = $(".course_new_id").val();
        if (checknewkmoocid) {
            window.location.href = "https://new.kmooc.kr/view/course/detail/" + checknewkmoocid;
        } else {
            % if not user.is_authenticated():
                alert('${_("You need to register to enrollment.")}');
                window.location.href = "/login";
            % else:
                $("#class_enroll_form").submit();
            % endif
                event.preventDefault();
        }
    });

    $(".audit").click(function (event) {
        var checknewkmoocid = $(".course_new_id").val();
        if (checknewkmoocid) {
            window.location.href = "https://new.kmooc.kr/view/course/detail/" + checknewkmoocid;
        } else {
            % if not user.is_authenticated():
                alert('${_("You need to register to enrollment.")}');
                window.location.href = "/login";
            % else:
                location.href=$(this).data("href");
            % endif
                event.preventDefault();
        }
    });


    $(".viewoldkmooc").click(function (event) {
        location.href=$(this).data("href");
    });

    % if can_add_course_to_cart:
        add_course_complete_handler = function(jqXHR, textStatus) {
            if (jqXHR.status == 200) {
                location.href = "${cart_link}";
            }
            if (jqXHR.status == 400) {
                $("#register_error")
                .html(jqXHR.responseText ? jqXHR.responseText : "${_("An error occurred. Please try again later.")}")
                .css("display", "block");
            }
            else if (jqXHR.status == 403) {
                location.href = "${reg_then_add_to_cart_link}";
            }
        };

        $("#add_to_cart_post").click(function(event){
            $.ajax({
                url: "${reverse('add_course_to_cart', args=[text_type(course.id)])}",
                type: "POST",
                complete: add_course_complete_handler
            })
            event.preventDefault();
        });
    % endif

    % if settings.FEATURES.get('RESTRICT_ENROLL_BY_REG_METHOD') and course.enrollment_domain:
        <%
            perms_error = _('The currently logged-in user account does not have permission to enroll in this course. '
            'You may need to {start_logout_tag}log out{end_tag} then try the enroll button again. '
            'Please visit the {start_help_tag}help page{end_tag} for a possible solution.').format(
            start_help_tag="<a href='{url}'>".format(url=marketing_link('FAQ')), end_tag='</a>',
            start_logout_tag="<a href='{url}'>".format(url=reverse('logout'))
            )
        %>
        $('#class_enroll_form').on('ajax:complete', function(event, xhr) {
            if(xhr.status == 200) {
                location.href = "${reverse('dashboard')}";
            } else if (xhr.status == 403) {
                location.href = "${reverse('course-specific-register', args=[text_type(course.id)])}?course_id=${course.id | u}&enrollment_action=enroll";
            } else if (xhr.status == 400) { //This means the user did not have permission
                $('#register_error').html("${perms_error}").css("display", "block");
            } else {
                $('#register_error').html(
                    (xhr.responseText ? xhr.responseText : "${_("An error occurred. Please try again later.")}")
                ).css("display", "block");
            }
        });
    %else:
        $('#class_enroll_form').on('ajax:complete', function(event, xhr) {
            if(xhr.status == 200) {
                if (xhr.responseText == "") {
                    location.href = "${reverse('dashboard')}";
                }
                else {
                    location.href = xhr.responseText;
                }
            } else if (xhr.status == 403) {
                location.href = "${reverse('register_user')}?course_id=${course.id | u}&enrollment_action=enroll";
            } else {
                $('#register_error').html(
                    (xhr.responseText ? xhr.responseText : "${_("An error occurred. Please try again later.")}")
                ).css("display", "block");
            }
        });
    %endif
})(this)

var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false;
};
function click_syllabus_label(){
    $("#toggle").click();
}

$("#audit_mode").click(function(event) {
    event.preventDefault();
    %if user.is_authenticated():
        swal(gettext("For auditing you can use some content such as videos, however, you cannot receive study support or certifictes from instructor and TA.\n" +
            "\n" +
            "Would you like to audit?\n" +
            "\n" +
            "(If you want to receive study support or certificate for this course, please register it as a course of interest. We will inform you when this course will open as a regular class.)"),
        {buttons: {
            cancel: gettext("Cancel"),
            confirm: {text: gettext("Apply"), className: "audit"}
        }
        }).then(function (isConfirm) {
            if (isConfirm == true) {
                $.post('/enrollment_verifi', {
                    course_id: '${course.id}',
                    user_id: '${user.id}'
                },
                function (data) {
                    console.log(data);

                    if(data.status){
                        location.href = "/dashboard";
                    }else{
                        $(".main-cta").append($("<div></div>", {
                            id: 'register_error',
                            css: {"display": "block"},
                            text: data.message
                        }));
                    }
                });
            } else {
                return;
            }
        });
    %endif
});

$(document).ready(function(){
    $('#interest_star a').keydown(function(e){
        if(e.keyCode === 13 || e.keyCode === 32){
            $(this).trigger('click');
            $(this).children('i').trigger('click');
            $('#interest_star a i').each(function(){
                if($(this).is(':visible')){
                    $(this).parent().focus();
                }
            });
        }
    });
});

    function add() {
        try {
            var def_index = '${course.id}';
            var index_arr = [];
            index_arr = def_index.split("+");
            var user_id = '${user.id}';
            var org = '${course.org}';
            var display_number_with_default = index_arr[1];
            var action = 'add';
            $.post("/course_interest", {
                csrfmiddlewaretoken: $.cookie('csrftoken'),
                user_id : user_id,
                org: org,
                display_number_with_default: display_number_with_default,
                method : action,
            }).done(function (data) {
                // pass
            }).fail(function (error) {
                alert('error = ' + error.responseJSON);
            });
        } catch (e) {
            alert(e);
        }
    }

    function modi() {
        try {
            var def_index = '${course.id}';
            var index_arr = [];
            index_arr = def_index.split("+");
            var user_id = '${user.id}';
            var org = '${course.org}';
            var display_number_with_default = index_arr[1];
            var action = 'modi';
            $.post("/course_interest", {
                csrfmiddlewaretoken: $.cookie('csrftoken'),
                user_id : user_id,
                org: org,
                display_number_with_default: display_number_with_default,
                method : action,
            }).done(function (data) {
                // pass
            }).fail(function (error) {
                alert('error = ' + error.responseJSON);
            });
        } catch (e) {
            alert(e);
        }
    }

    function change_i(id) {
        if (id == 'nomal') {
            console.log("nomal");
            document.getElementById('empty').style.display = 'contents';
            document.getElementById('nomal').style.display = 'none';
        }
        else if (id == 'empty') {
            console.log("empty");
            document.getElementById('nomal').style.display = 'contents';
            document.getElementById('empty').style.display = 'none';
        }
    }
</script>
<script src="${static.url('js/course_info.js')}"></script>
</%block>

<%block name="pagetitle">${course.display_name_with_default_escaped}</%block>

<link rel="stylesheet" type="text/css" href="/static/css/common-overview-template.css"/>
<style>
    #course-info section{line-height:160%; width: 98%;margin-top:40px}
    #course-info article{padding-top:10px;padding-left:15px}
    #course-info h2, h3, h4{font-weight:bold; font-family: "Nanum Gothic","Open Sans";}
    #course-info h2{font-size: 1.4rem; margin: 1.25rem 0 0.28rem 0;}
    #course-info h3{font-size: 1.1rem; margin: 0.25rem 0 0.25rem 0;}
    #course-info .article_contents{padding-left:10px;}
    #course-info p{text-align: justify; padding-left: 31px;}
    #course-info .grade_table p{padding-left: 0}
    #course-info .syllabus_table p{padding-left: 0}
    #course-info i.staff-name {font-style: normal}
    table caption{
        display: block;
        height: 0;
        width: 0;
        font-size: 0;
        line-height: 0;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    .fa {
        display: inline-block;
        font-family: FontAwesome;
        font-feature-settings: normal;
        font-kerning: auto;
        font-size: inherit;
        font-stretch: normal;
        font-style: normal;
        font-variant: normal;
        font-weight: normal;
        line-height: 1;
        text-rendering: auto;
        transform: translate(0px, -1.5px);
        width: 30px;
    }
    .fa-chevron-down:before {  content: "\f078";}
    .fa-institution:before,.fa-bank:before,.fa-university:before {  content: "\f19c";}
    .fa-mortar-board:before,.fa-graduation-cap:before {  content: "\f19d";}
    .fa-video-camera:before {  content: "\f03d";}
    .fa-edit:before,.fa-pencil-square-o:before {  content: "\f044";}
    .fa-mortar-board:before,.fa-graduation-cap:before {  content: "\f19d";}
    .fa-envelope-o:before {  content: "\f003";}
    .fa-group:before,.fa-users:before {  content: "\f0c0";}
    .fa-align-left:before {  content: "\f036";}
    .fa-toggle-right:before,.fa-caret-square-o-right:before {  content: "\f152";}
    .fa-calendar:before {  content: "\f073";}
    .fa-user:before {  content: "\f007";}
    .fa-angle-double-right:before {  content: "\f101";}
    .fa-info-circle:before {  content: "\f05a";}
    .fa-book:before {  content: "\f02d";}
    .fa-sort-amount-desc:before {  content: "\f161";}
    .fa-question-circle:before {  content: "\f059";}
    .youtubewrap {
        position: relative;
        max-width: 100%;
        height: auto;
        padding-bottom: 5px !important;
        padding-top:5px;
        overflow:hidden;
    }
    .youtubewrap iframe {
        position: absolute;
        width: 100%;
        height: 100%;
    }
    .subtitle_box {
        overflow-y: scroll;
        height: 6rem;
        width: 100%;
        margin-top: 20px;
        border: 1px solid #cbcbcb;
    }
    .subtitle_section {
        overflow: hidden;
        line-height: 1rem;
        font-size: small;
    }
    .subtitle_section p{ text-indent: 0rem;}
    .syllabus input {display: none;}
    #toggle + label {
        position:relative;
        cursor:pointer;
        padding:10px;
        background: rgba(27, 114, 204, 0.8);
        border-radius: 3px;
        padding: 8px 10px;
        color: #FFF;
        line-height:20px;
        font-size:12px;
        text-align:center;
        -webkit-font-smoothing: antialiased;
        cursor: pointer;
        transition:all 500ms ease;
        display:block;
        font-family:"Helvetica Neue", Helvetica, Sans-serif;
        font-style: normal;
        overflow: hidden;
    }
    #toggle + label:after {
        content:"강좌계획표 펼치기"
    }
    #toggle:checked ~ .syllabus_table {
        top: 0;
        visibility: visible;
        position:relative;
        transition: visibility 1s, opacity 1s;
        width: 100%;
        padding: 10px;
        margin-top:20px;
        line-height: inherit;
        height: 100%;
    }
    #toggle:checked + label {
        background:#aaa;
    }

    #toggle:checked + label:after {
        content:"강좌계획표 닫기"
    }
    .syllabus_table {
        background:#fff;
        position: absolute;
        visibility: hidden;
        left: 0;
        overflow: hidden;
        box-sizing: border-box;
        display:block;
        height: 0;
        width: 0;
        font-size: 0;
        line-height: 0;
        margin: 0;
        padding: 0;
    }
    .syllabus_table h1 {
        color:#FFF;
    }
    .syllabus_table table{width:100%; background-color:#ffffff;font-size:13px;border-spacing:0; border-collapse:collapse;border:1px solid #c8c8c8; }
    .syllabus_table table th{padding:10px 10px;"border-left":"1px solid #c8c8c8"; "border-bottom":"1px solid #c8c8c8"; background-color:#eeeeee}
    .syllabus_table table td{padding:10px 10px;"border-right":"1px solid #c8c8c8"; "border-bottom":"1px solid #c8c8c8";line-height:140%; }
    .syllabus_table table td.bgcolor{background-color:#dcdcdc}
    .syllabus_table table td.cts{text-align:center; max-width:10%}

    table td {
      vertical-align: middle !important;
    }

    .staff{width:100%; margin-bottom: 0px;}
    .staff div{display:inline-block; zoom:1; *display:inline;line-height:180%}
    .staff div img{width:100%;height:auto}
    .staff div dt i{width: 17px}
    .staff div dd{margin: 0 0 0 15px;}
    .staff .teacher_image{    width: 200px;     max-width: 33%;    min-width: 150px;}
    .staff .ta_image{         width: 150px;     max-width: 23%;    min-width: 100px;}
    .staff .staff_descript{ vertical-align:top; padding-left:10px;}
    .staff .staff_descript dl,dl{margin :0;}
    .professor{width:100%; margin-bottom: 0px;}
    .professor div{display:inline-block; zoom:1; *display:inline;line-height:180%}
    .professor div img{width:100%;height:auto}
    .professor div dt i{width: 17px}
    .professor div dd{margin: 0 0 0 18px;}
    .professor .teacher_image{    width: 200px;     max-width: 33%;    min-width: 150px;}
    .professor .ta_image{         width: 150px;     max-width: 23%;    min-width: 100px;}
    .professor .staff_descript{ vertical-align:top; padding-left:10px;}
    .professor .staff_descript dl,dl{margin :0;}
    .grade_table {
        margin-top:0px;
        background:#fff;
        left: 0;
        width: 100%;
        padding: 10px;
        overflow: hidden;
        box-sizing: border-box;
    }
    .grade_table table{width:100%; background-color:#ffffff;font-size:13px;border-spacing:0; border-collapse:collapse;border:1px solid #c8c8c8; }
    .grade_table table th{padding:10px 10px;border-left:1px solid #c8c8c8; border-bottom:1px solid #c8c8c8; background-color:#eeeeee}
    .grade_table table td{padding:10px 10px;border-right:1px solid #c8c8c8; border-bottom:1px solid #c8c8c8;line-height:140%; }
    .grade_table table td.bgcolor{background-color:#dcdcdc}
    .grade_table table td.cts{text-align:center; max-width:10%}
    .syllabus_table table p {
        padding-left: 0px;
    }
    .grade_table p {
        padding-left: 0px;
    }
    .faq .question{margin-bottom: 0px;}
    .faq .question h4 {margin :0.1rem 0 0.2rem 0 ;}
    .arrow_box {
        display: none;
        position: absolute;
        padding: 7px;
        -webkit-border-radius: 8px;
        -moz-border-radius: 8px;
        border-radius: 8px;
        background: #333;
        color: #fff;
        left: -25px;
        width: 95px;
        font-size:13px;
    }
    a:hover + p.arrow_box {
        display: block;
    }
    .audit {
        color: #fff !important;
        background-color: #218838 !important;
        border-color: #1e7e34 !important;
        background-image: none !important;
        text-shadow: none !important;
        box-shadow: none !important;
    }
    .swal-button--cancel {
        color: #555 !important;
        background-color: #efefef !important;
        background-image: none !important;
        text-shadow: none !important;
    }
    .course-info .course-sidebar .important-dates li .important-dates-item-text {
        display: inline-block;
        float: none;
        vertical-align: middle;
        z-index: 11;
    }
    div.about-side-title {
        display: inline-block;
        vertical-align: middle;
        width: 45%;
        z-index: 11;
    }
    div.about-side-text {
        display: inline-block;
        vertical-align: middle;
        width: auto;
        margin-top: 4px;
    }

    div.about-side-title p {
        margin-bottom: 0;
        margin-top: 4px;
    }
    .course-info .course-sidebar .important-dates li {
        margin: 0 5px;
        padding: 15px 0;
        word-break: break-word;
    }
    .course-info .course-sidebar header {
        margin-bottom: 15px;
    }

    p {
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
    }
    p+p {
      margin-top: 0;
    }

    .side-about {
        box-sizing: border-box;
        position: relative;
        width: 100%;
        float: none;
        height: 100%;
    }
    .side-about.side-about-tp { }
    .tooltip-side-about {
        background-image: linear-gradient(-90deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.9) 100%);
        border: 1px solid rgba(0,0,0,0.5);
        border-radius: 4px;
        box-shadow: 0 4px 25px 0 rgba(0,0,0,0.5);
        box-sizing: border-box;
        color: #fff;
        float: right;
        font-family: "Open Sans",Verdana,Geneva,sans-serif,sans-serif;
        font-size: 0.9em;
        left: 50%;
        margin-left: -110px;
        opacity: 0;
        padding: 6px 10px;
        position: absolute;
        transition: all 0.15s ease-out 0s;
        top: 65px;
        width: 65%;
        display: none;
    }
    .side-about:hover .tooltip-side-about{
        opacity: 1.0;
        top: 56px;
        z-index: 15;
        display: block;
    }
    .side-about .tooltip-side-about:hover, .tooltip-side-about:focus {
        opacity: 0;
    }
    .important-dates-item span.icon {
        text-align: left;
    }
    .fa-twitter{
        color: #1da1f2;
    }
    .fa-facebook{
        color: #29487d;
    }
    .fa-envelope{
        color: #ff6496;
    }
    .similar-title{
        font-size: 1.4rem;
        margin: 1.25rem 0 0.28rem 0;
        font-weight: bold;
        font-family: "Nanum Gothic","Open Sans";
        margin-bottom: 20px;
    }
    .similar-container {
        min-width: 750px;
    }
    .similar-item {
        border: solid 1px #cccccc;
        width: 200px;
        height: 194px;
        margin-left: 20px;
        margin-right: 2px;
        cursor: pointer;
        transition: 0.2s;
        float: left;
    }
    .similar-item:hover {
        box-shadow: rgba(0, 0, 0, 0.14) 0px 8px 10px 0px, rgba(0, 0, 0, 0.15) 0px 4px 4px 0px;
    }
    .similar-error {
        padding: 20px;
        color: red;
        font-size: 12px;
    }
    .item-img-size {
        width: 198px;
        height: 97px;
    }
    .item-status {
        background-color: #008800;
        text-align: left;
    }
    .item-status-text {
        color: #ffffff;
        font-size: 10px;
        margin-left: 10px;
    }

    .item-status.end {
        background-color: #245f94;
    }
    .item-status.ready {
        background-color: #f5c42d;
    }
    .item-status.ing {
        background-color: #118714;
    }

    .item-title {
        font-weight: bold;
        padding-top: 2px;
        padding-left: 10px;
        font-size: 12px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: black;
    }
    .item-date {
        font-size: 10px;
        padding-left: 10px;
        color: black;
    }
    .item-org {
        font-size: 10px;
        padding-left: 10px;
        margin-top: -8px;
        color: black;
    }
    .item-greenline {
        border: solid 1px #008800;
    }

    .item-greenline.end {
        border: solid 1px #245f94;
    }
    .item-greenline.ready {
        border: solid 1px #f5c42d;
    }
    .item-greenline.ing {
        border: solid 1px #118714;
    }

    .similar-none{
        padding-left: 20px;
    }

    @media screen and (max-width: 768px) {
        .similar-item {
            float: unset;
            margin-bottom: 20px;
        }
        .similar-container{
            min-width: unset;
            margin-bottom: 50px;
        }
    }
</style>
<section class="course-info">
    <%block name="course_about_header">
        <header class="course-profile">
            <div class="intro-inner-wrapper" style="margin-left: auto; margin-right: auto; max-width: 1200px;">
                <div class="table">
                    % if get_course_about_section(request, course, "video"):
                        <a href="#video-modal" class="media" rel="leanModal">
                            <div class="hero">
                                <img src="${course_image_urls['large']}" alt="${course.display_name_with_default_escaped} 동영상"/>
                                <div class="play-intro"></div>
                            </div>
                        </a>
                    %else:
                        <div class="media">
                            <div class="hero">
                                <img src="${course_image_urls['large']}" alt="${course.display_name_with_default_escaped} 이미지"/>
                            </div>
                        </div>
                    % endif
                    <section class="intro">
                        <div class="heading-group">
                            <h1 style="font-size: 30px; float: left;">
                                ${course.display_name_with_default_escaped}
                            </h1>
                            <br/>
                            <br/>
                            %if user.is_active ==True :
                                <div class="oldbtns" style="float: right; right:-20px; position: absolute; margin-right:3rem; margin-top: -30px;width:28%;height: 46px;color: white;display: flex;justify-content: center;align-items: center;border:0px;text-decoration: none;text-shadow: 0 -1px 1px #000042;position:relative;top:37px;" id="interest_star" class="">
                                    % if (flag == 1):
                                        <button id="interest_btn_d" tabindex="0" onclick="modi()" title="관심강좌 등록 취소하기" alt="관심강좌 삭제" style="display:flex;align-items:center;text-decoration:none;width:100%;height:100%;box-shadow: inset 0 1px 0 0 white;background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);">
                                            <i style="color:#FFFFFF;font-size:26px;cursor:pointer; display: contents;" onclick="change_i('nomal')" id ="nomal" class="fa fa-star fa-4x"  aria-hidden="true">
                                                <span style="text-decoration: none;text-shadow: 0 -1px 1px #000042;font-size: 17px;margin-left: 10px;color:#FFFFFF;">관심강좌 등록취소</span>
                                            </i>
                                        </button>
                                        <button id="interest_btn_i" tabindex="0" onclick="add()" title="관심강좌 등록하기" alt="관심강좌 추가" style="display:none;align-items:center;text-decoration:none;width:100%;height:100%;box-shadow: inset 0 1px 0 0 white;background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);">
                                            <i style="display:none;color:#FFFFFF;font-size:26px;cursor:pointer;"
                                               onclick="change_i('empty')" id="empty" class="fa fa-star fa-4x"
                                               aria-hidden="true">
                                                <span style="text-decoration: none;text-shadow: 0 -1px 1px #000042;font-size: 17px;margin-left: 10px;color:#FFFFFF">관심강좌 등록</span>
                                            </i>
                                        </button>
                                    % else :
                                        <button id="interest_btn_d" tabindex="0" onclick="modi()" title="관심강좌 등록 취소하기" alt="관심강좌 삭제" style="display:none;align-items:center;text-decoration:none;width:100%;height:100%;box-shadow: inset 0 1px 0 0 white;background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);">
                                            <i style="color:#FFFFFF;font-size:26px;cursor:pointer; display:none;" onclick="change_i('nomal')" id ="nomal" class="fa fa-star fa-4x"  aria-hidden="true">
                                                <span style="text-decoration: none;text-shadow: 0 -1px 1px #000042;font-size: 17px;margin-left: 10px;color:#FFFFFF">관심강좌 등록취소</span>
                                            </i>
                                        </button>
                                        <button id="interest_btn_i" tabindex="0" onclick="add()" title="관심강좌 등록하기" alt="관심강좌 추가" style="display:flex;align-items:center;text-decoration:none;width:100%;height:100%;box-shadow: inset 0 1px 0 0 white;background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);">
                                            <i style="display:contents;color:#FFFFFF;font-size:26px;cursor:pointer;"
                                               onclick="change_i('empty')" id="empty" class="fa fa-star fa-4x"
                                               aria-hidden="true">
                                                <span style="text-decoration: none;text-shadow: 0 -1px 1px #000042;font-size: 17px;margin-left: 10px;color:#FFFFFF;">관심강좌 등록</span>
                                            </i>
                                        </button>
                                    % endif
                                </div>
                            %endif
                            <br/>
                            <span hidden>${course.display_org_with_default | h}</span>
                        </div>
                        <div class="main-cta" style= "display: flex; justify-content: space-between;">
                            %if user.is_authenticated and registered:
                            %if show_courseware_link:
                                <div>
                                %endif
                                % if enroll_audit:
                                    <span class="register disabled">${_("You are enrolled in this audit course")}</span>
                                % else:
                                    <span class="register disabled">${_("You are enrolled in this course")}</span>
                                % endif
                                % if show_courseware_link:
                                    % if enroll_audit:
                                        <strong class="audit" data-href="${course_target}">${_("View Audit Course")}</strong>
                                    % else:
                                        <strong class="viewoldkmooc" data-type="case 3" data-href="${course_target}">${_("View Course")}</strong>
                                    % endif
                                </div>
                            % endif
                            % elif in_cart:
                                <span class="add-to-cart oldbtns">
                                    ${_('This course is in your <a href="{cart_link}">cart</a>.').format(cart_link=cart_link)}
                                </span>
                            % elif is_course_full:
                                <span class="register disabled oldbtns" >
                                    ${_("Course is full")}
                                </span>
                            % elif invitation_only and not can_enroll:
                                <span class="register disabled oldbtns">${_("Enrollment in this course is by invitation only")}</span>
                            % elif not is_shib_course and not can_enroll and audit_flag == 'N':
                                <span class="register disabled oldbtns">${_("Enrollment is Closed")}</span>
                            % elif not is_shib_course and not can_enroll and audit_flag == 'Y':
                            <div class="box1 oldbtns" style="width: 50%;">
                                <button class="register" id="audit_mode" style="width: 90%;height:46px;color:#FFFFFF;background-image: linear-gradient(to bottom,#29941cc9 0%,#39bd2f82 50%,#2bb1359e 50%,#071b03a6 100%);" tabindex="0">${_("Audit Enrollment")}</button>
                            </div>

                            <div class="box2 oldbtns" style="float: left; width: 50%;" id="enroll_0" data-check="3">
                                <button class="type-btn"  style="width: 90%; height: 46px; color: white; box-shadow: inset 0 1px 0 0 white; background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);" onClick="window.location.href='video'">
                                    ${_("Course View")}
                                </button>
                            </div>

                            <!-- 강좌 미리보기 주석 -->
                            <div class="box3 oldbtns" style="float: left; width: 50%;" id="enroll_0" data-check="4">
                                    <!--button  class="type-btn" style="width: 90%; height: 46px; color: white; box-shadow: inset 0 1px 0 0 white; background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);" onClick="location.href='#preview-video-modal'">${_("Course preview")}</button-->
                                <button href="#preview-video-modal" class="type-btn" style="width:90%;height:46px;color:white;box-shadow:inset 0 1px 0 0 white;background-image:linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);display:flex;justify-content:center;align-items: center;border: 1px solid #000663;border-bottom: 1px solid #00003a;border-radius: 5px;text-decoration: none;text-shadow: 0 -1px 1px #000042;" rel="leanModal">
                                    ${_("Course preview")}
                                </button>
                            </div>


                            <div class="box1 case1 newbtns" style="float: left; width: 100%;" id="enroll_0">
                                % if LANGUAGE_CODE == "ko-kr":
                                <button href="register" class="type-btn register" style="float:right;width:60%; height: 46px; color: white;position:absolute;top:-50px;right: 0px;">
                                    새로운 K-MOOC로 이동
                                </button>
                                % else:
                                <button href="register" class="type-btn register" style="float:right;width:60%; height: 46px; color: white;position:absolute;top:-50px;right: 0px;">
                                    Move to New K-MOOC
                                </button>
                                % endif
                                <div class="width:100%;float:left;">본 강좌는 새로운 K-MOOC 플랫폼에서 운영하는 강좌입니다.</div>
                            </div>

                            <!--
                            <div class="box2" style="width: 20%;">
                                <a href='video' class="" style="width: 100%; border: 1px solid #000663; border-bottom: 1px solid #00003a;
                                    border-radius: 5px;  color: #000; display: inline-block; font-size: inherit;font-weight: bold;
                                    background-color: #0075b4;background-image: -webkit-linear-gradient(top, #0075b4 0%,#004393 50%,#002a84 50%,#002f86 100%);
                                    background-image: linear-gradient(to bottom,#f9f9f9 0%,#d2d2d2 50%,#c5c5c5 50%,#909090 100%); padding: 7px 18px; text-align: center;
                                    text-decoration: none; box-sizing: border-box;border-radius: 3px;
                                    display: block; font: normal 1.2rem/1.6rem 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif; float: left;letter-spacing: 1px; padding: 10px 0; text-align: center; ">${_("Course View")}</a>
                            </div>

                            <a href='#preview-video-modal' class="" rel="course_preview" style="width: 20%; border: 1px solid #000663; border-bottom: 1px solid #00003a; margin-left: 10px;
                                    border-radius: 5px;  color: #000; display: inline-block; font-size: inherit;font-weight: bold;
                                    background-color: #0075b4;background-image: -webkit-linear-gradient(top, #0075b4 0%,#004393 50%,#002a84 50%,#002f86 100%);
                                    background-image: linear-gradient(to bottom,#f9f9f9 0%,#d2d2d2 50%,#c5c5c5 50%,#909090 100%); padding: 7px 18px; text-align: center;
                                    text-decoration: none; box-sizing: border-box;border-radius: 3px;
                                    display: block; font: normal 1.2rem/1.6rem 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif; float: left;letter-spacing: 1px; padding: 10px 0; text-align: center; ">${_("Course preview")}</a>

                            -->
                            %elif can_add_course_to_cart:
                                <%
                                    if user.is_authenticated:
                                        reg_href = "#"
                                        reg_element_id = "add_to_cart_post"
                                    else:
                                        reg_href = reg_then_add_to_cart_link
                                        reg_element_id = "reg_then_add_to_cart"
                                %>
                                <% if ecommerce_checkout:
                                    reg_href = ecommerce_checkout_link
                                    reg_element_id = ""
                                %>
                                <a href="${reg_href}" class="add-to-cart" id="${reg_element_id}" data-type="case 2">
                                    ${_("Add {course_name} to Cart <span>({price} USD)</span>")\
                                    .format(course_name=course.display_number_with_default, price=course_price)}
                                </a>
                                <div id="register_error"></div>
                            % else:
                                <%
                                    if ecommerce_checkout:
                                        reg_href = ecommerce_checkout_link
                                    else:
                                        reg_href="#"
                                    if professional_mode:
                                        href_class = "add-to-cart"
                                    else:
                                        href_class = "registerold"
                                %>
                            <!-- 기본 수강신청 버튼 -->
                            <div class="box1 case1 new-btns" style="float: left; width: 100%;" id="enroll_0">
                                % if LANGUAGE_CODE == "ko-kr":
                                    <button href="register" class="type-btn register" style="float:right;width:60%; height: 46px; color: white;position:absolute;top:-50px;right: 0px;">
                                        새로운 K-MOOC로 이동
                                    </button>
                                % else:
                                    <button href="register" class="type-btn register" style="float:right;width:60%; height: 46px; color: white;position:absolute;top:-50px;right: 0px;">
                                        Move to New K-MOOC
                                    </button>
                                % endif
                                <div class="width:100%;float:left;">본 강좌는 새로운 K-MOOC 플랫폼에서 운영하는 강좌입니다.</div>
                            </div>
                            <div class="box1 case1 old-btns" style="float: left; width: 50%;" id="enroll_0">
                                <button href="${reg_href}" class="type-btn ${href_class}"  style="width: 90%; height: 46px; color: white;">${_("Enrollment")}</button>
                            </div>
                            <!-- 기본 수강신청 버튼 -->

                            <!-- 학점 인정 수강신청 버튼 -->
                            <!--
                            <div class="box1" style="float: left; width: 50%;" id="enroll_0">
                                <button id="enroll_1" style="width: 90%; height: 46px; color: white;" >${_("Enrollment")}</button>
                            </div>
                            -->
                            <!--학습하기 버튼-->
                            <div class="box2 " style="float: left; width: 50%;" id="enroll_0" data-check="1">
                                <button class="type-btn" onClick="location.href='video'" style="width: 90%; height: 46px; color: white; box-shadow: inset 0 1px 0 0 white; background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);">
                                    ${_("Course View")}
                                </button>
                            </div>

                            <!-- 강좌 미리보기 주석 -->
                            <div class="box3 " style="float: left; width: 50%;" id="enroll_0" data-check="2"-->
                                <!--button  class="type-btn" onClick="location.href='#preview-video-modal'" style="width: 90%; height: 46px; color: white; box-shadow: inset 0 1px 0 0 white; background-image: linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);">${_("Course preview")}</button-->
                                <button href="#preview-video-modal" class="type-btn" style="width:90%;height:46px;color:white;box-shadow:inset 0 1px 0 0 white;background-image:linear-gradient(to bottom,lightgray 0%,gray 50%,gray 50%,#999 100%);display:flex;justify-content:center;align-items: center;border: 1px solid #000663;border-bottom: 1px solid #00003a;border-radius: 5px;text-decoration: none;text-shadow: 0 -1px 1px #000042;" rel="leanModal">${_("Course preview")}</button>
                            </div>

                            <!--
                            <div class="box2" style="float: right; width: 35%;">
                                <a href='video' class="" id="poppppp" style="width: 100%; border: 1px solid #000b0d; border-bottom: 1px solid #00003a;
                                    border-radius: 5px; color: #000; display: inline-block; font-size: inherit;font-weight: bold;
                                    background-color: #0075b4;background-image: -webkit-linear-gradient(top, #0075b4 0%,#004393 50%,#002a84 50%,#002f86 100%);
                                    background-image: linear-gradient(to bottom,#f9f9f9 0%,#d2d2d2 50%,#c5c5c5 50%,#909090 100%);; padding: 7px 18px; text-align: center;
                                    text-decoration: none; box-sizing: border-box;border-radius: 3px;
                                    display: block;     font: normal 1.2rem/1.6rem 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif; float: left;letter-spacing: 1px; padding: 10px 0; text-align: center; ">${_("Course View")}</a>
                            </div>

                            <a href='#preview-video-modal' class="" rel="course_preview" style="width: 20%; border: 1px solid #000663; border-bottom: 1px solid #00003a; margin-left: 10px;
                                border-radius: 5px;  color: #000; display: inline-block; font-size: inherit;font-weight: bold;
                                background-color: #0075b4;background-image: -webkit-linear-gradient(top, #0075b4 0%,#004393 50%,#002a84 50%,#002f86 100%);
                                background-image: linear-gradient(to bottom,#f9f9f9 0%,#d2d2d2 50%,#c5c5c5 50%,#909090 100%); padding: 7px 18px; text-align: center;
                                text-decoration: none; box-sizing: border-box;border-radius: 3px;
                                display: block; font: normal 1.2rem/1.6rem 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif; float: left;letter-spacing: 1px; padding: 10px 0; text-align: center; ">${_("Course preview")}
                            </a>
                            -->

                            <!--<div class="box3 hero" style="width: 20%;" rel="leanModal">
                            </div>

                            <a href="#video-modal" class="media" rel="leanModal">
                                <div class="hero">
                                    <img src="/static/studio/images/pencils.jpg" alt="누구나 할 수 있는 AI 머신 러닝 동영상">
                                    <div class="play-intro"></div>
                                </div>
                            </a>
                            -->

                            <div class="box1" style="float: left; width: 100%;" hidden id="recog_divv_0">
                                <div class="acbs-wrap"  id="recog_divv_1">
                                    <div class="type">
                                        <button href="${reg_href}" class="type-btn ${href_class}" id="real_enroll">
                                            일반수강
                                        </button>
                                        <button class="type-btn" id="recognition">학점인정</button>
                                    </div>
                                    <div class="acbs-group" id="recognition_div" hidden>
                                        <div class="form-group">
                                            <span class="label-control">대학</span>
                                            <select class="form-control" id="recog_org">
                                                <option selected="" value="">선택하세요</option>
                                                %for org,org_namee ,org_type in recog_org :
                                                <option value="${org},${org_namee},${org_type}">${org_namee}(${org_type})</option>
                                                %endfor

                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <span class="label-control">학번</span>
                                            <input type="text" class="form-control" placeholder="20201234"
                                                   id="recog_num">
                                        </div>
                                        <div class="form-group">
                                            <span class="label-control">이메일</span>
                                            <input type="email" class="form-control" placeholder="kmooc@kmooc.com"
                                                   id="recog_mail">
                                        </div>
                                        <div class="pa-group">
                                            <p class="pa-text">학점인정 수강신청을 위한<br>대학, 학번, 이메일의 정보 활용에 동의합니다.</p>
                                            <div class="radio-inline">
                                                <input type="radio" name="pa" id="paAg" checked="">
                                                <label for="paAg">동의함</label>
                                            </div>
                                            <div class="radio-inline">
                                                <input type="radio" name="pa" id="paDis">
                                                <label for="paDis">동의하지 않음</label>
                                            </div>
                                        </div>
                                        <button class="acbs-btn" id="active_recognition">학점인정 수강신청하기</button>
                                    </div>
                                </div>
                            </div>
                            <div id="register_error"></div>

                            %endif
                        </div>

                    </section>
                </div>
            </div>
        </header>
    </%block>
<script>
  let param = 0;
  $("#recognition").click(function () {
    //$('#recognition_div').show()
    if($("#recognition_div").css("display") == "none"){
        $("#recognition_div").show();
    } else {
        $("#recognition_div").hide();
    }

  });
  $("#enroll_1").click(function () {
    if($("#recog_divv_0").css("display") == "none"){
        $("#recog_divv_0").show();
    } else {
        $("#recog_divv_0").hide();
    }
  });

  $("#active_recognition").click(function () {
      let check_agree = $('input:radio[id=paAg]').is(':checked');

      if ($('#recog_org').val() == "") {
          swal('', '학교를 선택해 주세요.', 'warning');
          return;
      }

      if ($('#recog_mail').val().length < 1) {
          swal('', '메일을 입력해 주세요.', 'warning');
          return;
      }

      if ($('#recog_num').val().length < 1) {
          swal('', '학점을 입력해 주세요.', 'warning');
          return;
      }

      if ($('#recog_mail').val().indexOf('@') == -1) {
          swal('', '올바른 이메일 형식을 입력해 주세요.', 'warning');
          return;
      }

      if (check_agree == true && $('#recog_num').val().length > 1 && $('#recog_mail').val().length > 1 && $('#recog_org').val() != "") {
          param = 1;
      } else if (check_agree == false) {
          swal('', '정보 활용에 동의해주세요.', 'warning');
      }
      if (param == 1) {
          $(this).prop("disabled", true);

          $.ajax({
              url: '/recognition',
              type: "POST",
              data: {
                  csrfmiddlewaretoken: $.cookie('csrftoken'),
                  org: $('#recog_org').val(),
                  student_no: $('#recog_num').val(),
                  email: $('#recog_mail').val(),
                  course_id: '${course.id}',
                  user: '${user.id}'
              }
          }).done(function (data) {
              if (data.return == 'success') {
                  $("#real_enroll").trigger("click");
                  $('#recog_divv_0').hide();
              } else {
                  swal('', '다시 시도해주세요', 'warning');
              }
          });
      }
  });

</script>
    <div class="container">
        <%block name="course_about_details">
            <div class="details" id="main">
                % if staff_access and studio_url is not None:
                    <div class="wrap-instructor-info studio-view">
                        <a class="instructor-info-action" href="${studio_url}">${_("View About Page in studio")}</a>
                    </div>
                % endif
                <div class="inner-wrapper">
                    ${get_course_about_section(request, course, "overview")}
                    <h2 class='similar-title'><i class="fa fa-star"></i>관련 강좌</h2>
                    <div class='similar-container'>
                        % if len(similar_course) <= 1:
                            <div class="similar-none">
                                현재 강좌와 관련있는 강좌를 찾을 수 없습니다.
                            </div>
                        % endif
                        % if similar_course != None:
                            % for item in similar_course[1:4]:
                                <a href='/courses/${item["course_id"]}/about' class="similar-link">
                                    <div class='similar-item'>
                                        <div class='item-img'>
                                            <img class='item-img-size' alt="${item['display_name']}" src='${item["image_url"]}'>
                                        </div>
                                        <div class='item-status ${item["sim_status"]}'>
                                            <div class='item-status-text'>${_(item['sim_status'])}</div>
                                        </div>
                                        <div class='item-title'>
                                            ${item['display_name']}
                                        </div>
                                        <div class='item-date'>
                                            ${item['sim_start']} ~ ${item['sim_end']}
                                        </div>
                                        <div class='item-org'>
                                            ${item['org']}
                                        </div>
                                        <div class='item-greenline ${item["sim_status"]}'>
                                        </div>
                                    </div>
                                </a>
                            % endfor
                        % else:
                            <div class='similar-error'>
                                관련강좌를 가져오는 중 문제가 발생했습니다<br>
                                관리자에게 문의해주세요<br>
                            </div>
                        % endif
                    </div>
                </div>
            </div>
        </%block>

        <div class="course-sidebar">
            <div class="course-summary">
                <%include file="course_about_sidebar_header.html" />
                <ol class="important-dates">

                    <li class="important-dates-item">
                        <div class="side-about">
                            <div class="about-side-title">
                                <span class="icon fa fa-graduation-cap fa-lg" aria-hidden="true"></span>
                                <p class="important-dates-item-title" >${_("Subject")}</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span>${_(classfy_name)}</span>
                                </br>
                                (${_(middle_classfy_name)})
                            </span>
                        </div>
                    </li>

                    % if course_level != '':
                    <li class="important-dates-item">
                        <div class="side-about side-about-tp">
                            <div class="tooltip-side-about">
                                강좌 내용의 어려운 수준을 의미합니다. 교양, 전공기초, 전공심화 순으로 난이도가 증가합니다.
                            </div>
                            <div class="about-side-title">
                                <span class="icon fa fa-certificate fa-lg" aria-hidden="true"></span><p class="important-dates-item-title">${_("Course difficulty")}</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span>${_(course_level)}</span>
                            </span>
                        </div>
                    </li>
                    % endif

                    <li class="important-dates-item">
                        <div class="side-about side-about-tp">
                            <div class="tooltip-side-about">
                                강좌를 개발하고 운영하는 기관입니다. 컨소시엄으로 운영 시, 대표기관의 명칭이 나타납니다
                            </div>
                            <div class="about-side-title">
                                <span class="icon fa fa-university fa-lg" aria-hidden="true"></span><p class="important-dates-item-title">${_("Institution")}</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                            <span>${org_name}</span>
                            </span>
                        </div>
                    </li>

                    <li class="important-dates-item">
                        <div class="side-about side-about-tp">
                            <div class="tooltip-side-about">
                                운영 기관의 전화번호 입니다.
                            </div>
                            <div class="about-side-title">
                                <span class="icon fa fa-phone fa-lg" aria-hidden="true"></span><p class="important-dates-item-title">${_("Phone")}</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                            <span>${org_phone}</span>
                            </span>
                        </div>
                    </li>

                    <li class="important-dates-item">
                        <div class="side-about side-about-tp">
                            <div class="tooltip-side-about">
                                강좌의 구성 주차 수를 의미합니다.
                                (강좌를 충실히 학습하기 위해 필요한 주당 학습시간을 의미합니다.)
                            </div>
                            <div class="about-side-title">
                                <span class="icon fa fa-tachometer fa-lg" aria-hidden="true"></span><p class="important-dates-item-title" style="margin-top: -2px; letter-spacing: -3px;">${_("Course Week")}</br>(${_("Estimated Effort")})</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span>${_(effort_week)}${_("week")}</span>
                                </br>(주당 ${get_course_about_section(request, course, "effort")})
                            </span>
                        </div>
                    </li>

                    <li class="important-dates-item">
                        <div class="side-about side-about-tp">
                            <div class="tooltip-side-about">
                                본 강좌 이수자에게 인정되는 학습시간으로 해당 강좌의 동영상, 과제, 시험, 퀴즈, 토론 등의 시간을 포함합니다.
                                (강의 내용과 관련된 동영상 재생 시간의 총 합계입니다.)
                            </div>
                            <div class="about-side-title">
                                <span class="icon fa fa-clock-o fa-lg" aria-hidden="true"></span><p class="important-dates-item-title" style="margin-top: -2px;">${_("Accredited learning time")}</br>(${_("Video Duration")})</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span>${_(study_time)}</span>
                                </br>
                                (${get_course_about_section(request, course, "course_video")})
                            </span>
                        </div>
                    </li>

                    % if pre_requisite_courses:
                        <% prc_target = reverse('about_course', args=[unicode(pre_requisite_courses[0]['key'])]) %>
                        <li class="prerequisite-course important-dates-item">
                            <div class="side-about">
                                <div class="about-side-title">
                                    <span class="icon fa fa-list-ul" aria-hidden="true"></span>
                                    <p class="important-dates-item-title">${_("Prerequisites")}</p>
                                </div>
                                <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                    <span><a href="${prc_target}">${pre_requisite_courses[0]['display']}</a></span>
                                    <p class="tip">
                                        ${_("You must successfully complete {link_start}{prc_display}{link_end} before you begin this course.").format(
                                        link_start='<a href="{}">'.format(prc_target),
                                        link_end='</a>',
                                        prc_display=pre_requisite_courses[0]['display'],
                                        )}
                                    </p>
                                </span>
                            </div>
                        </li>
                    % endif

                    % if not course.start_date_is_still_default:
                        <li class="important-dates-item">
                            <div class="side-about side-about-tp">
                                <div class="tooltip-side-about">
                                    수강신청이 가능한 기간으로 해당 기간 내에만 수강신청이 가능합니다.
                                </div>
                                <div class="about-side-title">
                                    <span class="icon fa fa-calendar" aria-hidden="true"></span>
                                    <p class="important-dates-item-title">${_("Registration Period")}</p>
                                </div>
                                <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span class="important-dates-item-text start-date" style="letter-spacing: -1px;">${enroll_sdate} ~ ${enroll_edate}</span>
                                </span>
                            </div>
                        </li>
                    % endif

                    % if not course.start_date_is_still_default:
                        <li class="important-dates-item">
                            <div class="side-about side-about-tp">
                                <div class="tooltip-side-about">
                                    강좌가 운영되고 교수지원이 이루어지는 기간입니다. 이수증은 강좌운영기간이 종료된 이후에 발급받을 수 있습니다.
                                </div>
                                <div class="about-side-title">
                                    <span class="icon fa fa-calendar" aria-hidden="true"></span>
                                    <p class="important-dates-item-title">${_("Classes Period")}</p>
                                </div>
                                <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span class="important-dates-item-text start-date" style="letter-spacing: -1px;">
                                    ${start} ~ ${end}
                                    % if day['day']:
                                    <br>
                                    <p style="float: right; margin: 0;">
                                        (${day['day']})
                                    </p>
                                    % endif
                                </span>
                            </div>
                        </li>
                    % endif

                    % if course_survey_data is not False:
                        <li class="important-dates-item">
                            <div class="side-about">
                                <span class="important-dates-item-text prerequisites" style="display: inline-block;vertical-align: middle; width: 100%;">
                                    <section class="faq-container">
                                        <label style="margin-bottom: 0px; cursor: default; line-height: 1rem; width: 100%;">
                                            <div class="about-side-title star-tit">
                                                <span class="icon fa fa-star" style="" aria-hidden="true">
                                                </span>
                                                <p class="important-dates-item-title survey-star" style="" tabindex="0">강좌 만족도 (${course_survey_data['r_rating']})</p>
                                            </div>
                                            <div class="rating">
                                                % for s in range(course_survey_data['r_course'][0]):
                                                    <i class="fa fa-star on"></i>
                                                % endfor
                                                    <i class="fa fa-star fr-${str(course_survey_data['r_course'][1])}"></i>
                                                % for i in range(4 - course_survey_data['r_course'][0]):
                                                    <i class="fa fa-star"></i>
                                                % endfor
                                            </div>
                                        </label>
                                    </section>
                                </span>
                            </div>
                            <div class="about-star-notice">
                                ※ 만족도 응답 표본 수 미달 등 일정 기준이 충족되지 않은 경우 별점이 공개되지 않을 수 있습니다.
                            </div>
                        </li>
                    % endif

                    % if course_language != '-':
                    <li class="important-dates-item">
                        <div class="side-about">
                            <div class="about-side-title">
                                <span class="icon fa fa-file-video-o fa-lg" aria-hidden="true"></span>
                                <p class="important-dates-item-title">${_("Language")}</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span>${_(course_language)}</span>
                            </span>
                        </div>
                    </li>
                    % endif

                    % if course_subtitle != '-':
                    <li class="important-dates-item">
                        <div class="side-about">
                            <div class="about-side-title">
                                <span class="icon fa fa-file-video-o fa-lg" aria-hidden="true"></span>
                                <p class="important-dates-item-title">${_("Video Transcript")}</p>
                            </div>
                            <span class="important-dates-item-text prerequisites" style="display: inline-block; vertical-align: middle;">
                                <span>${_(course_subtitle)}</span>
                            </span>
                        </div>
                    </li>
                    % endif

                </ol>
            </div>

            <%block name="course_about_reviews_tool">
                % if reviews_fragment_view:
                    ${HTML(reviews_fragment_view.body_html())}
                % endif
            </%block>

            % if get_course_about_section(request, course, "ocw_links"):
                <div class="additional-resources">
                    <h1>${_("Additional Resources")}</h1>
                </div>
                <div>
                    <h2 class="opencourseware">MITOpenCourseware</h2>
                    ${get_course_about_section(request, course, "ocw_links")}
                </div>
            %endif

            % if sidebar_html_enabled:
                % if get_course_about_section(request, course, "about_sidebar_html"):
                <section class="about-sidebar-html">
                    ${get_course_about_section(request, course, "about_sidebar_html")}
                </section>
                % endif
            %endif
        </div>
    </div>
</section>
<script>
var videomodalchk = false;
(function ($) {
    $.each(['show', 'hide', 'remove'], function (i, ev) {
        var el = $.fn[ev]; $.fn[ev] = function () {
            this.trigger(ev);
            return el.apply(this, arguments);
        };
    });
})(jQuery);

$(document).on("show", "#modal_clone", function (e) {
    console.log(".modal.video-modal show!!!!");
    videomodalchk = true;
});

$(document).on("remove", "#modal_clone", function (e) {
    console.log(".modal.video-modal hide!!!!");
    videomodalchk = false;
    setTimeout(function() {
        $("a.media").focus();
    },300);
});
$(window).on("keyup",function(event) {
    console.log("keyup====>"+event.keyCode);
    if (videomodalchk && event.keyCode == "9") {
        event.currentTarget.blur();
        event.target.blur();
        event.target.parentNode.blur();
        $(".match__modal-close").focus();
        setTimeout(function(){
            $(".match__modal-close").focus();
        },300);
    }
});

</script>
%if active_reg_button or is_shib_course:

<div style="display: none;">
    <form id="class_enroll_form" method="post" data-remote="true" action="${reverse('change_enrollment')}">
        <fieldset class="enroll_fieldset">
            <legend class="sr">${pgettext("self","Enroll")}</legend>
            <input name="course_id" type="hidden" value="${course.id | h}">
            <input name="enrollment_action" type="hidden" value="enroll">
        </fieldset>
        <div class="submit">
            <input name="submit" type="submit" value="${pgettext('self','enroll')}">
        </div>
    </form>
</div>
%endif
<%include file="../video_modal.html" />
<%include file="../preview_video_modal.html" />
<%static:require_module_async module_name="js/dateutil_factory" class_name="DateUtilFactory">
    DateUtilFactory.transform(iterationKey=".localized_datetime");
</%static:require_module_async>