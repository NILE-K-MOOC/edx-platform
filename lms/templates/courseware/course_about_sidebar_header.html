<%namespace name='static' file='../static_content.html'/>
<%!
import urllib

from django.utils.translation import ugettext as _
from django.urls import reverse
from django.conf import settings
from six import text_type
%>

<header>
  % if static.get_value('course_about_show_social_links', True):
  <div class="social-sharing">
    <div class="sharing-message">${_("Share with friends and family!")}</div>
    ## TODO: this should probably be an overrideable block,
    ##       or something allowing themes to do whatever they
    ##       want here (and on this whole page, really).
      <%
        site_domain = static.get_value('site_domain', settings.SITE_NAME)
        site_protocol = 'https' if settings.HTTPS == 'on' else 'http'
        platform_name = static.get_platform_name()

        url=u"http://{domain}{path}".format(
            domain=site_domain,
            path=reverse('about_course', args=[course.id.to_deprecated_string()])
        )

        tweet_action = "https://twitter.com/intent/tweet?text=온라인수강&url={url}".format(url=urllib.quote(url.encode("utf-8")))

        facebook_link = 'http://www.facebook.com/sharer/sharer.php?u={url}'.format(url=urllib.quote(url.encode("utf-8")))

        email_subject = u"mailto:?subject={subject}&body={body}".format(
            subject=_("Take a course with {platform} online").format(platform=platform_name),
            body=_("Take a course with {platform} online").format(
                platform=u"http://{domain}{path}".format(
                    domain=site_domain,
                    path=reverse('about_course', args=[course.id.to_deprecated_string()])
                )
        ).replace(u" ", u"+")
        ).replace(u" ", u"%20")
      %>
      <a href="${tweet_action}" class="share">
        <span class="icon fa fa-twitter" aria-hidden="true"></span><span class="sr">${_("Tweet that you've enrolled in this course")}</span>
      </a>
      <a href="${facebook_link}" class="share">
        <span class="icon fa fa-thumbs-up" aria-hidden="true"></span><span class="sr">${_("Post a Facebook message to say you've enrolled in this course")}</span>
      </a>
      <a href="${email_subject}" class="share">
        <span class="icon fa fa-envelope" aria-hidden="true"></span><span class="sr">${_("Email someone to say you've enrolled in this course")}</span>
      </a>
  </div>
  % endif
</header>
