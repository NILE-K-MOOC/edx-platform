{"version":3,"sources":["webpack:///./common/lib/xmodule/xmodule/js/src/poll/poll_main.js","webpack:///./common/static/xmodule/modules/js/001-3918b2d4f383c04fed8227cc9f523d6e.js?79f9","webpack:///./common/static/xmodule/modules/js/002-8b615179a51250c4dc203f1daa97be63.js","webpack:///./common/static/xmodule/modules/js/003-98cb8ef870a77a10f053783eba6f771d.js","webpack:///external \"jQuery\"?0cb8*************","webpack:///external \"_\"?b3b9***********"],"names":["PollMain","prototype","showAnswerGraph","poll_answers","total","_this","totalValue","parseFloat","isFinite","$","each","index","value","numValue","percentValue","answersObj","statsEl","show","numberEl","html","toFixed","percentEl","css","width","submitAnswer","answer","answerObj","questionAnswered","console","log","buttonEl","addClass","postWithPrefix","ajax_url","response","canReset","resetButton","wrapperSectionEl","find","window","Conditional","id","replace","submitReset","hasOwnProperty","status","toLowerCase","questionEl","removeClass","hide","postInit","jsonConfig","poll_answer","length","answers","append","attr","data","questionHtmlMarkup","question","text","shortVersion","el","textEl","barEl","jQuery","appendTo","on","reset","tempEl","c1","tagName","parent","JSON","parse","children","stringify","err","message","JavascriptLoader","executeModuleScripts","callback","callbackCalled","completed","completionHandlerGenerator","loaded","placeholders","i","ref","results","push","allComplete","flag","len","undefined","placeholder","s","src","document","createElement","setAttribute","onload","appendChild","remove","call","define","Poll"],"mappings":"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","file":"PollModule.js","sourcesContent":["\n    define('PollMain', [], function() {\n        PollMain.prototype = {\n\n            showAnswerGraph: function(poll_answers, total) {\n                var _this, totalValue;\n\n                totalValue = parseFloat(total);\n                if (isFinite(totalValue) === false) {\n                    return;\n                }\n\n                _this = this;\n\n                $.each(poll_answers, function(index, value) {\n                    var numValue, percentValue;\n\n                    numValue = parseFloat(value);\n                    if (isFinite(numValue) === false) {\n                        return;\n                    }\n\n                    percentValue = (numValue / totalValue) * 100.0;\n\n                    _this.answersObj[index].statsEl.show();\n                    _this.answersObj[index].numberEl.html('' + value + ' (' + percentValue.toFixed(1) + '%)');\n                    _this.answersObj[index].percentEl.css({\n                        width: '' + percentValue.toFixed(1) + '%'\n                    });\n                });\n            },\n\n            submitAnswer: function(answer, answerObj) {\n                var _this;\n\n    // Make sure that the user can answer a question only once.\n                if (this.questionAnswered === true) {\n                    return;\n                }\n                this.questionAnswered = true;\n\n                _this = this;\n\n                console.log('submit answer');\n\n                answerObj.buttonEl.addClass('answered');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        _this.ajax_url + '/' + answer, {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            _this.showAnswerGraph(response.poll_answers, response.total);\n\n            if (_this.canReset === true) {\n                _this.resetButton.show();\n            }\n\n            // Initialize Conditional constructors.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    new window.Conditional(value, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n\n            submitReset: function() {\n                var _this;\n\n                _this = this;\n\n                console.log('submit reset');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        this.ajax_url + '/' + 'reset_poll',\n        {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            if (\n                (response.hasOwnProperty('status') !== true) ||\n                (typeof response.status !== 'string') ||\n                (response.status.toLowerCase() !== 'success')) {\n                return;\n            }\n\n            _this.questionAnswered = false;\n            _this.questionEl.find('.button.answered').removeClass('answered');\n            _this.questionEl.find('.stats').hide();\n            _this.resetButton.hide();\n\n            // Initialize Conditional constructors. We will specify the third parameter as 'true'\n            // notifying the constructor that this is a reset operation.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    new window.Conditional(value, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n            postInit: function() {\n                var _this;\n\n    // Access this object inside inner functions.\n                _this = this;\n\n                if (\n        (this.jsonConfig.poll_answer.length > 0) &&\n        (this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer) === false)\n    ) {\n                    this.questionEl.append(\n            '<h3>Error!</h3>' +\n            '<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>'\n        );\n\n                    return;\n                }\n\n    // Get the DOM id of the question.\n                this.id = this.questionEl.attr('id');\n\n    // Get the URL to which we will post the users answer to the question.\n                this.ajax_url = this.questionEl.data('ajax-url');\n\n                this.questionHtmlMarkup = $('<div />').html(this.jsonConfig.question).text();\n                this.questionEl.append(this.questionHtmlMarkup);\n\n    // When the user selects and answer, we will set this flag to true.\n                this.questionAnswered = false;\n\n                this.answersObj = {};\n                this.shortVersion = true;\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    if (value.length >= 18) {\n                        _this.shortVersion = false;\n                    }\n                });\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    var answer;\n\n                    answer = {};\n\n                    _this.answersObj[index] = answer;\n\n                    answer.el = $('<div class=\"poll_answer\"></div>');\n\n                    answer.questionEl = $('<div class=\"question\"></div>');\n                    answer.buttonEl = $('<div class=\"button\"></div>');\n                    answer.textEl = $('<div class=\"text\"></div>');\n                    answer.questionEl.append(answer.buttonEl);\n                    answer.questionEl.append(answer.textEl);\n\n                    answer.el.append(answer.questionEl);\n\n                    answer.statsEl = $('<div class=\"stats\"></div>');\n                    answer.barEl = $('<div class=\"bar\"></div>');\n                    answer.percentEl = $('<div class=\"percent\"></div>');\n                    answer.barEl.append(answer.percentEl);\n                    answer.numberEl = $('<div class=\"number\"></div>');\n                    answer.statsEl.append(answer.barEl);\n                    answer.statsEl.append(answer.numberEl);\n\n                    answer.statsEl.hide();\n\n                    answer.el.append(answer.statsEl);\n\n                    answer.textEl.html(value);\n\n                    if (_this.shortVersion === true) {\n                        $.each(answer, function(index, value) {\n                            if (value instanceof jQuery) {\n                                value.addClass('short');\n                            }\n                        });\n                    }\n\n                    answer.el.appendTo(_this.questionEl);\n\n                    answer.textEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    answer.buttonEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    if (index === _this.jsonConfig.poll_answer) {\n                        answer.buttonEl.addClass('answered');\n                        _this.questionAnswered = true;\n                    }\n                });\n\n                console.log(this.jsonConfig.reset);\n\n                if ((typeof this.jsonConfig.reset === 'string') && (this.jsonConfig.reset.toLowerCase() === 'true')) {\n                    this.canReset = true;\n\n                    this.resetButton = $('<div class=\"button reset-button\">Change your vote</div>');\n\n                    if (this.questionAnswered === false) {\n                        this.resetButton.hide();\n                    }\n\n                    this.resetButton.appendTo(this.questionEl);\n\n                    this.resetButton.on('click', function() {\n                        _this.submitReset();\n                    });\n                } else {\n                    this.canReset = false;\n                }\n\n    // If it turns out that the user already answered the question, show the answers graph.\n                if (this.questionAnswered === true) {\n                    this.showAnswerGraph(this.jsonConfig.poll_answers, this.jsonConfig.total);\n                }\n            } // End-of: 'postInit': function () {\n        }; // End-of: PollMain.prototype = {\n\n        return PollMain;\n\n        function PollMain(el) {\n            var _this;\n\n            this.questionEl = $(el).find('.poll_question');\n            if (this.questionEl.length !== 1) {\n        // We require one question DOM element.\n                console.log('ERROR: PollMain constructor requires one question DOM element.');\n\n                return;\n            }\n\n    // Just a safety precussion. If we run this code more than once, multiple 'click' callback handlers will be\n    // attached to the same DOM elements. We don't want this to happen.\n            if (this.questionEl.attr('poll_main_processed') === 'true') {\n                console.log(\n            'ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.'\n        );\n\n                return;\n            }\n\n    // This element was not processed earlier.\n    // Make sure that next time we will not process this element a second time.\n            this.questionEl.attr('poll_main_processed', 'true');\n\n    // Access this object inside inner functions.\n            _this = this;\n\n    // DOM element which contains the current poll along with any conditionals. By default we assume that such\n    // element is not present. We will try to find it.\n            this.wrapperSectionEl = null;\n\n            (function(tempEl, c1) {\n                while (tempEl.tagName.toLowerCase() !== 'body') {\n                    tempEl = $(tempEl).parent()[0];\n                    c1 += 1;\n\n                    if (\n                (tempEl.tagName.toLowerCase() === 'div') &&\n                ($(tempEl).data('block-type') === 'wrapper')\n            ) {\n                        _this.wrapperSectionEl = tempEl;\n\n                        break;\n                    } else if (c1 > 50) {\n                // In case something breaks, and we enter an endless loop, a sane\n                // limit for loop iterations.\n\n                        break;\n                    }\n                }\n            }($(el)[0], 0));\n\n            try {\n                this.jsonConfig = JSON.parse(this.questionEl.children('.poll_question_div').html());\n\n                $.postWithPrefix(\n            '' + this.questionEl.data('ajax-url') + '/' + 'get_state', {},\n            function(response) {\n                _this.jsonConfig.poll_answer = response.poll_answer;\n                _this.jsonConfig.total = response.total;\n\n                $.each(response.poll_answers, function(index, value) {\n                    _this.jsonConfig.poll_answers[index] = value;\n                });\n\n                _this.questionEl.children('.poll_question_div').html(JSON.stringify(_this.jsonConfig));\n\n                _this.postInit();\n            }\n        );\n\n                return;\n            } catch (err) {\n                console.log(\n            'ERROR: Invalid JSON config for poll ID \"' + this.id + '\".',\n            'Error messsage: \"' + err.message + '\".'\n        );\n\n                return;\n            }\n        } // End-of: function PollMain(el) {\n    }); // End-of: define('PollMain', [], function () {\n\n// End-of: (function (requirejs, require, define) {\n\n\n\n\n// WEBPACK FOOTER //\n// ./common/lib/xmodule/xmodule/js/src/poll/poll_main.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function() {\n    'use strict';\n    this.JavascriptLoader = (function() {\n        function JavascriptLoader() {\n        }\n\n        /**\n         * Set of library functions that provide common interface for javascript loading\n         * for all module types. All functionality provided by JavascriptLoader should take\n         * place at module scope, i.e. don't run jQuery over entire page.\n         *\n         * executeModuleScripts:\n         *     Scan the module ('el') for \"script_placeholder\"s, then:\n         *\n         *     1) Fetch each script from server\n         *     2) Explicitly attach the script to the <head> of document\n         *     3) Explicitly wait for each script to be loaded\n         *     4) Return to callback function when all scripts loaded\n         */\n        JavascriptLoader.executeModuleScripts = function(el, callback) {\n            var callbackCalled, completed, completionHandlerGenerator, loaded, placeholders;\n            if (!callback) {\n                callback = null; // eslint-disable-line no-param-reassign\n            }\n            placeholders = el.find('.script_placeholder');\n            if (placeholders.length === 0) {\n                if (callback !== null) {\n                    callback();\n                }\n                return [];\n            }\n            // TODO: Verify the execution order of multiple placeholders\n            completed = (function() {\n                var i, ref, results;\n                results = [];\n                for (i = 1, ref = placeholders.length; ref >= 1 ? i <= ref : i >= ref; ref >= 1 ? ++i : --i) {\n                    results.push(false);\n                }\n                return results;\n            }());\n            callbackCalled = false;\n            completionHandlerGenerator = function(index) {\n                return function() {\n                    var allComplete, flag, i, len;\n                    allComplete = true;\n                    completed[index] = true;\n                    for (i = 0, len = completed.length; i < len; i++) {\n                        flag = completed[i];\n                        if (!flag) {\n                            allComplete = false;\n                            break;\n                        }\n                    }\n                    if (allComplete && !callbackCalled) {\n                        callbackCalled = true;\n                        if (callback !== null) {\n                            return callback();\n                        }\n                    }\n                    return undefined;\n                };\n            };\n            // Keep a map of what sources we're loaded from, and don't do it twice.\n            loaded = {};\n            return placeholders.each(function(index, placeholder) {\n                var s, src;\n                // TODO: Check if the script already exists in DOM. If so, (1) copy it\n                // into memory; (2) delete the DOM script element; (3) reappend it.\n                // This would prevent memory bloat and save a network request.\n                src = $(placeholder).attr('data-src');\n                if (!(src in loaded)) {\n                    loaded[src] = true;\n                    s = document.createElement('script');\n                    s.setAttribute('src', src);\n                    s.setAttribute('type', 'text/javascript');\n                    s.onload = completionHandlerGenerator(index);\n                    // Need to use the DOM elements directly or the scripts won't execute properly.\n                    $('head')[0].appendChild(s);\n                } else {\n                    // just call the completion callback directly, without reloading the file\n                    completionHandlerGenerator(index)();\n                }\n                return $(placeholder).remove();\n            });\n        };\n\n        return JavascriptLoader;\n    }());\n}).call(this);\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/001-3918b2d4f383c04fed8227cc9f523d6e.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\ndefine(['poll/poll_main.js'], function(PollMain) {\n    'use strict';\n\n    function Poll(el) {\n        return new PollMain(el);\n    }\n\n    window.Poll = Poll;\n\n    return Poll;\n});\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/002-8b615179a51250c4dc203f1daa97be63.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n\n    define('PollMain', [], function() {\n        PollMain.prototype = {\n\n            showAnswerGraph: function(poll_answers, total) {\n                var _this, totalValue;\n\n                totalValue = parseFloat(total);\n                if (isFinite(totalValue) === false) {\n                    return;\n                }\n\n                _this = this;\n\n                $.each(poll_answers, function(index, value) {\n                    var numValue, percentValue;\n\n                    numValue = parseFloat(value);\n                    if (isFinite(numValue) === false) {\n                        return;\n                    }\n\n                    percentValue = (numValue / totalValue) * 100.0;\n\n                    _this.answersObj[index].statsEl.show();\n                    _this.answersObj[index].numberEl.html('' + value + ' (' + percentValue.toFixed(1) + '%)');\n                    _this.answersObj[index].percentEl.css({\n                        width: '' + percentValue.toFixed(1) + '%'\n                    });\n                });\n            },\n\n            submitAnswer: function(answer, answerObj) {\n                var _this;\n\n    // Make sure that the user can answer a question only once.\n                if (this.questionAnswered === true) {\n                    return;\n                }\n                this.questionAnswered = true;\n\n                _this = this;\n\n                console.log('submit answer');\n\n                answerObj.buttonEl.addClass('answered');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        _this.ajax_url + '/' + answer, {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            _this.showAnswerGraph(response.poll_answers, response.total);\n\n            if (_this.canReset === true) {\n                _this.resetButton.show();\n            }\n\n            // Initialize Conditional constructors.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    new window.Conditional(value, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n\n            submitReset: function() {\n                var _this;\n\n                _this = this;\n\n                console.log('submit reset');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        this.ajax_url + '/' + 'reset_poll',\n        {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            if (\n                (response.hasOwnProperty('status') !== true) ||\n                (typeof response.status !== 'string') ||\n                (response.status.toLowerCase() !== 'success')) {\n                return;\n            }\n\n            _this.questionAnswered = false;\n            _this.questionEl.find('.button.answered').removeClass('answered');\n            _this.questionEl.find('.stats').hide();\n            _this.resetButton.hide();\n\n            // Initialize Conditional constructors. We will specify the third parameter as 'true'\n            // notifying the constructor that this is a reset operation.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    new window.Conditional(value, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n            postInit: function() {\n                var _this;\n\n    // Access this object inside inner functions.\n                _this = this;\n\n                if (\n        (this.jsonConfig.poll_answer.length > 0) &&\n        (this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer) === false)\n    ) {\n                    this.questionEl.append(\n            '<h3>Error!</h3>' +\n            '<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>'\n        );\n\n                    return;\n                }\n\n    // Get the DOM id of the question.\n                this.id = this.questionEl.attr('id');\n\n    // Get the URL to which we will post the users answer to the question.\n                this.ajax_url = this.questionEl.data('ajax-url');\n\n                this.questionHtmlMarkup = $('<div />').html(this.jsonConfig.question).text();\n                this.questionEl.append(this.questionHtmlMarkup);\n\n    // When the user selects and answer, we will set this flag to true.\n                this.questionAnswered = false;\n\n                this.answersObj = {};\n                this.shortVersion = true;\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    if (value.length >= 18) {\n                        _this.shortVersion = false;\n                    }\n                });\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    var answer;\n\n                    answer = {};\n\n                    _this.answersObj[index] = answer;\n\n                    answer.el = $('<div class=\"poll_answer\"></div>');\n\n                    answer.questionEl = $('<div class=\"question\"></div>');\n                    answer.buttonEl = $('<div class=\"button\"></div>');\n                    answer.textEl = $('<div class=\"text\"></div>');\n                    answer.questionEl.append(answer.buttonEl);\n                    answer.questionEl.append(answer.textEl);\n\n                    answer.el.append(answer.questionEl);\n\n                    answer.statsEl = $('<div class=\"stats\"></div>');\n                    answer.barEl = $('<div class=\"bar\"></div>');\n                    answer.percentEl = $('<div class=\"percent\"></div>');\n                    answer.barEl.append(answer.percentEl);\n                    answer.numberEl = $('<div class=\"number\"></div>');\n                    answer.statsEl.append(answer.barEl);\n                    answer.statsEl.append(answer.numberEl);\n\n                    answer.statsEl.hide();\n\n                    answer.el.append(answer.statsEl);\n\n                    answer.textEl.html(value);\n\n                    if (_this.shortVersion === true) {\n                        $.each(answer, function(index, value) {\n                            if (value instanceof jQuery) {\n                                value.addClass('short');\n                            }\n                        });\n                    }\n\n                    answer.el.appendTo(_this.questionEl);\n\n                    answer.textEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    answer.buttonEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    if (index === _this.jsonConfig.poll_answer) {\n                        answer.buttonEl.addClass('answered');\n                        _this.questionAnswered = true;\n                    }\n                });\n\n                console.log(this.jsonConfig.reset);\n\n                if ((typeof this.jsonConfig.reset === 'string') && (this.jsonConfig.reset.toLowerCase() === 'true')) {\n                    this.canReset = true;\n\n                    this.resetButton = $('<div class=\"button reset-button\">Change your vote</div>');\n\n                    if (this.questionAnswered === false) {\n                        this.resetButton.hide();\n                    }\n\n                    this.resetButton.appendTo(this.questionEl);\n\n                    this.resetButton.on('click', function() {\n                        _this.submitReset();\n                    });\n                } else {\n                    this.canReset = false;\n                }\n\n    // If it turns out that the user already answered the question, show the answers graph.\n                if (this.questionAnswered === true) {\n                    this.showAnswerGraph(this.jsonConfig.poll_answers, this.jsonConfig.total);\n                }\n            } // End-of: 'postInit': function () {\n        }; // End-of: PollMain.prototype = {\n\n        return PollMain;\n\n        function PollMain(el) {\n            var _this;\n\n            this.questionEl = $(el).find('.poll_question');\n            if (this.questionEl.length !== 1) {\n        // We require one question DOM element.\n                console.log('ERROR: PollMain constructor requires one question DOM element.');\n\n                return;\n            }\n\n    // Just a safety precussion. If we run this code more than once, multiple 'click' callback handlers will be\n    // attached to the same DOM elements. We don't want this to happen.\n            if (this.questionEl.attr('poll_main_processed') === 'true') {\n                console.log(\n            'ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.'\n        );\n\n                return;\n            }\n\n    // This element was not processed earlier.\n    // Make sure that next time we will not process this element a second time.\n            this.questionEl.attr('poll_main_processed', 'true');\n\n    // Access this object inside inner functions.\n            _this = this;\n\n    // DOM element which contains the current poll along with any conditionals. By default we assume that such\n    // element is not present. We will try to find it.\n            this.wrapperSectionEl = null;\n\n            (function(tempEl, c1) {\n                while (tempEl.tagName.toLowerCase() !== 'body') {\n                    tempEl = $(tempEl).parent()[0];\n                    c1 += 1;\n\n                    if (\n                (tempEl.tagName.toLowerCase() === 'div') &&\n                ($(tempEl).data('block-type') === 'wrapper')\n            ) {\n                        _this.wrapperSectionEl = tempEl;\n\n                        break;\n                    } else if (c1 > 50) {\n                // In case something breaks, and we enter an endless loop, a sane\n                // limit for loop iterations.\n\n                        break;\n                    }\n                }\n            }($(el)[0], 0));\n\n            try {\n                this.jsonConfig = JSON.parse(this.questionEl.children('.poll_question_div').html());\n\n                $.postWithPrefix(\n            '' + this.questionEl.data('ajax-url') + '/' + 'get_state', {},\n            function(response) {\n                _this.jsonConfig.poll_answer = response.poll_answer;\n                _this.jsonConfig.total = response.total;\n\n                $.each(response.poll_answers, function(index, value) {\n                    _this.jsonConfig.poll_answers[index] = value;\n                });\n\n                _this.questionEl.children('.poll_question_div').html(JSON.stringify(_this.jsonConfig));\n\n                _this.postInit();\n            }\n        );\n\n                return;\n            } catch (err) {\n                console.log(\n            'ERROR: Invalid JSON config for poll ID \"' + this.id + '\".',\n            'Error messsage: \"' + err.message + '\".'\n        );\n\n                return;\n            }\n        } // End-of: function PollMain(el) {\n    }); // End-of: define('PollMain', [], function () {\n\n// End-of: (function (requirejs, require, define) {\n\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/003-98cb8ef870a77a10f053783eba6f771d.js","(function() { module.exports = window[\"jQuery\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 3 4 5 6 9 10 11 13 14 15 16 17 18 19 20 21 23 24 25 26 27 28 29 30 31 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 84","(function() { module.exports = window[\"_\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 1\n// module chunks = 3 4 5 6 9 10 11 14 15 16 18 19 20 21 23 24 25 26 27 28 29 30 31 34 35 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75"],"sourceRoot":""}