{"version":3,"sources":["webpack:///./cms/static/js/collections/chapter.js","webpack:///./cms/static/js/collections/textbook.js","webpack:///./cms/static/js/factories/textbooks.js","webpack:///./cms/static/js/models/chapter.js","webpack:///./cms/static/js/models/section.js","webpack:///./cms/static/js/models/textbook.js","webpack:///./cms/static/js/views/edit_chapter.js","webpack:///./cms/static/js/views/edit_textbook.js","webpack:///./cms/static/js/views/list_textbooks.js","webpack:///./cms/static/js/views/show_textbook.js","webpack:///./cms/templates/js/edit-chapter.underscore","webpack:///./~/backbone-associations/backbone-associations-min.js","webpack:///external \"jQuery\"?0cb8*****","webpack:///external \"_\"?b3b9*****","webpack:///external \"Backbone\"?709d****","webpack:///external \"gettext\"?8b52*"],"names":["Backbone","ChapterModel","ChapterCollection","Collection","extend","model","comparator","nextOrder","length","last","get","isEmpty","every","m","TextbookModel","TextbookCollection","url","CMS","URL","TEXTBOOKS","TextbooksFactory","textbooksJson","textbooks","parse","tbView","collection","$","append","render","el","click","event","addOne","window","on","dirty","find","textbook","isDirty","gettext","Chapter","AssociatedModel","defaults","name","asset_path","order","response","title","toJSON","validate","attrs","options","message","attributes","NotificationView","ModuleUtils","Section","Model","urlRoot","metadata","display_name","initialize","listenTo","showNotification","hideNotification","msg","Mini","show","hide","_","Textbook","chapters","showChapters","editing","relations","type","Many","key","relatedModel","collectionType","setOriginalAttributes","_originalAttributes","reset","set","isEqual","ret","tab_title","each","chapter","i","invalidChapters","isValid","push","HtmlUtils","BaseView","FileUploadModel","UploadDialogView","editChapterTemplate","EditChapter","template","tagName","className","setHtml","$el","error","validationError","events","submit","changeName","e","preventDefault","val","silent","changeAssetPath","removeChapter","remove","openUploadDialog","course","escape","mimeTypes","that","view","onSuccess","asset","displayname","portable_url","EditChapterView","EditTextbook","loadTemplate","addAll","html","createChapter","setValues","add","setName","li","at","setAndClose","saving","save","success","close","complete","cancel","isNew","EditTextbookView","ShowTextbookView","ViewUtils","ListTextbooks","emptyTemplate","handleDestroy","empty","$sectionEl","$inputEl","setScrollOffset","focus","select","PromptView","ShowTextbook","text","bookindex","indexOf","editTextbook","confirmDelete","Warning","actions","primary","delmsg","destroy","secondary","hideChapters"],"mappings":"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","file":"js/factories/textbooks.js","sourcesContent":["define(['backbone', 'js/models/chapter'], function(Backbone, ChapterModel) {\n    var ChapterCollection = Backbone.Collection.extend({\n        model: ChapterModel,\n        comparator: 'order',\n        nextOrder: function() {\n            if (!this.length) return 1;\n            return this.last().get('order') + 1;\n        },\n        isEmpty: function() {\n            return this.length === 0 || this.every(function(m) { return m.isEmpty(); });\n        }\n    });\n    return ChapterCollection;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/collections/chapter.js","define(['backbone', 'js/models/textbook'],\n        function(Backbone, TextbookModel) {\n            var TextbookCollection = Backbone.Collection.extend({\n                model: TextbookModel,\n                url: function() { return CMS.URL.TEXTBOOKS; }\n            });\n            return TextbookCollection;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/collections/textbook.js","import * as gettext from 'gettext';\nimport * as Section from 'js/models/section';\nimport * as TextbookCollection from 'js/collections/textbook';\nimport * as ListTextbooksView from 'js/views/list_textbooks';\nimport './base';\n\n'use strict';\nexport default function TextbooksFactory(textbooksJson) {\n    var textbooks = new TextbookCollection(textbooksJson, {parse: true}),\n        tbView = new ListTextbooksView({collection: textbooks});\n\n    $('.content-primary').append(tbView.render().el);\n    $('.nav-actions .new-button').click(function(event) {\n        tbView.addOne(event);\n    });\n    $(window).on('beforeunload', function() {\n        var dirty = textbooks.find(function(textbook) { return textbook.isDirty(); });\n        if (dirty) {\n            return gettext('You have unsaved changes. Do you really want to leave this page?');\n        }\n    });\n};\n\nexport {TextbooksFactory}\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/factories/textbooks.js","define(['backbone', 'gettext', 'backbone.associations'], function(Backbone, gettext) {\n    var Chapter = Backbone.AssociatedModel.extend({\n        defaults: function() {\n            return {\n                name: '',\n                asset_path: '',\n                order: this.collection ? this.collection.nextOrder() : 1\n            };\n        },\n        isEmpty: function() {\n            return !this.get('name') && !this.get('asset_path');\n        },\n        parse: function(response) {\n            if ('title' in response && !('name' in response)) {\n                response.name = response.title;\n                delete response.title;\n            }\n            if ('url' in response && !('asset_path' in response)) {\n                response.asset_path = response.url;\n                delete response.url;\n            }\n            return response;\n        },\n        toJSON: function() {\n            return {\n                title: this.get('name'),\n                url: this.get('asset_path')\n            };\n        },\n        // NOTE: validation functions should return non-internationalized error\n        // messages. The messages will be passed through gettext in the template.\n        validate: function(attrs, options) {\n            if (!attrs.name && !attrs.asset_path) {\n                return {\n                    message: gettext('Chapter name and asset_path are both required'),\n                    attributes: {name: true, asset_path: true}\n                };\n            } else if (!attrs.name) {\n                return {\n                    message: gettext('Chapter name is required'),\n                    attributes: {name: true}\n                };\n            } else if (!attrs.asset_path) {\n                return {\n                    message: gettext('asset_path is required'),\n                    attributes: {asset_path: true}\n                };\n            }\n        }\n    });\n    return Chapter;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/chapter.js","define(['backbone', 'gettext', 'common/js/components/views/feedback_notification', 'js/utils/module'],\n    function(Backbone, gettext, NotificationView, ModuleUtils) {\n        var Section = Backbone.Model.extend({\n            defaults: {\n                name: ''\n            },\n            validate: function(attrs, options) {\n                if (!attrs.name) {\n                    return gettext('You must specify a name');\n                }\n            },\n            urlRoot: ModuleUtils.urlRoot,\n            toJSON: function() {\n                return {\n                    metadata: {\n                        display_name: this.get('name')\n                    }\n                };\n            },\n            initialize: function() {\n                this.listenTo(this, 'request', this.showNotification);\n                this.listenTo(this, 'sync', this.hideNotification);\n            },\n            showNotification: function() {\n                if (!this.msg) {\n                    this.msg = new NotificationView.Mini({\n                        title: gettext('Saving')\n                    });\n                }\n                this.msg.show();\n            },\n            hideNotification: function() {\n                if (!this.msg) { return; }\n                this.msg.hide();\n            }\n        });\n        return Section;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/section.js","define(['backbone', 'underscore', 'gettext', 'js/models/chapter', 'js/collections/chapter',\n    'backbone.associations', 'cms/js/main'],\n    function(Backbone, _, gettext, ChapterModel, ChapterCollection) {\n        var Textbook = Backbone.AssociatedModel.extend({\n            defaults: function() {\n                return {\n                    name: '',\n                    chapters: new ChapterCollection([{}]),\n                    showChapters: false,\n                    editing: false\n                };\n            },\n            relations: [{\n                type: Backbone.Many,\n                key: 'chapters',\n                relatedModel: ChapterModel,\n                collectionType: ChapterCollection\n            }],\n            initialize: function() {\n                this.setOriginalAttributes();\n                return this;\n            },\n            setOriginalAttributes: function() {\n                this._originalAttributes = this.parse(this.toJSON());\n            },\n            reset: function() {\n                this.set(this._originalAttributes, {parse: true});\n            },\n            isDirty: function() {\n                return !_.isEqual(this._originalAttributes, this.parse(this.toJSON()));\n            },\n            isEmpty: function() {\n                return !this.get('name') && this.get('chapters').isEmpty();\n            },\n            urlRoot: function() { return CMS.URL.TEXTBOOKS; },\n            parse: function(response) {\n                var ret = $.extend(true, {}, response);\n                if ('tab_title' in ret && !('name' in ret)) {\n                    ret.name = ret.tab_title;\n                    delete ret.tab_title;\n                }\n                if ('url' in ret && !('chapters' in ret)) {\n                    ret.chapters = {url: ret.url};\n                    delete ret.url;\n                }\n                _.each(ret.chapters, function(chapter, i) {\n                    chapter.order = chapter.order || i + 1;\n                });\n                return ret;\n            },\n            toJSON: function() {\n                return {\n                    tab_title: this.get('name'),\n                    chapters: this.get('chapters').toJSON()\n                };\n            },\n        // NOTE: validation functions should return non-internationalized error\n        // messages. The messages will be passed through gettext in the template.\n            validate: function(attrs, options) {\n                if (!attrs.name) {\n                    return {\n                        message: gettext('Textbook name is required'),\n                        attributes: {name: true}\n                    };\n                }\n                if (attrs.chapters.length === 0) {\n                    return {\n                        message: gettext('Please add at least one chapter'),\n                        attributes: {chapters: true}\n                    };\n                } else {\n                // validate all chapters\n                    var invalidChapters = [];\n                    attrs.chapters.each(function(chapter) {\n                        if (!chapter.isValid()) {\n                            invalidChapters.push(chapter);\n                        }\n                    });\n                    if (!_.isEmpty(invalidChapters)) {\n                        return {\n                            message: gettext('All chapters must have a name and asset'),\n                            attributes: {chapters: invalidChapters}\n                        };\n                    }\n                }\n            }\n        });\n        return Textbook;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/textbook.js","/* global course */\n\ndefine(['underscore', 'jquery', 'gettext', 'edx-ui-toolkit/js/utils/html-utils',\n    'js/views/baseview', 'js/models/uploads', 'js/views/uploads', 'templates/edit-chapter.underscore'],\n    function(_, $, gettext, HtmlUtils, BaseView, FileUploadModel, UploadDialogView, editChapterTemplate) {\n        'use strict';\n\n        var EditChapter = BaseView.extend({\n            initialize: function() {\n                this.template = HtmlUtils.template(editChapterTemplate);\n                this.listenTo(this.model, 'change', this.render);\n            },\n            tagName: 'li',\n            className: function() {\n                return 'field-group chapter chapter' + this.model.get('order');\n            },\n            render: function() {\n                HtmlUtils.setHtml(\n                    this.$el,\n                    this.template({\n                        name: this.model.get('name'),\n                        asset_path: this.model.get('asset_path'),\n                        order: this.model.get('order'),\n                        error: this.model.validationError\n                    })\n                );\n                return this;\n            },\n            events: {\n                'change .chapter-name': 'changeName',\n                'change .chapter-asset-path': 'changeAssetPath',\n                'click .action-close': 'removeChapter',\n                'click .action-upload': 'openUploadDialog',\n                submit: 'uploadAsset'\n            },\n            changeName: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set({\n                    name: this.$('.chapter-name').val()\n                }, {silent: true});\n                return this;\n            },\n            changeAssetPath: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set({\n                    asset_path: this.$('.chapter-asset-path').val()\n                }, {silent: true});\n                return this;\n            },\n            removeChapter: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.collection.remove(this.model);\n                return this.remove();\n            },\n            openUploadDialog: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set({\n                    name: this.$('input.chapter-name').val(),\n                    asset_path: this.$('input.chapter-asset-path').val()\n                });\n                var msg = new FileUploadModel({\n                    title: _.template(gettext('Upload a new PDF to “<%= name %>”'))(\n                        {name: course.escape('name')}),\n                    message: gettext('Please select a PDF file to upload.'),\n                    mimeTypes: ['application/pdf']\n                });\n                var that = this;\n                var view = new UploadDialogView({\n                    model: msg,\n                    onSuccess: function(response) {\n                        var options = {};\n                        if (!that.model.get('name')) {\n                            options.name = response.asset.displayname;\n                        }\n                        options.asset_path = response.asset.portable_url;\n                        that.model.set(options);\n                    }\n                });\n                view.show();\n            }\n        });\n\n        return EditChapter;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/edit_chapter.js","define(['js/views/baseview', 'underscore', 'jquery', 'js/views/edit_chapter', 'common/js/components/views/feedback_notification'],\n        function(BaseView, _, $, EditChapterView, NotificationView) {\n            var EditTextbook = BaseView.extend({\n                initialize: function() {\n                    this.template = this.loadTemplate('edit-textbook');\n                    this.listenTo(this.model, 'invalid', this.render);\n                    var chapters = this.model.get('chapters');\n                    this.listenTo(chapters, 'add', this.addOne);\n                    this.listenTo(chapters, 'reset', this.addAll);\n                    this.listenTo(chapters, 'all', this.render);\n                },\n                tagName: 'section',\n                className: 'textbook',\n                render: function() {\n                    this.$el.html(this.template({\n                        name: this.model.get('name'),\n                        error: this.model.validationError\n                    }));\n                    this.addAll();\n                    return this;\n                },\n                events: {\n                    'change input[name=textbook-name]': 'setName',\n                    submit: 'setAndClose',\n                    'click .action-cancel': 'cancel',\n                    'click .action-add-chapter': 'createChapter'\n                },\n                addOne: function(chapter) {\n                    var view = new EditChapterView({model: chapter});\n                    this.$('ol.chapters').append(view.render().el);\n                    return this;\n                },\n                addAll: function() {\n                    this.model.get('chapters').each(this.addOne, this);\n                },\n                createChapter: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.setValues();\n                    this.model.get('chapters').add([{}]);\n                },\n                setName: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('name', this.$('#textbook-name-input').val(), {silent: true});\n                },\n                setValues: function() {\n                    this.setName();\n                    var that = this;\n                    _.each(this.$('li'), function(li, i) {\n                        var chapter = that.model.get('chapters').at(i);\n                        if (!chapter) { return; }\n                        chapter.set({\n                            name: $('.chapter-name', li).val(),\n                            asset_path: $('.chapter-asset-path', li).val()\n                        });\n                    });\n                    return this;\n                },\n                setAndClose: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.setValues();\n                    if (!this.model.isValid()) { return; }\n                    var saving = new NotificationView.Mini({\n                        title: gettext('Saving')\n                    }).show();\n                    var that = this;\n                    this.model.save({}, {\n                        success: function() {\n                            that.model.setOriginalAttributes();\n                            that.close();\n                        },\n                        complete: function() {\n                            saving.hide();\n                        }\n                    });\n                },\n                cancel: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.reset();\n                    return this.close();\n                },\n                close: function() {\n                    var textbooks = this.model.collection;\n                    this.remove();\n                    if (this.model.isNew()) {\n                // if the textbook has never been saved, remove it\n                        textbooks.remove(this.model);\n                    }\n            // don't forget to tell the model that it's no longer being edited\n                    this.model.set('editing', false);\n                    return this;\n                }\n            });\n            return EditTextbook;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/edit_textbook.js","define(['js/views/baseview', 'jquery', 'js/views/edit_textbook', 'js/views/show_textbook', 'common/js/components/utils/view_utils'],\n        function(BaseView, $, EditTextbookView, ShowTextbookView, ViewUtils) {\n            var ListTextbooks = BaseView.extend({\n                initialize: function() {\n                    this.emptyTemplate = this.loadTemplate('no-textbooks');\n                    this.listenTo(this.collection, 'all', this.render);\n                    this.listenTo(this.collection, 'destroy', this.handleDestroy);\n                },\n                tagName: 'div',\n                className: 'textbooks-list',\n                render: function() {\n                    var textbooks = this.collection;\n                    if (textbooks.length === 0) {\n                        this.$el.html(this.emptyTemplate());\n                    } else {\n                        this.$el.empty();\n                        var that = this;\n                        textbooks.each(function(textbook) {\n                            var view;\n                            if (textbook.get('editing')) {\n                                view = new EditTextbookView({model: textbook});\n                            } else {\n                                view = new ShowTextbookView({model: textbook});\n                            }\n                            that.$el.append(view.render().el);\n                        });\n                    }\n                    return this;\n                },\n                events: {\n                    'click .new-button': 'addOne'\n                },\n                addOne: function(e) {\n                    var $sectionEl, $inputEl;\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.collection.add([{editing: true}]); // (render() call triggered here)\n            // find the outer 'section' tag for the newly added textbook\n                    $sectionEl = this.$el.find('section:last');\n            // scroll to put this at top of viewport\n                    ViewUtils.setScrollOffset($sectionEl, 0);\n            // find the first input element in this section\n                    $inputEl = $sectionEl.find('input:first');\n            // activate the text box (so user can go ahead and start typing straight away)\n                    $inputEl.focus().select();\n                },\n                handleDestroy: function(model, collection, options) {\n                    collection.remove(model);\n                }\n            });\n            return ListTextbooks;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/list_textbooks.js","define(['js/views/baseview', 'underscore', 'gettext', 'common/js/components/views/feedback_notification',\n    'common/js/components/views/feedback_prompt'],\n        function(BaseView, _, gettext, NotificationView, PromptView) {\n            var ShowTextbook = BaseView.extend({\n                initialize: function() {\n                    this.template = _.template($('#show-textbook-tpl').text());\n                    this.listenTo(this.model, 'change', this.render);\n                },\n                tagName: 'section',\n                className: 'textbook',\n                events: {\n                    'click .edit': 'editTextbook',\n                    'click .delete': 'confirmDelete',\n                    'click .show-chapters': 'showChapters',\n                    'click .hide-chapters': 'hideChapters'\n                },\n                render: function() {\n                    var attrs = $.extend({}, this.model.attributes);\n                    attrs.bookindex = this.model.collection.indexOf(this.model);\n                    attrs.course = window.course.attributes;\n                    this.$el.html(this.template(attrs));\n                    return this;\n                },\n                editTextbook: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('editing', true);\n                },\n                confirmDelete: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    var textbook = this.model;\n                    new PromptView.Warning({\n                        title: _.template(gettext('Delete “<%= name %>”?'))(\n                    {name: textbook.get('name')}\n                ),\n                        message: gettext(\"Deleting a textbook cannot be undone and once deleted any reference to it in your courseware's navigation will also be removed.\"),\n                        actions: {\n                            primary: {\n                                text: gettext('Delete'),\n                                click: function(view) {\n                                    view.hide();\n                                    var delmsg = new NotificationView.Mini({\n                                        title: gettext('Deleting')\n                                    }).show();\n                                    textbook.destroy({\n                                        complete: function() {\n                                            delmsg.hide();\n                                        }\n                                    });\n                                }\n                            },\n                            secondary: {\n                                text: gettext('Cancel'),\n                                click: function(view) {\n                                    view.hide();\n                                }\n                            }\n                        }\n                    }).show();\n                },\n                showChapters: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('showChapters', true);\n                },\n                hideChapters: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('showChapters', false);\n                }\n            });\n            return ShowTextbook;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/show_textbook.js","module.exports = \"<div class=\\\"input-wrap field text required field-add-chapter-name chapter<%- order %>-name\\n    <% if (error && error.attributes && error.attributes.name) { print('error'); } %>\\\">\\n  <label for=\\\"chapter<%- order %>-name\\\"><%- gettext(\\\"Chapter Name\\\") %></label>\\n  <input id=\\\"chapter<%- order %>-name\\\" name=\\\"chapter<%- order %>-name\\\" class=\\\"chapter-name short\\\" placeholder=\\\"<%- StringUtils.interpolate(gettext(\\\"Chapter {order}\\\"), {order: order}) %>\\\" value=\\\"<%- name %>\\\" type=\\\"text\\\">\\n  <span class=\\\"tip tip-stacked\\\"><%- gettext(\\\"provide the title/name of the chapter that will be used in navigating\\\") %></span>\\n</div>\\n<div class=\\\"input-wrap field text required field-add-chapter-asset chapter<%- order %>-asset\\n    <% if (error && error.attributes && error.attributes.asset_path) { print('error'); } %>\\\">\\n  <label for=\\\"chapter<%- order %>-asset-path\\\"><%- gettext(\\\"Chapter Asset\\\") %></label>\\n  <input id=\\\"chapter<%- order %>-asset-path\\\" name=\\\"chapter<%- order %>-asset-path\\\" class=\\\"chapter-asset-path\\\" placeholder=\\\"<%- StringUtils.interpolate(gettext(\\\"path/to/introductionToCookieBaking-CH{order}.pdf\\\"), {order: order}) %>\\\" value=\\\"<%- asset_path %>\\\" type=\\\"text\\\" dir=\\\"ltr\\\">\\n  <span class=\\\"tip tip-stacked\\\"><%- gettext(\\\"upload a PDF file or provide the path to a Studio asset file\\\") %></span>\\n<button class=\\\"action action-upload\\\"><%- gettext(\\\"Upload PDF\\\") %></button>\\n</div>\\n<a href=\\\"\\\" class=\\\"action action-close\\\"><span class=\\\"icon fa fa-times-circle\\\" aria-hidden=\\\"true\\\"></span> <span class=\\\"sr\\\"><%- gettext(\\\"delete chapter\\\") %></span></a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cms/templates/js/edit-chapter.underscore\n// module id = ./cms/templates/js/edit-chapter.underscore\n// module chunks = 10","(function(q,f){if(\"function\"===typeof define&&define.amd)define([\"underscore\",\"backbone\"],function(g,i){return f(q,i,g)});else if(\"undefined\"!==typeof exports){var g=require(\"underscore\"),i=require(\"backbone\");f(q,i,g);\"undefined\"!==typeof module&&module.exports&&(module.exports=i);exports=i}else f(q,q.Backbone,q._)})(this,function(q,f,g){var i,p,t,w,n,v,D,E,k,z,F,s={};i=f.Model;p=f.Collection;t=i.prototype;n=p.prototype;w=f.Events;f.Associations={VERSION:\"0.6.2\"};f.Associations.scopes=[];var G=function(){return k},\r\nA=function(a){if(!g.isString(a)||1>g.size(a))a=\".\";k=a;D=RegExp(\"[\\\\\"+k+\"\\\\[\\\\]]+\",\"g\");E=RegExp(\"[^\\\\\"+k+\"\\\\[\\\\]]+\",\"g\")};try{Object.defineProperty(f.Associations,\"SEPARATOR\",{enumerable:!0,get:G,set:A})}catch(J){}f.Associations.Many=f.Many=\"Many\";f.Associations.One=f.One=\"One\";f.Associations.Self=f.Self=\"Self\";f.Associations.SEPARATOR=\".\";f.Associations.getSeparator=G;f.Associations.setSeparator=A;f.Associations.EVENTS_BUBBLE=!0;f.Associations.EVENTS_WILDCARD=!0;f.Associations.EVENTS_NC=!1;A();\r\nv=f.AssociatedModel=f.Associations.AssociatedModel=i.extend({relations:void 0,_proxyCalls:void 0,constructor:function(a,c){c&&c.__parents__&&(this.parents=[c.__parents__]);i.apply(this,arguments)},on:function(a,c,d){var b=w.on.apply(this,arguments);if(f.Associations.EVENTS_NC)return b;var l=/\\s+/;g.isString(a)&&a&&!l.test(a)&&c&&(l=B(a))&&(s[l]=\"undefined\"===typeof s[l]?1:s[l]+1);return b},off:function(a,c,d){if(f.Associations.EVENTS_NC)return w.off.apply(this,arguments);var b=/\\s+/,l=this._events,\r\ne={},h=l?g.keys(l):[],m=!a&&!c&&!d,i=g.isString(a)&&!b.test(a);if(m||i)for(var b=0,j=h.length;b<j;b++)e[h[b]]=l[h[b]]?l[h[b]].length:0;var p=w.off.apply(this,arguments);if(m||i){b=0;for(j=h.length;b<j;b++)(m=B(h[b]))&&(s[m]=l[h[b]]?s[m]-(e[h[b]]-l[h[b]].length):s[m]-e[h[b]])}return p},get:function(a){var c=this.__attributes__,d=t.get.call(this,a),c=c?x(d)?d:c[a]:d;return x(c)?c:this._getAttr.apply(this,arguments)},set:function(a,c,d){var b;g.isObject(a)||null==a?(b=a,d=c):(b={},b[a]=c);a=this._set(b,\r\nd);this._processPendingEvents();return a},_set:function(a,c){var d,b,l,e,h=this;if(!a)return this;this.__attributes__=a;for(d in a)if(b||(b={}),d.match(D)){var f=H(d);e=g.initial(f);f=f[f.length-1];e=this.get(e);e instanceof i&&(e=b[e.cid]||(b[e.cid]={model:e,data:{}}),e.data[f]=a[d])}else e=b[this.cid]||(b[this.cid]={model:this,data:{}}),e.data[d]=a[d];if(b)for(l in b)e=b[l],this._setAttr.call(e.model,e.data,c)||(h=!1);else h=this._setAttr.call(this,a,c);delete this.__attributes__;return h},_setAttr:function(a,\r\nc){var d;c||(c={});if(c.unset)for(d in a)a[d]=void 0;this.parents=this.parents||[];this.relations&&g.each(this.relations,function(b){var d=b.key,e=b.scope||q,h=this._transformRelatedModel(b,a),m=this._transformCollectionType(b,h,a),u=g.isString(b.map)?C(b.map,e):b.map,j=this.attributes[d],k=j&&j.idAttribute,o,r,n=!1;o=b.options?g.extend({},b.options,c):c;if(a[d]){e=g.result(a,d);e=u?u.call(this,e,m?m:h):e;if(x(e))if(b.type===f.Many)j?(j._deferEvents=!0,j[o.reset?\"reset\":\"set\"](e instanceof p?e.models:\r\ne,o),h=j):(n=!0,e instanceof p?h=e:(h=this._createCollection(m||p,b.collectionOptions||(h?{model:h}:{})),h[o.reset?\"reset\":\"set\"](e,o)));else if(b.type===f.One)b=e instanceof i?e.attributes.hasOwnProperty(k):e.hasOwnProperty(k),m=e instanceof i?e.attributes[k]:e[k],j&&b&&j.attributes[k]===m?(j._deferEvents=!0,j._set(e instanceof i?e.attributes:e,o),h=j):(n=!0,e instanceof i?h=e:(o.__parents__=this,h=new h(e,o),delete o.__parents__));else throw Error(\"type attribute must be specified and have the values Backbone.One or Backbone.Many\");\r\nelse h=e;r=a[d]=h;if(n||r&&!r._proxyCallback)r._proxyCallback||(r._proxyCallback=function(){return f.Associations.EVENTS_BUBBLE&&this._bubbleEvent.call(this,d,r,arguments)}),r.on(\"all\",r._proxyCallback,this)}a.hasOwnProperty(d)&&this._setupParents(a[d],this.attributes[d])},this);return t.set.call(this,a,c)},_bubbleEvent:function(a,c,d){var b=d[0].split(\":\"),g=b[0],e=\"nested-change\"==d[0],h=\"change\"===g,m=d[1],u=-1,j=c._proxyCalls,b=b[1],n=!b||-1==b.indexOf(k),o;if(!e&&(n&&(F=B(d[0])||a),f.Associations.EVENTS_NC||\r\ns[F])){if(f.Associations.EVENTS_WILDCARD&&/\\[\\*\\]/g.test(b))return this;if(c instanceof p&&(h||b))u=c.indexOf(z||m);this instanceof i&&(z=this);b=a+(-1!==u&&(h||b)?\"[\"+u+\"]\":\"\")+(b?k+b:\"\");f.Associations.EVENTS_WILDCARD&&(o=b.replace(/\\[\\d+\\]/g,\"[*]\"));e=[];e.push.apply(e,d);e[0]=g+\":\"+b;f.Associations.EVENTS_WILDCARD&&b!==o&&(e[0]=e[0]+\" \"+g+\":\"+o);j=c._proxyCalls=j||{};if(this._isEventAvailable.call(this,j,b))return this;j[b]=!0;h&&(this._previousAttributes[a]=c._previousAttributes,this.changed[a]=\r\nc);this.trigger.apply(this,e);f.Associations.EVENTS_NC&&(h&&this.get(b)!=d[2])&&(a=[\"nested-change\",b,d[1]],d[2]&&a.push(d[2]),this.trigger.apply(this,a));j&&b&&delete j[b];z=void 0;return this}},_isEventAvailable:function(a,c){return g.find(a,function(a,b){return-1!==c.indexOf(b,c.length-b.length)})},_setupParents:function(a,c){a&&(a.parents=a.parents||[],-1==g.indexOf(a.parents,this)&&a.parents.push(this));c&&(0<c.parents.length&&c!=a)&&(c.parents=g.difference(c.parents,[this]),c._proxyCallback&&\r\nc.off(\"all\",c._proxyCallback,this))},_createCollection:function(a,c){var c=g.defaults(c,{model:a.model}),d=new a([],g.isFunction(c)?c.call(this):c);d.parents=[this];return d},_processPendingEvents:function(){this._processedEvents||(this._processedEvents=!0,this._deferEvents=!1,g.each(this._pendingEvents,function(a){a.c.trigger.apply(a.c,a.a)}),this._pendingEvents=[],g.each(this.relations,function(a){(a=this.attributes[a.key])&&a._processPendingEvents&&a._processPendingEvents()},this),delete this._processedEvents)},\r\n_transformRelatedModel:function(a,c){var d=a.relatedModel,b=a.scope||q;d&&!(d.prototype instanceof i)&&(d=g.isFunction(d)?d.call(this,a,c):d);d&&g.isString(d)&&(d=d===f.Self?this.constructor:C(d,b));if(a.type===f.One){if(!d)throw Error(\"specify a relatedModel for Backbone.One type\");if(!(d.prototype instanceof f.Model))throw Error(\"specify an AssociatedModel or Backbone.Model for Backbone.One type\");}return d},_transformCollectionType:function(a,c,d){var b=a.collectionType,l=a.scope||q;if(b&&g.isFunction(b)&&\r\nb.prototype instanceof i)throw Error(\"type is of Backbone.Model. Specify derivatives of Backbone.Collection\");b&&!(b.prototype instanceof p)&&(b=g.isFunction(b)?b.call(this,a,d):b);b&&g.isString(b)&&(b=C(b,l));if(b&&!b.prototype instanceof p)throw Error(\"collectionType must inherit from Backbone.Collection\");if(a.type===f.Many&&!c&&!b)throw Error(\"specify either a relatedModel or collectionType\");return b},trigger:function(a){this._deferEvents?(this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,\r\na:arguments})):t.trigger.apply(this,arguments)},toJSON:function(a){var c={},d;c[this.idAttribute]=this.id;this.visited||(this.visited=!0,c=t.toJSON.apply(this,arguments),a&&a.serialize_keys&&(c=g.pick(c,a.serialize_keys)),this.relations&&g.each(this.relations,function(b){var f=b.key,e=b.remoteKey,h=this.attributes[f],i=!b.isTransient,b=b.serialize||[],k=g.clone(a);delete c[f];i&&(b.length&&(k?k.serialize_keys=b:k={serialize_keys:b}),d=h&&h.toJSON?h.toJSON(k):h,c[e||f]=g.isArray(d)?g.compact(d):d)},\r\nthis),delete this.visited);return c},clone:function(a){return new this.constructor(this.toJSON(a))},cleanup:function(a){a=a||{};g.each(this.relations,function(a){if(a=this.attributes[a.key])a._proxyCallback&&a.off(\"all\",a._proxyCallback,this),a.parents=g.difference(a.parents,[this])},this);!a.listen&&this.off()},destroy:function(a){var a=a?g.clone(a):{},a=g.defaults(a,{remove_references:!0,listen:!0}),c=this;if(a.remove_references&&a.wait){var d=a.success;a.success=function(b){d&&d(c,b,a);c.cleanup(a)}}var b=\r\nt.destroy.apply(this,[a]);a.remove_references&&!a.wait&&c.cleanup(a);return b},_getAttr:function(a){var c=this,d=this.__attributes__,a=H(a),b,f;if(!(1>g.size(a))){for(f=0;f<a.length;f++){b=a[f];if(!c)break;c=c instanceof p?isNaN(b)?void 0:c.at(b):d?x(c.attributes[b])?c.attributes[b]:d[b]:c.attributes[b]}return c}}});var H=function(a){return\"\"===a?[\"\"]:g.isString(a)?a.match(E):a||[]},B=function(a){if(!a)return a;a=a.split(\":\");return 1<a.length?(a=a[a.length-1],a=a.split(k),1<a.length?a[a.length-1].split(\"[\")[0]:\r\na[0].split(\"[\")[0]):\"\"},C=function(a,c){var d,b=[c];b.push.apply(b,f.Associations.scopes);for(var i,e=0,h=b.length;e<h;++e)if(i=b[e])if(d=g.reduce(a.split(k),function(a,b){return a[b]},i))break;return d},I=function(a,c,d){var b,f;g.find(a,function(a){if(b=g.find(a.relations,function(b){return a.get(b.key)===c},this))return f=a,!0},this);return b&&b.map?b.map.call(f,d,c):d},x=function(a){return!g.isUndefined(a)&&!g.isNull(a)},y={};g.each([\"set\",\"remove\",\"reset\"],function(a){y[a]=p.prototype[a];n[a]=\r\nfunction(c,d){this.model.prototype instanceof v&&this.parents&&(arguments[0]=I(this.parents,this,c));return y[a].apply(this,arguments)}});y.trigger=n.trigger;n.trigger=function(a){this._deferEvents?(this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,a:arguments})):y.trigger.apply(this,arguments)};n._processPendingEvents=v.prototype._processPendingEvents;n.on=v.prototype.on;n.off=v.prototype.off;return f});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/backbone-associations/backbone-associations-min.js\n// module id = ./node_modules/backbone-associations/backbone-associations-min.js\n// module chunks = 10","(function() { module.exports = window[\"jQuery\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 3 4 5 6 9 10 11 13 14 15 16 17 18 19 20 21 23 24 25 26 27 28 29 30 31 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 84","(function() { module.exports = window[\"_\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 1\n// module chunks = 3 4 5 6 9 10 11 14 15 16 18 19 20 21 23 24 25 26 27 28 29 30 31 34 35 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75","(function() { module.exports = window[\"Backbone\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Backbone\"\n// module id = 2\n// module chunks = 3 5 6 9 10 11 14 15 20 21 23 24 33 85","(function() { module.exports = window[\"gettext\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gettext\"\n// module id = 3\n// module chunks = 5 6 10 14 15 16 20 21 24"],"sourceRoot":""}