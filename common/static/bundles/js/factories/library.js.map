{"version":3,"sources":["webpack:///./cms/static/js/collections/component_template.js","webpack:///./cms/static/js/factories/library.js","webpack:///./cms/static/js/models/component_template.js","webpack:///./cms/static/js/views/components/add_xblock.js","webpack:///./cms/static/js/views/components/add_xblock_button.js","webpack:///./cms/static/js/views/components/add_xblock_menu.js","webpack:///./cms/static/js/views/container.js","webpack:///./cms/static/js/views/library_container.js","webpack:///./cms/static/js/views/modals/move_xblock_modal.js","webpack:///./cms/static/js/views/move_xblock_breadcrumb.js","webpack:///./cms/static/js/views/move_xblock_list.js","webpack:///./cms/static/js/views/paged_container.js","webpack:///./cms/static/js/views/pages/base_page.js","webpack:///./cms/static/js/views/pages/container.js","webpack:///./cms/static/js/views/pages/container_subviews.js","webpack:///./cms/static/js/views/pages/paged_container.js","webpack:///./cms/static/js/views/paging_header.js","webpack:///./cms/static/js/views/unit_outline.js","webpack:///./cms/static/js/views/unit_outline_child.js","webpack:///./cms/static/js/views/utils/move_xblock_utils.js","webpack:///./cms/static/js/views/xblock_access_editor.js","webpack:///./cms/static/js/views/xblock_outline.js","webpack:///./cms/static/js/views/xblock_string_field_editor.js","webpack:///./cms/templates/js/move-xblock-breadcrumb.underscore","webpack:///./cms/templates/js/move-xblock-list.underscore","webpack:///./cms/templates/js/move-xblock-modal.underscore","webpack:///./cms/templates/js/paging-header.underscore","webpack:///./common/static/common/js/components/views/feedback_alert.js","webpack:///./common/static/common/js/components/views/paging_footer.js","webpack:///./common/static/common/templates/components/paging-footer.underscore","webpack:///external \"jQuery\"?0cb8**","webpack:///external \"_\"?b3b9**","webpack:///external \"Backbone\"?709d*","webpack:///external \"gettext\"","webpack:///external \"URI\""],"names":["Backbone","ComponentTemplate","Collection","extend","model","LibraryFactory","componentTemplates","XBlockInfoJson","options","main_options","el","$","parse","templates","action","viewClass","canEdit","xmoduleLoader","view","render","Model","defaults","type","support_legend","response","isPrimaryBlankTemplate","template","boilerplate_name","category","display_name","sort","a","b","hinted","_","gettext","BaseView","ViewUtils","AddXBlockButton","AddXBlockMenu","AddXBlockComponent","events","initialize","prototype","call","loadTemplate","$el","html","that","collection","each","componentModel","menu","find","append","showComponentTemplates","event","preventDefault","stopPropagation","currentTarget","data","slideUp","slideDown","focus","closeNewComponent","createNewComponent","self","$element","saveData","oldOffset","getScrollOffset","runOperationShowingMessage","bind","createComponent","always","setScrollOffset","tagName","HtmlUtils","className","template_name","support_indicator_template","support_legend_template","setHtml","HTML","tabs","XBlockView","ModuleUtils","NotificationView","studioXBlockWrapperClass","ContainerView","requestToken","new_child_view","xblockReady","reorderableClass","reorderableContainer","newParent","oldParent","first","makeRequestSpecificSelector","sortable","handle","start","stop","saving","hideSaving","removeFromParent","isUndefined","Mini","title","show","hide","updateChildren","undefined","update","ui","parent","target","closest","sender","helper","opacity","placeholder","forcePlaceholderSize","axis","items","connectWith","tolerance","targetParent","successCallback","children","childLocators","xblockInfo","filter","map","child","ajax","url","getUpdateUrl","dataType","contentType","JSON","stringify","success","fetch","acknowledgeXBlockDeletion","locator","notifyRuntime","refresh","sortableInitializedClass","selector","PagedContainerView","LibraryContainerView","XBlockViewUtils","MoveXBlockUtils","StringUtils","Feedback","XBlockInfoModel","BaseModal","MoveXBlockListView","MoveXBlockBreadcrumbView","MoveXblockModalTemplate","MoveXblockModal","modalName","modalSize","showEditorModeButtons","addPrimaryActionButton","primaryActionButtonType","viewSpecificClasses","primaryActionButtonTitle","modalSRTitle","sourceXBlockInfo","sourceParentXBlockInfo","targetParentXBlockInfo","XBlockURLRoot","XBlockAncestorInfoURL","interpolate","urlRoot","usageId","get","outlineURL","getTitle","fetchCourseOutline","done","courseOutlineInfo","ancestorInfo","addClass","removeClass","renderViews","listenTo","focusModal","enableMoveOperation","displayName","getContentHtml","apply","updateMoveState","hideMovedNotification","moveXBlockListView","remove","moveXBlockBreadcrumbView","outFocus","resize","inFocus","modalWindowClass","when","fetchData","deferred","Deferred","resolve","fail","reject","promise","isValidMove","$moveButton","isValidCategory","basicBlockTypes","sourceParentType","targetParentType","sourceParentHasChildren","targetParentHasChildren","contains","id","moveXBlock","sourceXBlockElement","sourceDisplayName","sourceLocator","sourceParentLocator","targetParentLocator","MoveXBlockBreadcrumbViewTemplate","MoveXBlockBreadcrumb","View","trigger","handleBreadcrumbButtonPress","XBlockUtils","MoveXBlockListViewTemplate","XBlockListView","parentInfo","childrenInfo","visitedAncestors","categoryRelationMap","course","section","subsection","unit","categoriesText","component","group","renderXBlockInfo","sourceXBlockId","xblocks","noChildText","getNoChildText","categoryText","getCategoryText","parentDisplayname","XBlocksCategory","currentLocationIndex","getCurrentLocationIndex","breadcrumbInfo","renderChildren","newParentIndex","direction","splice","push","setDisplayedXBlocksCategories","childCategory","getXBlockType","keys","xblock","index","ancestors","ancestor","parentCategory","toLowerCase","breadcrumbs","PagingHeader","PagingFooter","page_size","page","currentPage","totalPages","totalCount","sortDirection","_size","size","showChildrenPreviews","setPage","nextPage","previousPage","getPage","hasPreviousPage","hasNextPage","getTotalPages","getPageNumber","getTotalRecords","getPageSize","page_number","renderPage","xblockUrl","decodeURIComponent","cache","getRenderParameters","force_render","headers","Accept","fragment","handleXBlockFragment","processPaging","requested_page","updatePreviewButton","renderAddXBlockComponents","$target","window","height","enable_paging","getPageCount","total_count","Math","ceil","additional_options","lastPage","total","displayed","previews","processPagingHeaderAndFooter","pagingHeader","undelegateEvents","pagingFooter","xblockView","block_added","is_duplicate","element","parents","all_xblocks","length","target_page","current_page","total_pages","sortDisplayName","togglePreviews","then","BasePage","hasContent","EditXBlockModal","MoveXBlockModal","XBlockInfo","XBlockStringFieldEditor","XBlockAccessEditor","ContainerSubviews","UnitOutlineView","XBlockContainerPage","collapsedClass","defaultViewClass","components_on_init","isLibraryPage","attributes","nameEditor","accessEditor","click","getXBlockView","messageView","MessageView","containerAccessView","ContainerAccess","xblockPublisher","Publisher","publishHistory","PublishHistory","viewLiveActions","ViewLiveButtonController","unitOutlineView","onXBlockMoved","getViewParameters","loadingElement","unitLocationTree","hiddenCss","onXBlockRefresh","delegateEvents","findXBlockElement","getURLRoot","editXBlock","xblockElement","modal","edit","readOnlyView","refreshXBlock","editVisibilitySettings","titleFormat","duplicateXBlock","duplicateComponent","showMoveXBlockModal","parentXBlockElement","findXBlockInfo","deleteXBlock","deleteComponent","createPlaceholderElement","class","parentElement","parentLocator","buttonPanel","listPanel","prev","scrollOffset","$placeholderEl","requestData","parent_locator","placeholderElement","appendTo","postJSON","onNewXBlock","insertAfter","onDelete","rootLocator","hasClass","refreshChildXBlock","TemporaryXBlockView","temporaryView","updateHtml","replaceAll","unbind","initRuntimeData","scrollToNewComponentButtons","scrollTo","duration","disabledCss","ContainerStateListenerView","on","onSync","shouldRefresh","hasChangedAttributes","hasPartitionGroupComponents","userPartitionInfo","currentlyVisibleToStudents","viewLiveAction","attr","visibilityState","visibilityClass","getXBlockVisibilityClass","hasChanges","editedOn","editedBy","published","publishedOn","publishedBy","released","releaseDate","releaseDateFrom","hasExplicitStaffLock","staffLockFrom","publish","e","save","patch","set","discardChanges","confirmThenRunOperation","toggleStaffLock","enableStaffLock","hasInheritedStaffLock","saveAndPublishStaffLock","revertCheckBox","checkStaffLock","metadata","visible_to_staff_only","check","published_on","published_by","PagedXBlockContainerPage","toggleChildrenPreviews","show_previews","text","$button","pagingHeaderTemplate","messageHtml","isNextDisabled","toggleClass","message","assetType","filterNameLabel","interpolateHtml","currentItemRange","currentItemRangeLabel","totalItemsCount","totalItemsCountLabel","sortName","sortNameLabel","count","end","htmlMessage","min","totalItemsLabel","totalItems","filterName","filterDisplayName","XBlockOutlineView","UnitOutlineChildView","templateName","renderAncestors","i","listElement","ancestorView","previousAncestor","getListElement","createChildView","parentView","currentUnitId","getChildViewClass","getTemplateContext","childInfo","AlertView","redirectLink","undoMoveXBlock","showMovedNotification","link","location","href","targetIndex","source_index","movedAlertView","Confirmation","actions","primary","secondary","smoothScroll","offset","easing","speed","active_alert","initialState","expandedLocators","renderedChildren","renderTemplate","addButtonActions","addNameEditor","add","shouldRenderChildren","shouldExpandChildren","setElement","xblockType","xblockTypeDisplayName","parentType","addChildName","defaultNewChildName","isCollapsed","component_type","typeListClass","getXBlockListTypeClass","childType","addChildLabel","includesChildren","staffOnlyMessage","childOutlineView","addChildView","childView","xblockField","XBlockOutlineFieldEditor","toggleExpandCollapse","wasExpanded","ensureChildrenRendered","handleDeleteEvent","handleDuplicateEvent","handleAddEvent","onXBlockChange","oldElement","viewState","replaceWith","setViewState","locatorToShow","locator_to_show","scroll_offset","editDisplayName","edit_display_name","locatorElement","console","error","onChildAdded","onUnitAdded","redirect","onChildDeleted","getParentElement","xblockMap","parentXblockType","onChildDuplicated","addXBlock","fieldName","fieldDisplayName","onChangeField","value","escape","getLabel","getInput","onInputFocusLost","currentValue","val","hideInput","onClickSubmit","updateField","onClickCancel","cancelInput","onClickEditor","showInput","input","select","newValue","trim","oldValue","updateXBlockField","handleKeyUp","keyCode","str","SystemFeedbackView","Alert","slide_speed","arguments","setTimeout","slideSpeed","capitalCamel","intents","compose","capitalize","camelize","intent","subclass","pagingFooterTemplate","hideWhenOnePage","paginationLabel","onFirstPage","onLastPage","changePage","pageInput","pageNumber","parseInt","validInput"],"mappings":"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","file":"js/factories/library.js","sourcesContent":["define(['backbone', 'js/models/component_template'], function(Backbone, ComponentTemplate) {\n    return Backbone.Collection.extend({\n        model: ComponentTemplate\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/collections/component_template.js","import * as $ from 'jquery';\nimport * as _ from 'underscore';\nimport * as XBlockInfo from 'js/models/xblock_info';\nimport * as PagedContainerPage from 'js/views/pages/paged_container';\nimport * as LibraryContainerView from 'js/views/library_container';\nimport * as ComponentTemplates from 'js/collections/component_template';\nimport * as xmoduleLoader from 'xmodule';\nimport './base';\nimport 'cms/js/main';\nimport 'xblock/cms.runtime.v1';\n\n'use strict';\nexport default function LibraryFactory(componentTemplates, XBlockInfoJson, options) {\n    var main_options = {\n        el: $('#content'),\n        model: new XBlockInfo(XBlockInfoJson, {parse: true}),\n        templates: new ComponentTemplates(componentTemplates, {parse: true}),\n        action: 'view',\n        viewClass: LibraryContainerView,\n        canEdit: true\n    };\n\n    xmoduleLoader.done(function() {\n        var view = new PagedContainerPage(_.extend(main_options, options));\n        view.render();\n    });\n};\n\nexport {LibraryFactory}\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/factories/library.js","/**\n * Simple model for adding a component of a given type (for example, \"video\" or \"html\").\n */\ndefine(['backbone'], function(Backbone) {\n    return Backbone.Model.extend({\n        defaults: {\n            type: '',\n            // Each entry in the template array is an Object with the following keys:\n            // display_name\n            // category (may or may not match \"type\")\n            // boilerplate_name (may be null)\n            // is_common (only used for problems)\n            templates: [],\n            support_legend: {}\n        },\n        parse: function(response) {\n            // Returns true only for templates that both have no boilerplate and are of\n            // the overall type of the menu. This allows other component types to be added\n            // and they will get sorted alphabetically rather than just at the top.\n            // e.g. The ORA openassessment xblock is listed as an advanced problem.\n            var isPrimaryBlankTemplate = function(template) {\n                return !template.boilerplate_name && template.category === response.type;\n            };\n\n            this.type = response.type;\n            this.templates = response.templates;\n            this.display_name = response.display_name;\n            this.support_legend = response.support_legend;\n\n            // Sort the templates.\n            this.templates.sort(function(a, b) {\n                // The blank problem for the current type goes first\n                if (isPrimaryBlankTemplate(a)) {\n                    return -1;\n                } else if (isPrimaryBlankTemplate(b)) {\n                    return 1;\n                // Hinted problems should be shown at the end\n                } else if (a.hinted && !b.hinted) {\n                    return 1;\n                } else if (!a.hinted && b.hinted) {\n                    return -1;\n                } else if (a.display_name > b.display_name) {\n                    return 1;\n                } else if (a.display_name < b.display_name) {\n                    return -1;\n                }\n                return 0;\n            });\n        }\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/component_template.js","/**\n * This is a simple component that renders add buttons for all available XBlock template types.\n */\ndefine(['jquery', 'underscore', 'gettext', 'js/views/baseview', 'common/js/components/utils/view_utils',\n    'js/views/components/add_xblock_button', 'js/views/components/add_xblock_menu'],\n    function($, _, gettext, BaseView, ViewUtils, AddXBlockButton, AddXBlockMenu) {\n        var AddXBlockComponent = BaseView.extend({\n            events: {\n                'click .new-component .new-component-type .multiple-templates': 'showComponentTemplates',\n                'click .new-component .new-component-type .single-template': 'createNewComponent',\n                'click .new-component .cancel-button': 'closeNewComponent',\n                'click .new-component-templates .new-component-template .button-component': 'createNewComponent',\n                'click .new-component-templates .cancel-button': 'closeNewComponent'\n            },\n\n            initialize: function(options) {\n                BaseView.prototype.initialize.call(this, options);\n                this.template = this.loadTemplate('add-xblock-component');\n            },\n\n            render: function() {\n                if (!this.$el.html()) {\n                    var that = this;\n                    this.$el.html(this.template({}));\n                    this.collection.each(\n                        function(componentModel) {\n                            var view, menu;\n\n                            view = new AddXBlockButton({model: componentModel});\n                            that.$el.find('.new-component-type').append(view.render().el);\n\n                            menu = new AddXBlockMenu({model: componentModel});\n                            that.$el.append(menu.render().el);\n                        }\n                    );\n                }\n            },\n\n            showComponentTemplates: function(event) {\n                var type;\n                event.preventDefault();\n                event.stopPropagation();\n                type = $(event.currentTarget).data('type');\n                this.$('.new-component').slideUp(250);\n                this.$('.new-component-' + type).slideDown(250);\n                this.$('.new-component-' + type + ' div').focus();\n            },\n\n            closeNewComponent: function(event) {\n                event.preventDefault();\n                event.stopPropagation();\n                type = $(event.currentTarget).data('type');\n                this.$('.new-component').slideDown(250);\n                this.$('.new-component-templates').slideUp(250);\n                this.$('ul.new-component-type li button[data-type=' + type + ']').focus();\n            },\n\n            createNewComponent: function(event) {\n                var self = this,\n                    $element = $(event.currentTarget),\n                    saveData = $element.data(),\n                    oldOffset = ViewUtils.getScrollOffset(this.$el);\n                event.preventDefault();\n                this.closeNewComponent(event);\n                ViewUtils.runOperationShowingMessage(\n                    gettext('Adding'),\n                    _.bind(this.options.createComponent, this, saveData, $element)\n                ).always(function() {\n                    // Restore the scroll position of the buttons so that the new\n                    // component appears above them.\n                    ViewUtils.setScrollOffset(self.$el, oldOffset);\n                });\n            }\n        });\n\n        return AddXBlockComponent;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/components/add_xblock.js","define(['js/views/baseview'],\n    function(BaseView) {\n        return BaseView.extend({\n            tagName: 'li',\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                this.template = this.loadTemplate('add-xblock-component-button');\n                this.$el.html(\n                    this.template({\n                        type: this.model.type,\n                        templates: this.model.templates,\n                        display_name: this.model.display_name\n                    })\n                );\n            }\n        });\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/components/add_xblock_button.js","define(['jquery', 'js/views/baseview', 'edx-ui-toolkit/js/utils/html-utils'],\n    function($, BaseView, HtmlUtils) {\n        return BaseView.extend({\n            className: function() {\n                return 'new-component-templates new-component-' + this.model.type;\n            },\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                var template_name = this.model.type === 'problem' ? 'add-xblock-component-menu-problem' :\n                    'add-xblock-component-menu';\n                var support_indicator_template = this.loadTemplate('add-xblock-component-support-level');\n                var support_legend_template = this.loadTemplate('add-xblock-component-support-legend');\n                this.template = this.loadTemplate(template_name);\n                HtmlUtils.setHtml(\n                    this.$el,\n                    HtmlUtils.HTML(this.template({\n                        type: this.model.type, templates: this.model.templates,\n                        support_legend: this.model.support_legend,\n                        support_indicator_template: support_indicator_template,\n                        support_legend_template: support_legend_template,\n                        HtmlUtils: HtmlUtils\n                    }))\n                );\n                // Make the tabs on problems into \"real tabs\"\n                this.$('.tab-group').tabs();\n            }\n        });\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/components/add_xblock_menu.js","define([\n    'jquery', 'underscore', 'js/views/xblock', 'js/utils/module',\n    'gettext', 'common/js/components/views/feedback_notification',\n    'jquery.ui'\n], // The container view uses sortable, which is provided by jquery.ui.\n    function($, _, XBlockView, ModuleUtils, gettext, NotificationView) {\n        'use strict';\n\n        var studioXBlockWrapperClass = '.studio-xblock-wrapper';\n\n        var ContainerView = XBlockView.extend({\n            // Store the request token of the first xblock on the page (which we know was rendered by Studio when\n            // the page was generated). Use that request token to filter out user-defined HTML in any\n            // child xblocks within the page.\n            requestToken: '',\n\n            new_child_view: 'reorderable_container_child_preview',\n\n            xblockReady: function() {\n                var reorderableClass, reorderableContainer,\n                    newParent, oldParent,\n                    self = this;\n                XBlockView.prototype.xblockReady.call(this);\n\n                this.requestToken = this.$('div.xblock').first().data('request-token');\n                reorderableClass = this.makeRequestSpecificSelector('.reorderable-container');\n\n                reorderableContainer = this.$(reorderableClass);\n                reorderableContainer.sortable({\n                    handle: '.drag-handle',\n\n                    start: function() {\n                        // Necessary because of an open bug in JQuery sortable.\n                        // http://bugs.jqueryui.com/ticket/4990\n                        reorderableContainer.sortable('refreshPositions');\n                    },\n\n                    stop: function() {\n                        var saving, hideSaving, removeFromParent;\n\n                        if (_.isUndefined(oldParent)) {\n                            // If no actual change occurred,\n                            // oldParent will never have been set.\n                            return;\n                        }\n\n                        saving = new NotificationView.Mini({\n                            title: gettext('Saving')\n                        });\n                        saving.show();\n\n                        hideSaving = function() {\n                            saving.hide();\n                        };\n\n                        // If moving from one container to another,\n                        // add to new container before deleting from old to\n                        // avoid creating an orphan if the addition fails.\n                        if (newParent) {\n                            removeFromParent = oldParent;\n                            self.updateChildren(newParent, function() {\n                                self.updateChildren(removeFromParent, hideSaving);\n                            });\n                        } else {\n                            // No new parent, only reordering within same container.\n                            self.updateChildren(oldParent, hideSaving);\n                        }\n\n                        oldParent = undefined;\n                        newParent = undefined;\n                    },\n                    update: function(event, ui) {\n                        // When dragging from one ol to another, this method\n                        // will be called twice (once for each list). ui.sender will\n                        // be null if the change is related to the list the element\n                        // was originally in (the case of a move within the same container\n                        // or the deletion from a container when moving to a new container).\n                        var parent = $(event.target).closest(studioXBlockWrapperClass);\n                        if (ui.sender) {\n                            // Move to a new container (the addition part).\n                            newParent = parent;\n                        } else {\n                            // Reorder inside a container, or deletion when moving to new container.\n                            oldParent = parent;\n                        }\n                    },\n                    helper: 'original',\n                    opacity: '0.5',\n                    placeholder: 'component-placeholder',\n                    forcePlaceholderSize: true,\n                    axis: 'y',\n                    items: '> .is-draggable',\n                    connectWith: reorderableClass,\n                    tolerance: 'pointer'\n\n                });\n            },\n\n            updateChildren: function(targetParent, successCallback) {\n                var children, childLocators,\n                    xblockInfo = this.model;\n\n                // Find descendants with class \"studio-xblock-wrapper\" whose parent === targetParent.\n                // This is necessary to filter our grandchildren, great-grandchildren, etc.\n                children = targetParent.find(studioXBlockWrapperClass).filter(function() {\n                    var parent = $(this).parent().closest(studioXBlockWrapperClass);\n                    return parent.data('locator') === targetParent.data('locator');\n                });\n\n                childLocators = _.map(\n                    children,\n                    function(child) {\n                        return $(child).data('locator');\n                    }\n                );\n                $.ajax({\n                    url: ModuleUtils.getUpdateUrl(targetParent.data('locator')),\n                    type: 'PUT',\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    data: JSON.stringify({\n                        children: childLocators\n                    }),\n                    success: function() {\n                        // change data-parent on the element moved.\n                        if (successCallback) {\n                            successCallback();\n                        }\n                        // Update publish and last modified information from the server.\n                        xblockInfo.fetch();\n                    }\n                });\n            },\n\n            acknowledgeXBlockDeletion: function(locator) {\n                this.notifyRuntime('deleted-child', locator);\n            },\n\n            refresh: function() {\n                var sortableInitializedClass = this.makeRequestSpecificSelector('.reorderable-container.ui-sortable');\n                this.$(sortableInitializedClass).sortable('refresh');\n            },\n\n            makeRequestSpecificSelector: function(selector) {\n                return 'div.xblock[data-request-token=\"' + this.requestToken + '\"] > ' + selector;\n            }\n        });\n\n        return ContainerView;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/container.js","define(['js/views/paged_container'],\n    function(PagedContainerView) {\n        // To be extended with Library-specific features later.\n        var LibraryContainerView = PagedContainerView;\n        return LibraryContainerView;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/library_container.js","/**\n * The MoveXblockModal to move XBlocks in course.\n */\ndefine([\n    'jquery',\n    'backbone',\n    'underscore',\n    'gettext',\n    'js/views/baseview',\n    'js/views/utils/xblock_utils',\n    'js/views/utils/move_xblock_utils',\n    'edx-ui-toolkit/js/utils/html-utils',\n    'edx-ui-toolkit/js/utils/string-utils',\n    'common/js/components/views/feedback',\n    'js/models/xblock_info',\n    'js/views/modals/base_modal',\n    'js/views/move_xblock_list',\n    'js/views/move_xblock_breadcrumb',\n    'templates/move-xblock-modal.underscore'\n],\nfunction($, Backbone, _, gettext, BaseView, XBlockViewUtils, MoveXBlockUtils, HtmlUtils, StringUtils, Feedback,\n         XBlockInfoModel, BaseModal, MoveXBlockListView, MoveXBlockBreadcrumbView, MoveXblockModalTemplate) {\n    'use strict';\n\n    var MoveXblockModal = BaseModal.extend({\n        events: _.extend({}, BaseModal.prototype.events, {\n            'click .action-move:not(.is-disabled)': 'moveXBlock'\n        }),\n\n        options: $.extend({}, BaseModal.prototype.options, {\n            modalName: 'move-xblock',\n            modalSize: 'lg',\n            showEditorModeButtons: false,\n            addPrimaryActionButton: true,\n            primaryActionButtonType: 'move',\n            viewSpecificClasses: 'move-modal',\n            primaryActionButtonTitle: gettext('Move'),\n            modalSRTitle: gettext('Choose a location to move your component to')\n        }),\n\n        initialize: function() {\n            var self = this;\n            BaseModal.prototype.initialize.call(this);\n            this.sourceXBlockInfo = this.options.sourceXBlockInfo;\n            this.sourceParentXBlockInfo = this.options.sourceParentXBlockInfo;\n            this.targetParentXBlockInfo = null;\n            this.XBlockURLRoot = this.options.XBlockURLRoot;\n            this.XBlockAncestorInfoURL = StringUtils.interpolate(\n                '{urlRoot}/{usageId}?fields=ancestorInfo',\n                {urlRoot: this.XBlockURLRoot, usageId: this.sourceXBlockInfo.get('id')}\n            );\n            this.outlineURL = this.options.outlineURL;\n            this.options.title = this.getTitle();\n            this.fetchCourseOutline().done(function(courseOutlineInfo, ancestorInfo) {\n                $('.ui-loading').addClass('is-hidden');\n                $('.breadcrumb-container').removeClass('is-hidden');\n                self.renderViews(courseOutlineInfo, ancestorInfo);\n            });\n            this.listenTo(Backbone, 'move:breadcrumbRendered', this.focusModal);\n            this.listenTo(Backbone, 'move:enableMoveOperation', this.enableMoveOperation);\n            this.listenTo(Backbone, 'move:hideMoveModal', this.hide);\n        },\n\n        getTitle: function() {\n            return StringUtils.interpolate(\n                gettext('Move: {displayName}'),\n                {displayName: this.sourceXBlockInfo.get('display_name')}\n            );\n        },\n\n        getContentHtml: function() {\n            return _.template(MoveXblockModalTemplate)({});\n        },\n\n        show: function() {\n            BaseModal.prototype.show.apply(this, [false]);\n            this.updateMoveState(false);\n            MoveXBlockUtils.hideMovedNotification();\n        },\n\n        hide: function() {\n            if (this.moveXBlockListView) {\n                this.moveXBlockListView.remove();\n            }\n            if (this.moveXBlockBreadcrumbView) {\n                this.moveXBlockBreadcrumbView.remove();\n            }\n            BaseModal.prototype.hide.apply(this);\n            Feedback.prototype.outFocus.apply(this);\n        },\n\n        resize: function() {\n            // Do Nothing. Overridden to use our own styling instead of one provided by base modal\n        },\n\n        focusModal: function() {\n            Feedback.prototype.inFocus.apply(this, [this.options.modalWindowClass]);\n            $(this.options.modalWindowClass).focus();\n        },\n\n        fetchCourseOutline: function() {\n            return $.when(\n                this.fetchData(this.outlineURL),\n                this.fetchData(this.XBlockAncestorInfoURL)\n            );\n        },\n\n        fetchData: function(url) {\n            var deferred = $.Deferred();\n            $.ajax({\n                url: url,\n                contentType: 'application/json',\n                dataType: 'json',\n                type: 'GET'\n            }).done(function(data) {\n                deferred.resolve(data);\n            }).fail(function() {\n                deferred.reject();\n            });\n            return deferred.promise();\n        },\n\n        renderViews: function(courseOutlineInfo, ancestorInfo) {\n            this.moveXBlockBreadcrumbView = new MoveXBlockBreadcrumbView({});\n            this.moveXBlockListView = new MoveXBlockListView(\n                {\n                    model: new XBlockInfoModel(courseOutlineInfo, {parse: true}),\n                    sourceXBlockInfo: this.sourceXBlockInfo,\n                    ancestorInfo: ancestorInfo\n                }\n            );\n        },\n\n        updateMoveState: function(isValidMove) {\n            var $moveButton = this.$el.find('.action-move');\n            if (isValidMove) {\n                $moveButton.removeClass('is-disabled');\n            } else {\n                $moveButton.addClass('is-disabled');\n            }\n        },\n\n        isValidCategory: function(targetParentXBlockInfo) {\n            var basicBlockTypes = ['course', 'chapter', 'sequential', 'vertical'],\n                sourceParentType = this.sourceParentXBlockInfo.get('category'),\n                targetParentType = targetParentXBlockInfo.get('category'),\n                sourceParentHasChildren = this.sourceParentXBlockInfo.get('has_children'),\n                targetParentHasChildren = targetParentXBlockInfo.get('has_children');\n\n            // Treat source parent component as vertical to support move child components under content experiment\n            // and other similar xblocks.\n            if (sourceParentHasChildren && !_.contains(basicBlockTypes, sourceParentType)) {\n                sourceParentType = 'vertical';  // eslint-disable-line no-param-reassign\n            }\n\n            // Treat target parent component as a vertical to support move to parentable target parent components.\n            // Also, moving a component directly to content experiment is not allowed, we need to visit to group level.\n            if (targetParentHasChildren && !_.contains(basicBlockTypes, targetParentType) &&\n                targetParentType !== 'split_test') {\n                targetParentType = 'vertical';  // eslint-disable-line no-param-reassign\n            }\n            return targetParentType === sourceParentType;\n        },\n\n        enableMoveOperation: function(targetParentXBlockInfo) {\n            var isValidMove = false;\n\n            // update target parent on navigation\n            this.targetParentXBlockInfo = targetParentXBlockInfo;\n            if (this.isValidCategory(targetParentXBlockInfo) &&\n                this.sourceParentXBlockInfo.id !== targetParentXBlockInfo.id && // same parent case\n                this.sourceXBlockInfo.id !== targetParentXBlockInfo.id) { // same source item case\n                isValidMove = true;\n            }\n            this.updateMoveState(isValidMove);\n        },\n\n        moveXBlock: function() {\n            MoveXBlockUtils.moveXBlock(\n                {\n                    sourceXBlockElement: $(\"li.studio-xblock-wrapper[data-locator='\" + this.sourceXBlockInfo.id + \"']\"),\n                    sourceDisplayName: this.sourceXBlockInfo.get('display_name'),\n                    sourceLocator: this.sourceXBlockInfo.id,\n                    sourceParentLocator: this.sourceParentXBlockInfo.id,\n                    targetParentLocator: this.targetParentXBlockInfo.id\n                }\n            );\n        }\n    });\n\n    return MoveXblockModal;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/modals/move_xblock_modal.js","/**\n * MoveXBlockBreadcrumb show breadcrumbs to move back to parent.\n */\ndefine([\n    'jquery', 'backbone', 'underscore', 'gettext',\n    'edx-ui-toolkit/js/utils/html-utils',\n    'edx-ui-toolkit/js/utils/string-utils',\n    'templates/move-xblock-breadcrumb.underscore'\n],\nfunction($, Backbone, _, gettext, HtmlUtils, StringUtils, MoveXBlockBreadcrumbViewTemplate) {\n    'use strict';\n\n    var MoveXBlockBreadcrumb = Backbone.View.extend({\n        el: '.breadcrumb-container',\n\n        events: {\n            'click .parent-nav-button': 'handleBreadcrumbButtonPress'\n        },\n\n        initialize: function() {\n            this.template = HtmlUtils.template(MoveXBlockBreadcrumbViewTemplate);\n            this.listenTo(Backbone, 'move:childrenRendered', this.render);\n        },\n\n        render: function(options) {\n            HtmlUtils.setHtml(\n                this.$el,\n                this.template(options)\n            );\n            Backbone.trigger('move:breadcrumbRendered');\n            return this;\n        },\n\n        /**\n         * Event handler for breadcrumb button press.\n         *\n         * @param {Object} event\n         */\n        handleBreadcrumbButtonPress: function(event) {\n            Backbone.trigger(\n                'move:breadcrumbButtonPressed',\n                $(event.target).data('parentIndex')\n            );\n        }\n    });\n\n    return MoveXBlockBreadcrumb;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/move_xblock_breadcrumb.js","/**\n * XBlockListView shows list of XBlocks in a particular category(section, subsection, vertical etc).\n */\ndefine([\n    'jquery', 'backbone', 'underscore', 'gettext',\n    'edx-ui-toolkit/js/utils/html-utils',\n    'edx-ui-toolkit/js/utils/string-utils',\n    'js/views/utils/xblock_utils',\n    'templates/move-xblock-list.underscore'\n],\nfunction($, Backbone, _, gettext, HtmlUtils, StringUtils, XBlockUtils, MoveXBlockListViewTemplate) {\n    'use strict';\n\n    var XBlockListView = Backbone.View.extend({\n        el: '.xblock-list-container',\n\n        // parent info of currently displayed children\n        parentInfo: {},\n        // currently displayed children XBlocks info\n        childrenInfo: {},\n        // list of visited parent XBlocks, needed for backward navigation\n        visitedAncestors: null,\n\n        // parent to child relation map\n        categoryRelationMap: {\n            course: 'section',\n            section: 'subsection',\n            subsection: 'unit',\n            unit: 'component'\n        },\n\n        categoriesText: {\n            section: gettext('Sections'),\n            subsection: gettext('Subsections'),\n            unit: gettext('Units'),\n            component: gettext('Components'),\n            group: gettext('Groups')\n        },\n\n        events: {\n            'click .button-forward': 'renderChildren'\n        },\n\n        initialize: function(options) {\n            this.visitedAncestors = [];\n            this.template = HtmlUtils.template(MoveXBlockListViewTemplate);\n            this.sourceXBlockInfo = options.sourceXBlockInfo;\n            this.ancestorInfo = options.ancestorInfo;\n            this.listenTo(Backbone, 'move:breadcrumbButtonPressed', this.handleBreadcrumbButtonPress);\n            this.renderXBlockInfo();\n        },\n\n        render: function() {\n            HtmlUtils.setHtml(\n                this.$el,\n                this.template(\n                    {\n                        sourceXBlockId: this.sourceXBlockInfo.id,\n                        xblocks: this.childrenInfo.children,\n                        noChildText: this.getNoChildText(),\n                        categoryText: this.getCategoryText(),\n                        parentDisplayname: this.parentInfo.parent.get('display_name'),\n                        XBlocksCategory: this.childrenInfo.category,\n                        currentLocationIndex: this.getCurrentLocationIndex()\n                    }\n                )\n            );\n            Backbone.trigger('move:childrenRendered', this.breadcrumbInfo());\n            Backbone.trigger('move:enableMoveOperation', this.parentInfo.parent);\n            return this;\n        },\n\n        /**\n         * Forward button press handler. This will render all the childs of an XBlock.\n         *\n         * @param {Object} event\n         */\n        renderChildren: function(event) {\n            this.renderXBlockInfo(\n                'forward',\n                $(event.target).closest('.xblock-item').data('itemIndex')\n            );\n        },\n\n        /**\n         * Breadcrumb button press event handler. Render all the childs of an XBlock.\n         *\n         * @param {any} newParentIndex  Index of a parent XBlock\n         */\n        handleBreadcrumbButtonPress: function(newParentIndex) {\n            this.renderXBlockInfo('backward', newParentIndex);\n        },\n\n        /**\n         * Render XBlocks based on `forward` or `backward` navigation.\n         *\n         * @param {any} direction           `forward` or `backward`\n         * @param {any} newParentIndex      Index of a parent XBlock\n         */\n        renderXBlockInfo: function(direction, newParentIndex) {\n            if (direction === undefined) {\n                this.parentInfo.parent = this.model;\n            } else if (direction === 'forward') {\n                // clicked child is the new parent\n                this.parentInfo.parent = this.childrenInfo.children[newParentIndex];\n            } else if (direction === 'backward') {\n                // new parent will be one of visitedAncestors\n                this.parentInfo.parent = this.visitedAncestors[newParentIndex];\n                // remove visited ancestors\n                this.visitedAncestors.splice(newParentIndex);\n            }\n\n            this.visitedAncestors.push(this.parentInfo.parent);\n\n            if (this.parentInfo.parent.get('child_info')) {\n                this.childrenInfo.children = this.parentInfo.parent.get('child_info').children;\n            } else {\n                this.childrenInfo.children = [];\n            }\n\n            this.setDisplayedXBlocksCategories();\n            this.render();\n        },\n\n        /**\n         * Set parent and child XBlock categories.\n         */\n        setDisplayedXBlocksCategories: function() {\n            var childCategory = 'component';\n            this.parentInfo.category = XBlockUtils.getXBlockType(this.parentInfo.parent.get('category'));\n            if (!_.contains(_.keys(this.categoryRelationMap), this.parentInfo.category)) {\n                if (this.parentInfo.category === 'split_test') {\n                    childCategory = 'group';    // This is just to show groups text on group listing.\n                }\n                this.categoryRelationMap[this.parentInfo.category] = childCategory;\n            }\n            this.childrenInfo.category = this.categoryRelationMap[this.parentInfo.category];\n        },\n\n        /**\n         * Get index of source XBlock.\n         *\n         * @returns {any} Integer or undefined\n         */\n        getCurrentLocationIndex: function() {\n            var self = this,\n                currentLocationIndex;\n            _.each(self.childrenInfo.children, function(xblock, index) {\n                if (xblock.get('id') === self.sourceXBlockInfo.id) {\n                    currentLocationIndex = index;\n                } else {\n                    _.each(self.ancestorInfo.ancestors, function(ancestor) {\n                        if (ancestor.display_name === xblock.get('display_name') && ancestor.id === xblock.get('id')) {\n                            currentLocationIndex = index;\n                        }\n                    });\n                }\n            });\n\n            return currentLocationIndex;\n        },\n\n        /**\n         * Get category text for currently displayed children.\n         *\n         * @returns {String}\n         */\n        getCategoryText: function() {\n            return this.categoriesText[this.childrenInfo.category];\n        },\n\n        /**\n         * Get text when a parent XBlock has no children.\n         *\n         * @returns {String}\n         */\n        getNoChildText: function() {\n            return StringUtils.interpolate(\n                gettext('This {parentCategory} has no {childCategory}'),\n                {\n                    parentCategory: this.parentInfo.category,\n                    childCategory: this.categoriesText[this.childrenInfo.category].toLowerCase()\n                }\n            );\n        },\n\n        /**\n         * Construct breadcurmb info.\n         *\n         * @returns {Object}\n         */\n        breadcrumbInfo: function() {\n            return {\n                breadcrumbs: _.map(this.visitedAncestors, function(ancestor) {\n                    return ancestor.get('category') === 'course' ?\n                           gettext('Course Outline') : ancestor.get('display_name');\n                })\n            };\n        }\n    });\n\n    return XBlockListView;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/move_xblock_list.js","define(['jquery', 'underscore', 'common/js/components/utils/view_utils', 'js/views/container', 'js/utils/module', 'gettext',\n    'common/js/components/views/feedback_notification', 'js/views/paging_header', 'common/js/components/views/paging_footer'],\n    function($, _, ViewUtils, ContainerView, ModuleUtils, gettext, NotificationView, PagingHeader, PagingFooter) {\n        var PagedContainerView = ContainerView.extend({\n\n            initialize: function(options) {\n                var self = this;\n                ContainerView.prototype.initialize.call(this);\n                this.page_size = this.options.page_size;\n                // Reference to the page model\n                this.page = options.page;\n                // XBlocks are rendered via Django views and templates rather than underscore templates, and so don't\n                // have a Backbone model for us to manipulate in a backbone collection. Here, we emulate the interface\n                // of backbone.paginator so that we can use the Paging Header and Footer with this page. As a\n                // consequence, however, we have to manipulate its members manually.\n                this.collection = {\n                    currentPage: 0,\n                    totalPages: 0,\n                    totalCount: 0,\n                    sortDirection: 'desc',\n                    start: 0,\n                    _size: 0,\n                    // Paging header and footer expect this to be a Backbone model they can listen to for changes, but\n                    // they cannot. Provide the bind function for them, but have it do nothing.\n                    bind: function() {},\n                    // size() on backbone collections shows how many objects are in the collection, or in the case\n                    // of paginator, on the current page.\n                    size: function() { return self.collection._size; },\n                    // Toggles the functionality for showing and hiding child previews.\n                    showChildrenPreviews: true,\n\n                    // PagingFooter expects to be able to control paging through the collection instead of the view,\n                    // so we just make these functions act as pass-throughs\n                    setPage: function(page) {\n                        self.setPage(page - 1);\n                    },\n\n                    nextPage: function() {\n                        self.nextPage();\n                    },\n\n                    previousPage: function() {\n                        self.previousPage();\n                    },\n\n                    getPage: function() {\n                        return self.collection.currentPage + 1;\n                    },\n\n                    hasPreviousPage: function() {\n                        return self.collection.currentPage > 0;\n                    },\n\n                    hasNextPage: function() {\n                        return self.collection.currentPage < self.collection.totalPages - 1;\n                    },\n\n                    getTotalPages: function() {\n                        return this.totalPages;\n                    },\n\n                    getPageNumber: function() {\n                        return this.getPage();\n                    },\n\n                    getTotalRecords: function() {\n                        return this.totalCount;\n                    },\n\n                    getPageSize: function() {\n                        return self.page_size;\n                    }\n                };\n            },\n\n            new_child_view: 'container_child_preview',\n\n            render: function(options) {\n                options = options || {};\n                options.page_number = typeof options.page_number !== 'undefined'\n                    ? options.page_number\n                    : this.collection.currentPage;\n                return this.renderPage(options);\n            },\n\n            renderPage: function(options) {\n                var self = this,\n                    view = this.view,\n                    xblockInfo = this.model,\n                    xblockUrl = xblockInfo.url();\n\n                return $.ajax({\n                    url: decodeURIComponent(xblockUrl) + '/' + view,\n                    type: 'GET',\n                    cache: false,\n                    data: this.getRenderParameters(options.page_number, options.force_render),\n                    headers: {Accept: 'application/json'},\n                    success: function(fragment) {\n                        self.handleXBlockFragment(fragment, options);\n                        self.processPaging({requested_page: options.page_number});\n                        self.page.updatePreviewButton(self.collection.showChildrenPreviews);\n                        self.page.renderAddXBlockComponents();\n                        if (options.force_render) {\n                            var $target = $('.studio-xblock-wrapper[data-locator=\"' + options.force_render + '\"]');\n                            // Scroll us to the element with a little buffer at the top for context.\n                            ViewUtils.setScrollOffset($target, ($(window).height() * 0.10));\n                        }\n                    }\n                });\n            },\n\n            getRenderParameters: function(page_number, force_render) {\n                // Options should at least contain page_number.\n                return {\n                    page_size: this.page_size,\n                    enable_paging: true,\n                    page_number: page_number,\n                    force_render: force_render\n                };\n            },\n\n            getPageCount: function(total_count) {\n                if (total_count === 0) {\n                    return 1;\n                }\n                return Math.ceil(total_count / this.page_size);\n            },\n\n            setPage: function(page_number, additional_options) {\n                additional_options = additional_options || {};\n                var options = _.extend({page_number: page_number}, additional_options);\n                this.render(options);\n            },\n\n            nextPage: function() {\n                var collection = this.collection,\n                    currentPage = collection.currentPage,\n                    lastPage = collection.totalPages - 1;\n                if (currentPage < lastPage) {\n                    this.setPage(currentPage + 1);\n                }\n            },\n\n            previousPage: function() {\n                var collection = this.collection,\n                    currentPage = collection.currentPage;\n                if (currentPage > 0) {\n                    this.setPage(currentPage - 1);\n                }\n            },\n\n            processPaging: function(options) {\n                // We have the Django template sneak us the pagination information,\n                // and we load it from a div here.\n                var $element = this.$el.find('.xblock-container-paging-parameters'),\n                    total = $element.data('total'),\n                    displayed = $element.data('displayed'),\n                    start = $element.data('start'),\n                    previews = $element.data('previews');\n\n                this.collection.currentPage = options.requested_page;\n                this.collection.totalCount = total;\n                this.collection.totalPages = this.getPageCount(total);\n                this.collection.start = start;\n                this.collection._size = displayed;\n                this.collection.showChildrenPreviews = previews;\n\n                this.processPagingHeaderAndFooter();\n            },\n\n            processPagingHeaderAndFooter: function() {\n                // Rendering the container view detaches the header and footer from the DOM.\n                // It's just as easy to recreate them as it is to try to shove them back into the tree.\n                if (this.pagingHeader) { this.pagingHeader.undelegateEvents(); }\n                if (this.pagingFooter) { this.pagingFooter.undelegateEvents(); }\n\n                this.pagingHeader = new PagingHeader({\n                    view: this,\n                    el: this.$el.find('.container-paging-header')\n                });\n                this.pagingFooter = new PagingFooter({\n                    collection: this.collection,\n                    el: this.$el.find('.container-paging-footer')\n                });\n\n                this.pagingHeader.render();\n                this.pagingFooter.render();\n            },\n\n            refresh: function(xblockView, block_added, is_duplicate) {\n                if (!block_added) {\n                    return;\n                }\n                if (is_duplicate) {\n                    // Duplicated blocks can be inserted onto the current page.\n                    var xblock = xblockView.xblock.element.parents('.studio-xblock-wrapper').first();\n                    var all_xblocks = xblock.parent().children('.studio-xblock-wrapper');\n                    var index = all_xblocks.index(xblock);\n                    if ((index + 1 <= this.page_size) && (all_xblocks.length > this.page_size)) {\n                        // Pop the last XBlock off the bottom.\n                        all_xblocks[all_xblocks.length - 1].remove();\n                        return;\n                    }\n                }\n                this.collection.totalCount += 1;\n                this.collection._size += 1;\n                if (this.collection.totalCount == 1) {\n                    this.render();\n                    return;\n                }\n                this.collection.totalPages = this.getPageCount(this.collection.totalCount);\n                var target_page = this.collection.totalPages - 1;\n                // If we're on a new page due to overflow, or this is the first item, set the page.\n                if (((this.collection.currentPage) != target_page) || this.collection.totalCount == 1) {\n                    var force_render = xblockView.model.id;\n                    if (is_duplicate) {\n                        // The duplicate should be on the next page if we've gotten here.\n                        target_page = this.collection.currentPage + 1;\n                    }\n                    this.setPage(\n                        target_page,\n                        {force_render: force_render}\n                    );\n                } else {\n                    this.pagingHeader.render();\n                    this.pagingFooter.render();\n                }\n            },\n\n            acknowledgeXBlockDeletion: function(locator) {\n                this.notifyRuntime('deleted-child', locator);\n                this.collection._size -= 1;\n                this.collection.totalCount -= 1;\n                var current_page = this.collection.currentPage;\n                var total_pages = this.getPageCount(this.collection.totalCount);\n                this.collection.totalPages = total_pages;\n                // Starts counting from 0\n                if ((current_page + 1) > total_pages) {\n                    // The number of total pages has changed. Move down.\n                    // Also, be mindful of the off-by-one.\n                    this.setPage(total_pages - 1);\n                } else if ((current_page + 1) != total_pages) {\n                    // Refresh page to get any blocks shifted from the next page.\n                    this.setPage(current_page);\n                } else {\n                    // We're on the last page, just need to update the numbers in the\n                    // pagination interface.\n                    this.pagingHeader.render();\n                    this.pagingFooter.render();\n                }\n            },\n\n            sortDisplayName: function() {\n                return gettext('Date added');  // TODO add support for sorting\n            },\n\n            togglePreviews: function() {\n                var self = this,\n                    xblockUrl = this.model.url();\n                return $.ajax({\n                    // No runtime, so can't get this via the handler() call.\n                    url: '/preview' + decodeURIComponent(xblockUrl) + '/handler/trigger_previews',\n                    type: 'POST',\n                    data: JSON.stringify({showChildrenPreviews: !this.collection.showChildrenPreviews}),\n                    dataType: 'json'\n                })\n                .then(self.render).promise();\n            }\n        });\n\n        return PagedContainerView;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/paged_container.js","/**\n * This is the base view that all Studio pages extend from.\n */\ndefine(['jquery', 'js/views/baseview'],\n    function($, BaseView) {\n        var BasePage = BaseView.extend({\n\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n            },\n\n            /**\n             * Returns true if this page is currently showing any content. If this returns false\n             * then the page will unhide the div with the class 'no-content'.\n             */\n            hasContent: function() {\n                return true;\n            },\n\n            /**\n             * This renders the page's content and returns a promise that will be resolved once\n             * the rendering has completed.\n             * @returns {jQuery promise} A promise representing the rendering of the page.\n             */\n            renderPage: function() {\n                return $.Deferred().resolve().promise();\n            },\n\n            /**\n             * Renders the current page while showing a loading indicator. Note that subclasses\n             * of BasePage should implement renderPage to perform the rendering of the content.\n             * If the page has no content (i.e. it returns false for hasContent) then the\n             * div with the class 'no-content' will be shown.\n             */\n            render: function() {\n                var self = this;\n                this.$('.ui-loading').removeClass('is-hidden');\n                this.renderPage().done(function() {\n                    if (!self.hasContent()) {\n                        self.$('.no-content').removeClass('is-hidden');\n                    }\n                }).always(function() {\n                    self.$('.ui-loading').addClass('is-hidden');\n                });\n                return this;\n            }\n        });\n\n        return BasePage;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/pages/base_page.js","/**\n * XBlockContainerPage is used to display Studio's container page for an xblock which has children.\n * This page allows the user to understand and manipulate the xblock and its children.\n */\ndefine(['jquery', 'underscore', 'backbone', 'gettext', 'js/views/pages/base_page',\n    'common/js/components/utils/view_utils', 'js/views/container', 'js/views/xblock',\n    'js/views/components/add_xblock', 'js/views/modals/edit_xblock', 'js/views/modals/move_xblock_modal',\n    'js/models/xblock_info', 'js/views/xblock_string_field_editor', 'js/views/xblock_access_editor',\n    'js/views/pages/container_subviews', 'js/views/unit_outline', 'js/views/utils/xblock_utils'],\n    function($, _, Backbone, gettext, BasePage, ViewUtils, ContainerView, XBlockView, AddXBlockComponent,\n          EditXBlockModal, MoveXBlockModal, XBlockInfo, XBlockStringFieldEditor, XBlockAccessEditor,\n          ContainerSubviews, UnitOutlineView, XBlockUtils) {\n        'use strict';\n        var XBlockContainerPage = BasePage.extend({\n            // takes XBlockInfo as a model\n\n            events: {\n                'click .edit-button': 'editXBlock',\n                'click .access-button': 'editVisibilitySettings',\n                'click .duplicate-button': 'duplicateXBlock',\n                'click .move-button': 'showMoveXBlockModal',\n                'click .delete-button': 'deleteXBlock',\n                'click .new-component-button': 'scrollToNewComponentButtons'\n            },\n\n            options: {\n                collapsedClass: 'is-collapsed',\n                canEdit: true // If not specified, assume user has permission to make changes\n            },\n\n            view: 'container_preview',\n\n            defaultViewClass: ContainerView,\n\n            // Overridable by subclasses-- determines whether the XBlock component\n            // addition menu is added on initialization. You may set this to false\n            // if your subclass handles it.\n            components_on_init: true,\n\n            initialize: function(options) {\n                BasePage.prototype.initialize.call(this, options);\n                this.viewClass = options.viewClass || this.defaultViewClass;\n                this.isLibraryPage = (this.model.attributes.category === 'library');\n                this.nameEditor = new XBlockStringFieldEditor({\n                    el: this.$('.wrapper-xblock-field'),\n                    model: this.model\n                });\n                this.nameEditor.render();\n                if (!this.isLibraryPage) {\n                    this.accessEditor = new XBlockAccessEditor({\n                        el: this.$('.wrapper-xblock-field')\n                    });\n                    this.accessEditor.render();\n                }\n                if (this.options.action === 'new') {\n                    this.nameEditor.$('.xblock-field-value-edit').click();\n                }\n                this.xblockView = this.getXBlockView();\n                this.messageView = new ContainerSubviews.MessageView({\n                    el: this.$('.container-message'),\n                    model: this.model\n                });\n                this.messageView.render();\n                // Display access message on units and split test components\n                if (!this.isLibraryPage) {\n                    this.containerAccessView = new ContainerSubviews.ContainerAccess({\n                        el: this.$('.container-access'),\n                        model: this.model\n                    });\n                    this.containerAccessView.render();\n\n                    this.xblockPublisher = new ContainerSubviews.Publisher({\n                        el: this.$('#publish-unit'),\n                        model: this.model,\n                        // When \"Discard Changes\" is clicked, the whole page must be re-rendered.\n                        renderPage: this.render\n                    });\n                    this.xblockPublisher.render();\n\n                    this.publishHistory = new ContainerSubviews.PublishHistory({\n                        el: this.$('#publish-history'),\n                        model: this.model\n                    });\n                    this.publishHistory.render();\n\n                    this.viewLiveActions = new ContainerSubviews.ViewLiveButtonController({\n                        el: this.$('.nav-actions'),\n                        model: this.model\n                    });\n                    this.viewLiveActions.render();\n\n                    this.unitOutlineView = new UnitOutlineView({\n                        el: this.$('.wrapper-unit-overview'),\n                        model: this.model\n                    });\n                    this.unitOutlineView.render();\n                }\n\n                this.listenTo(Backbone, 'move:onXBlockMoved', this.onXBlockMoved);\n            },\n\n            getViewParameters: function() {\n                return {\n                    el: this.$('.wrapper-xblock'),\n                    model: this.model,\n                    view: this.view\n                };\n            },\n\n            getXBlockView: function() {\n                return new this.viewClass(this.getViewParameters());\n            },\n\n            render: function(options) {\n                var self = this,\n                    xblockView = this.xblockView,\n                    loadingElement = this.$('.ui-loading'),\n                    unitLocationTree = this.$('.unit-location'),\n                    hiddenCss = 'is-hidden';\n\n                loadingElement.removeClass(hiddenCss);\n\n                // Hide both blocks until we know which one to show\n                xblockView.$el.addClass(hiddenCss);\n\n                // Render the xblock\n                xblockView.render({\n                    done: function() {\n                        // Show the xblock and hide the loading indicator\n                        xblockView.$el.removeClass(hiddenCss);\n                        loadingElement.addClass(hiddenCss);\n\n                        // Notify the runtime that the page has been successfully shown\n                        xblockView.notifyRuntime('page-shown', self);\n\n                        if (self.components_on_init) {\n                            // Render the add buttons. Paged containers should do this on their own.\n                            self.renderAddXBlockComponents();\n                        }\n\n                        // Refresh the views now that the xblock is visible\n                        self.onXBlockRefresh(xblockView);\n                        unitLocationTree.removeClass(hiddenCss);\n\n                        // Re-enable Backbone events for any updated DOM elements\n                        self.delegateEvents();\n                    },\n                    block_added: options && options.block_added\n                });\n            },\n\n            findXBlockElement: function(target) {\n                return $(target).closest('.studio-xblock-wrapper');\n            },\n\n            getURLRoot: function() {\n                return this.xblockView.model.urlRoot;\n            },\n\n            onXBlockRefresh: function(xblockView, block_added, is_duplicate) {\n                this.xblockView.refresh(xblockView, block_added, is_duplicate);\n                // Update publish and last modified information from the server.\n                this.model.fetch();\n            },\n\n            renderAddXBlockComponents: function() {\n                var self = this;\n                if (self.options.canEdit) {\n                    this.$('.add-xblock-component').each(function(index, element) {\n                        var component = new AddXBlockComponent({\n                            el: element,\n                            createComponent: _.bind(self.createComponent, self),\n                            collection: self.options.templates\n                        });\n                        component.render();\n                    });\n                } else {\n                    this.$('.add-xblock-component').remove();\n                }\n            },\n\n            editXBlock: function(event, options) {\n                var xblockElement = this.findXBlockElement(event.target),\n                    self = this,\n                    modal = new EditXBlockModal(options);\n                event.preventDefault();\n\n                modal.edit(xblockElement, this.model, {\n                    readOnlyView: !this.options.canEdit,\n                    refresh: function() {\n                        self.refreshXBlock(xblockElement, false);\n                    }\n                });\n            },\n\n            editVisibilitySettings: function(event) {\n                this.editXBlock(event, {\n                    view: 'visibility_view',\n                    // Translators: \"title\" is the name of the current component or unit being edited.\n                    titleFormat: gettext('Editing access for: %(title)s'),\n                    viewSpecificClasses: '',\n                    modalSize: 'med'\n                });\n            },\n\n            duplicateXBlock: function(event) {\n                event.preventDefault();\n                this.duplicateComponent(this.findXBlockElement(event.target));\n            },\n\n            showMoveXBlockModal: function(event) {\n                var xblockElement = this.findXBlockElement(event.target),\n                    parentXBlockElement = xblockElement.parents('.studio-xblock-wrapper'),\n                    modal = new MoveXBlockModal({\n                        sourceXBlockInfo: XBlockUtils.findXBlockInfo(xblockElement, this.model),\n                        sourceParentXBlockInfo: XBlockUtils.findXBlockInfo(parentXBlockElement, this.model),\n                        XBlockURLRoot: this.getURLRoot(),\n                        outlineURL: this.options.outlineURL\n                    });\n\n                event.preventDefault();\n                modal.show();\n            },\n\n            deleteXBlock: function(event) {\n                event.preventDefault();\n                this.deleteComponent(this.findXBlockElement(event.target));\n            },\n\n            createPlaceholderElement: function() {\n                return $('<div/>', {class: 'studio-xblock-wrapper'});\n            },\n\n            createComponent: function(template, target) {\n                // A placeholder element is created in the correct location for the new xblock\n                // and then onNewXBlock will replace it with a rendering of the xblock. Note that\n                // for xblocks that can't be replaced inline, the entire parent will be refreshed.\n                var parentElement = this.findXBlockElement(target),\n                    parentLocator = parentElement.data('locator'),\n                    buttonPanel = target.closest('.add-xblock-component'),\n                    listPanel = buttonPanel.prev(),\n                    scrollOffset = ViewUtils.getScrollOffset(buttonPanel),\n                    $placeholderEl = $(this.createPlaceholderElement()),\n                    requestData = _.extend(template, {\n                        parent_locator: parentLocator\n                    }),\n                    placeholderElement;\n                placeholderElement = $placeholderEl.appendTo(listPanel);\n                return $.postJSON(this.getURLRoot() + '/', requestData,\n                    _.bind(this.onNewXBlock, this, placeholderElement, scrollOffset, false))\n                    .fail(function() {\n                        // Remove the placeholder if the update failed\n                        placeholderElement.remove();\n                    });\n            },\n\n            duplicateComponent: function(xblockElement) {\n                // A placeholder element is created in the correct location for the duplicate xblock\n                // and then onNewXBlock will replace it with a rendering of the xblock. Note that\n                // for xblocks that can't be replaced inline, the entire parent will be refreshed.\n                var self = this,\n                    parentElement = self.findXBlockElement(xblockElement.parent()),\n                    scrollOffset = ViewUtils.getScrollOffset(xblockElement),\n                    $placeholderEl = $(self.createPlaceholderElement()),\n                    placeholderElement;\n\n                placeholderElement = $placeholderEl.insertAfter(xblockElement);\n                XBlockUtils.duplicateXBlock(xblockElement, parentElement)\n                    .done(function(data) {\n                        self.onNewXBlock(placeholderElement, scrollOffset, true, data);\n                    })\n                    .fail(function() {\n                        // Remove the placeholder if the update failed\n                        placeholderElement.remove();\n                    });\n            },\n\n            deleteComponent: function(xblockElement) {\n                var self = this,\n                    xblockInfo = new XBlockInfo({\n                        id: xblockElement.data('locator')\n                    });\n                XBlockUtils.deleteXBlock(xblockInfo).done(function() {\n                    self.onDelete(xblockElement);\n                });\n            },\n\n            onDelete: function(xblockElement) {\n                // get the parent so we can remove this component from its parent.\n                var xblockView = this.xblockView,\n                    parent = this.findXBlockElement(xblockElement.parent());\n                xblockElement.remove();\n\n                // Inform the runtime that the child has been deleted in case\n                // other views are listening to deletion events.\n                xblockView.acknowledgeXBlockDeletion(parent.data('locator'));\n\n                // Update publish and last modified information from the server.\n                this.model.fetch();\n            },\n\n            /*\n            After move operation is complete, updates the xblock information from server .\n             */\n            onXBlockMoved: function() {\n                this.model.fetch();\n            },\n\n            onNewXBlock: function(xblockElement, scrollOffset, is_duplicate, data) {\n                ViewUtils.setScrollOffset(xblockElement, scrollOffset);\n                xblockElement.data('locator', data.locator);\n                return this.refreshXBlock(xblockElement, true, is_duplicate);\n            },\n\n            /**\n             * Refreshes the specified xblock's display. If the xblock is an inline child of a\n             * reorderable container then the element will be refreshed inline. If not, then the\n             * parent container will be refreshed instead.\n             * @param element An element representing the xblock to be refreshed.\n             * @param block_added Flag to indicate that new block has been just added.\n             */\n            refreshXBlock: function(element, block_added, is_duplicate) {\n                var xblockElement = this.findXBlockElement(element),\n                    parentElement = xblockElement.parent(),\n                    rootLocator = this.xblockView.model.id;\n                if (xblockElement.length === 0 || xblockElement.data('locator') === rootLocator) {\n                    this.render({refresh: true, block_added: block_added});\n                } else if (parentElement.hasClass('reorderable-container')) {\n                    this.refreshChildXBlock(xblockElement, block_added, is_duplicate);\n                } else {\n                    this.refreshXBlock(this.findXBlockElement(parentElement));\n                }\n            },\n\n            /**\n             * Refresh an xblock element inline on the page, using the specified xblockInfo.\n             * Note that the element is removed and replaced with the newly rendered xblock.\n             * @param xblockElement The xblock element to be refreshed.\n             * @param block_added Specifies if a block has been added, rather than just needs\n             * refreshing.\n             * @returns {jQuery promise} A promise representing the complete operation.\n             */\n            refreshChildXBlock: function(xblockElement, block_added, is_duplicate) {\n                var self = this,\n                    xblockInfo,\n                    TemporaryXBlockView,\n                    temporaryView;\n                xblockInfo = new XBlockInfo({\n                    id: xblockElement.data('locator')\n                });\n                // There is only one Backbone view created on the container page, which is\n                // for the container xblock itself. Any child xblocks rendered inside the\n                // container do not get a Backbone view. Thus, create a temporary view\n                // to render the content, and then replace the original element with the result.\n                TemporaryXBlockView = XBlockView.extend({\n                    updateHtml: function(element, html) {\n                        // Replace the element with the new HTML content, rather than adding\n                        // it as child elements.\n                        this.$el = $(html).replaceAll(element); // xss-lint: disable=javascript-jquery-insertion\n                    }\n                });\n                temporaryView = new TemporaryXBlockView({\n                    model: xblockInfo,\n                    view: self.xblockView.new_child_view,\n                    el: xblockElement\n                });\n                return temporaryView.render({\n                    success: function() {\n                        self.onXBlockRefresh(temporaryView, block_added, is_duplicate);\n                        temporaryView.unbind();  // Remove the temporary view\n                    },\n                    initRuntimeData: this\n                });\n            },\n\n            scrollToNewComponentButtons: function(event) {\n                event.preventDefault();\n                $.scrollTo(this.$('.add-xblock-component'), {duration: 250});\n            }\n        });\n\n        return XBlockContainerPage;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/pages/container.js","/**\n * Subviews (usually small side panels) for XBlockContainerPage.\n */\ndefine(['jquery', 'underscore', 'gettext', 'js/views/baseview', 'common/js/components/utils/view_utils',\n    'js/views/utils/xblock_utils', 'js/views/utils/move_xblock_utils', 'edx-ui-toolkit/js/utils/html-utils'],\n    function($, _, gettext, BaseView, ViewUtils, XBlockViewUtils, MoveXBlockUtils, HtmlUtils) {\n        'use strict';\n\n        var disabledCss = 'is-disabled';\n\n        /**\n         * A view that refreshes the view when certain values in the XBlockInfo have changed\n         * after a server sync operation.\n         */\n        var ContainerStateListenerView = BaseView.extend({\n\n            // takes XBlockInfo as a model\n            initialize: function() {\n                this.model.on('sync', this.onSync, this);\n            },\n\n            onSync: function(model) {\n                if (this.shouldRefresh(model)) {\n                    this.render();\n                }\n            },\n\n            shouldRefresh: function(model) {\n                return false;\n            },\n\n            render: function() {}\n        });\n\n        var ContainerAccess = ContainerStateListenerView.extend({\n            initialize: function() {\n                ContainerStateListenerView.prototype.initialize.call(this);\n                this.template = this.loadTemplate('container-access');\n            },\n\n            shouldRefresh: function(model) {\n                return ViewUtils.hasChangedAttributes(model, ['has_partition_group_components', 'user_partitions']);\n            },\n\n            render: function() {\n                HtmlUtils.setHtml(\n                    this.$el,\n                    HtmlUtils.HTML(\n                        this.template({\n                            hasPartitionGroupComponents: this.model.get('has_partition_group_components'),\n                            userPartitionInfo: this.model.get('user_partition_info')\n                        })\n                    )\n                );\n                return this;\n            }\n        });\n\n        var MessageView = ContainerStateListenerView.extend({\n            initialize: function() {\n                ContainerStateListenerView.prototype.initialize.call(this);\n                this.template = this.loadTemplate('container-message');\n            },\n\n            shouldRefresh: function(model) {\n                return ViewUtils.hasChangedAttributes(model, ['currently_visible_to_students']);\n            },\n\n            render: function() {\n                HtmlUtils.setHtml(\n                    this.$el,\n                    HtmlUtils.HTML(\n                        this.template({currentlyVisibleToStudents: this.model.get('currently_visible_to_students')})\n                    )\n                );\n                return this;\n            }\n        });\n\n        /**\n         * A controller for updating the \"View Live\" button.\n         */\n        var ViewLiveButtonController = ContainerStateListenerView.extend({\n            shouldRefresh: function(model) {\n                return ViewUtils.hasChangedAttributes(model, ['published']);\n            },\n\n            render: function() {\n                var viewLiveAction = this.$el.find('.button-view');\n                if (this.model.get('published')) {\n                    viewLiveAction.removeClass(disabledCss).attr('aria-disabled', false);\n                } else {\n                    viewLiveAction.addClass(disabledCss).attr('aria-disabled', true);\n                }\n            }\n        });\n\n        /**\n         * Publisher is a view that supports the following:\n         * 1) Publishing of a draft version of an xblock.\n         * 2) Discarding of edits in a draft version.\n         * 3) Display of who last edited the xblock, and when.\n         * 4) Display of publish status (published, published with changes, changes with no published version).\n         */\n        var Publisher = BaseView.extend({\n            events: {\n                'click .action-publish': 'publish',\n                'click .action-discard': 'discardChanges',\n                'click .action-staff-lock': 'toggleStaffLock'\n            },\n\n            // takes XBlockInfo as a model\n\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                this.template = this.loadTemplate('publish-xblock');\n                this.model.on('sync', this.onSync, this);\n                this.renderPage = this.options.renderPage;\n            },\n\n            onSync: function(model) {\n                if (ViewUtils.hasChangedAttributes(model, [\n                    'has_changes', 'published', 'edited_on', 'edited_by', 'visibility_state',\n                    'has_explicit_staff_lock'\n                ])) {\n                    this.render();\n                }\n            },\n\n            render: function() {\n                HtmlUtils.setHtml(\n                    this.$el,\n                    HtmlUtils.HTML(\n                        this.template({\n                            visibilityState: this.model.get('visibility_state'),\n                            visibilityClass: XBlockViewUtils.getXBlockVisibilityClass(\n                                this.model.get('visibility_state')\n                            ),\n                            hasChanges: this.model.get('has_changes'),\n                            editedOn: this.model.get('edited_on'),\n                            editedBy: this.model.get('edited_by'),\n                            published: this.model.get('published'),\n                            publishedOn: this.model.get('published_on'),\n                            publishedBy: this.model.get('published_by'),\n                            released: this.model.get('released_to_students'),\n                            releaseDate: this.model.get('release_date'),\n                            releaseDateFrom: this.model.get('release_date_from'),\n                            hasExplicitStaffLock: this.model.get('has_explicit_staff_lock'),\n                            staffLockFrom: this.model.get('staff_lock_from'),\n                            course: window.course,\n                            HtmlUtils: HtmlUtils\n                        })\n                    )\n                );\n\n                return this;\n            },\n\n            publish: function(e) {\n                var xblockInfo = this.model;\n                if (e && e.preventDefault) {\n                    e.preventDefault();\n                }\n                ViewUtils.runOperationShowingMessage(gettext('Publishing'),\n                    function() {\n                        return xblockInfo.save({publish: 'make_public'}, {patch: true});\n                    }).always(function() {\n                        xblockInfo.set('publish', null);\n                        // Hide any move notification if present.\n                        MoveXBlockUtils.hideMovedNotification();\n                    }).done(function() {\n                        xblockInfo.fetch();\n                    });\n            },\n\n            discardChanges: function(e) {\n                var xblockInfo = this.model,\n                    renderPage = this.renderPage;\n                if (e && e.preventDefault) {\n                    e.preventDefault();\n                }\n                ViewUtils.confirmThenRunOperation(gettext('Discard Changes'),\n                    gettext('Are you sure you want to revert to the last published version of the unit? You cannot undo this action.'),\n                    gettext('Discard Changes'),\n                    function() {\n                        ViewUtils.runOperationShowingMessage(gettext('Discarding Changes'),\n                            function() {\n                                return xblockInfo.save({publish: 'discard_changes'}, {patch: true});\n                            }).always(function() {\n                                xblockInfo.set('publish', null);\n                                // Hide any move notification if present.\n                                MoveXBlockUtils.hideMovedNotification();\n                            }).done(function() {\n                                renderPage();\n                            });\n                    }\n                );\n            },\n\n            toggleStaffLock: function(e) {\n                var xblockInfo = this.model,\n                    self = this,\n                    enableStaffLock, hasInheritedStaffLock,\n                    saveAndPublishStaffLock, revertCheckBox;\n                if (e && e.preventDefault) {\n                    e.preventDefault();\n                }\n                enableStaffLock = !xblockInfo.get('has_explicit_staff_lock');\n                hasInheritedStaffLock = xblockInfo.get('ancestor_has_staff_lock');\n\n                revertCheckBox = function() {\n                    self.checkStaffLock(!enableStaffLock);\n                };\n\n                saveAndPublishStaffLock = function() {\n                    // Setting staff lock to null when disabled will delete the field from this xblock,\n                    // allowing it to use the inherited value instead of using false explicitly.\n                    return xblockInfo.save({\n                        publish: 'republish',\n                        metadata: {visible_to_staff_only: enableStaffLock ? true : null}},\n                        {patch: true}\n                    ).always(function() {\n                        xblockInfo.set('publish', null);\n                    }).done(function() {\n                        xblockInfo.fetch();\n                    }).fail(function() {\n                        revertCheckBox();\n                    });\n                };\n\n                this.checkStaffLock(enableStaffLock);\n                if (enableStaffLock && !hasInheritedStaffLock) {\n                    ViewUtils.runOperationShowingMessage(gettext('Hiding from Students'),\n                        _.bind(saveAndPublishStaffLock, self));\n                } else if (enableStaffLock && hasInheritedStaffLock) {\n                    ViewUtils.runOperationShowingMessage(gettext('Explicitly Hiding from Students'),\n                        _.bind(saveAndPublishStaffLock, self));\n                } else if (!enableStaffLock && hasInheritedStaffLock) {\n                    ViewUtils.runOperationShowingMessage(gettext('Inheriting Student Visibility'),\n                        _.bind(saveAndPublishStaffLock, self));\n                } else {\n                    ViewUtils.confirmThenRunOperation(gettext('Make Visible to Students'),\n                        gettext('If the unit was previously published and released to students, any changes you made to the unit when it was hidden will now be visible to students. Do you want to proceed?'),\n                        gettext('Make Visible to Students'),\n                        function() {\n                            ViewUtils.runOperationShowingMessage(gettext('Making Visible to Students'),\n                                _.bind(saveAndPublishStaffLock, self));\n                        },\n                        function() {\n                            // On cancel, revert the check in the check box\n                            revertCheckBox();\n                        }\n                    );\n                }\n            },\n\n            checkStaffLock: function(check) {\n                this.$('.action-staff-lock i').removeClass('fa-check-square-o fa-square-o');\n                this.$('.action-staff-lock i').addClass(check ? 'fa-check-square-o' : 'fa-square-o');\n            }\n        });\n\n        /**\n         * PublishHistory displays when and by whom the xblock was last published, if it ever was.\n         */\n        var PublishHistory = BaseView.extend({\n            // takes XBlockInfo as a model\n\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                this.template = this.loadTemplate('publish-history');\n                this.model.on('sync', this.onSync, this);\n            },\n\n            onSync: function(model) {\n                if (ViewUtils.hasChangedAttributes(model, ['published', 'published_on', 'published_by'])) {\n                    this.render();\n                }\n            },\n\n            render: function() {\n                HtmlUtils.setHtml(\n                    this.$el,\n                    HtmlUtils.HTML(\n                        this.template({\n                            published: this.model.get('published'),\n                            published_on: this.model.get('published_on'),\n                            published_by: this.model.get('published_by')\n                        })\n                    )\n                );\n\n                return this;\n            }\n        });\n\n        return {\n            MessageView: MessageView,\n            ViewLiveButtonController: ViewLiveButtonController,\n            Publisher: Publisher,\n            PublishHistory: PublishHistory,\n            ContainerAccess: ContainerAccess\n        };\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/pages/container_subviews.js","/**\n * PagedXBlockContainerPage is a variant of XBlockContainerPage that supports Pagination.\n */\ndefine(['jquery', 'underscore', 'gettext', 'js/views/pages/container', 'js/views/paged_container'],\n    function($, _, gettext, XBlockContainerPage, PagedContainerView) {\n        'use strict';\n        var PagedXBlockContainerPage = XBlockContainerPage.extend({\n\n            events: _.extend({}, XBlockContainerPage.prototype.events, {\n                'click .toggle-preview-button': 'toggleChildrenPreviews'\n            }),\n\n            defaultViewClass: PagedContainerView,\n            components_on_init: false,\n\n            initialize: function(options) {\n                this.page_size = options.page_size || 10;\n                this.showChildrenPreviews = options.showChildrenPreviews || true;\n                XBlockContainerPage.prototype.initialize.call(this, options);\n            },\n\n            getViewParameters: function() {\n                return _.extend(XBlockContainerPage.prototype.getViewParameters.call(this), {\n                    page_size: this.page_size,\n                    page: this\n                });\n            },\n\n            refreshXBlock: function(element, block_added, is_duplicate) {\n                var xblockElement = this.findXBlockElement(element),\n                    rootLocator = this.xblockView.model.id;\n                if (xblockElement.length === 0 || xblockElement.data('locator') === rootLocator) {\n                    this.render({refresh: true, block_added: block_added});\n                } else {\n                    this.refreshChildXBlock(xblockElement, block_added, is_duplicate);\n                }\n            },\n\n            toggleChildrenPreviews: function(xblockElement) {\n                xblockElement.preventDefault();\n                this.xblockView.togglePreviews();\n            },\n\n            updatePreviewButton: function(show_previews) {\n                var text = (show_previews) ? gettext('Hide Previews') : gettext('Show Previews'),\n                    $button = $('.nav-actions .button-toggle-preview');\n\n                this.$('.preview-text', $button).text(text);\n                this.$('.toggle-preview-button').removeClass('is-hidden');\n            }\n        });\n        return PagedXBlockContainerPage;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/pages/paged_container.js","define([\n    'underscore',\n    'backbone',\n    'gettext',\n    'edx-ui-toolkit/js/utils/html-utils',\n    'edx-ui-toolkit/js/utils/string-utils',\n    'templates/paging-header.underscore'\n], function(_, Backbone, gettext, HtmlUtils, StringUtils, pagingHeaderTemplate) {\n    'use strict';\n    var PagingHeader = Backbone.View.extend({\n        events: {\n            'click .next-page-link': 'nextPage',\n            'click .previous-page-link': 'previousPage'\n        },\n\n        initialize: function(options) {\n            var view = options.view,\n                collection = view.collection;\n            this.view = view;\n            collection.bind('add', _.bind(this.render, this));\n            collection.bind('remove', _.bind(this.render, this));\n            collection.bind('reset', _.bind(this.render, this));\n        },\n\n        render: function() {\n            var view = this.view,\n                collection = view.collection,\n                currentPage = collection.getPageNumber(),\n                lastPage = collection.getTotalPages(),\n                messageHtml = this.messageHtml(),\n                isNextDisabled = lastPage === 0 || currentPage === lastPage;\n\n            HtmlUtils.setHtml(this.$el, HtmlUtils.template(pagingHeaderTemplate)({messageHtml: messageHtml}));\n            this.$('.previous-page-link')\n                    .toggleClass('is-disabled', currentPage === 1)\n                    .attr('aria-disabled', currentPage === 1);\n            this.$('.next-page-link')\n                    .toggleClass('is-disabled', isNextDisabled)\n                    .attr('aria-disabled', isNextDisabled);\n\n            return this;\n        },\n\n        messageHtml: function() {\n            var message = '',\n                assetType = false;\n\n            if (this.view.collection.assetType) {\n                if (this.view.collection.sortDirection === 'asc') {\n                        // Translators: sample result:\n                        // \"Showing 0-9 out of 25 total, filtered by Images, sorted by Date Added ascending\"\n                    message = gettext('Showing {currentItemRange} out of {totalItemsCount}, filtered by {assetType}, sorted by {sortName} ascending');  // eslint-disable-line max-len\n                } else {\n                        // Translators: sample result:\n                        // \"Showing 0-9 out of 25 total, filtered by Images, sorted by Date Added descending\"\n                    message = gettext('Showing {currentItemRange} out of {totalItemsCount}, filtered by {assetType}, sorted by {sortName} descending');  // eslint-disable-line max-len\n                }\n                assetType = this.filterNameLabel();\n            } else {\n                if (this.view.collection.sortDirection === 'asc') {\n                        // Translators: sample result:\n                        // \"Showing 0-9 out of 25 total, sorted by Date Added ascending\"\n                    message = gettext('Showing {currentItemRange} out of {totalItemsCount}, sorted by {sortName} ascending');  // eslint-disable-line max-len\n                } else {\n                        // Translators: sample result:\n                        // \"Showing 0-9 out of 25 total, sorted by Date Added descending\"\n                    message = gettext('Showing {currentItemRange} out of {totalItemsCount}, sorted by {sortName} descending');  // eslint-disable-line max-len\n                }\n            }\n\n            return HtmlUtils.interpolateHtml(message, {\n                currentItemRange: this.currentItemRangeLabel(),\n                totalItemsCount: this.totalItemsCountLabel(),\n                assetType: assetType,\n                sortName: this.sortNameLabel()\n            });\n        },\n\n        currentItemRangeLabel: function() {\n            var view = this.view,\n                collection = view.collection,\n                start = (collection.getPageNumber() - 1) * collection.getPageSize(),\n                count = collection.size(),\n                end = start + count,\n                htmlMessage = HtmlUtils.HTML('<span class=\"count-current-shown\">{start}-{end}</span>');\n\n            return HtmlUtils.interpolateHtml(htmlMessage, {\n                start: Math.min(start + 1, end),\n                end: end\n            });\n        },\n\n        totalItemsCountLabel: function() {\n            var totalItemsLabel,\n                htmlMessage = HtmlUtils.HTML('<span class=\"count-total\">{totalItemsLabel}</span>');\n\n                // Translators: turns into \"25 total\" to be used in other sentences, e.g. \"Showing 0-9 out of 25 total\".\n            totalItemsLabel = StringUtils.interpolate(gettext('{totalItems} total'), {\n                totalItems: this.view.collection.getTotalRecords()\n            });\n\n            return HtmlUtils.interpolateHtml(htmlMessage, {\n                totalItemsLabel: totalItemsLabel\n            });\n        },\n\n        sortNameLabel: function() {\n            var htmlMessage = HtmlUtils.HTML('<span class=\"sort-order\">{sortName}</span>');\n\n            return HtmlUtils.interpolateHtml(htmlMessage, {\n                sortName: this.view.sortDisplayName()\n            });\n        },\n\n        filterNameLabel: function() {\n            var htmlMessage = HtmlUtils.HTML('<span class=\"filter-column\">{filterName}</span>');\n\n            return HtmlUtils.interpolateHtml(htmlMessage, {\n                filterName: this.view.filterDisplayName()\n            });\n        },\n\n        nextPage: function() {\n            this.view.nextPage();\n        },\n\n        previousPage: function() {\n            this.view.previousPage();\n        }\n    });\n\n    return PagingHeader;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/paging_header.js","/**\n * The UnitOutlineView is used to render the Unit Outline component on the unit page. It shows\n * the ancestors of the unit along with its direct siblings. It also has a single \"New Unit\"\n * button to allow a new sibling unit to be added.\n */\ndefine(['underscore', 'js/views/xblock_outline', 'js/views/unit_outline_child'],\n    function(_, XBlockOutlineView, UnitOutlineChildView) {\n        var UnitOutlineView = XBlockOutlineView.extend({\n            // takes XBlockInfo as a model\n\n            templateName: 'unit-outline',\n\n            render: function() {\n                XBlockOutlineView.prototype.render.call(this);\n                this.renderAncestors();\n                return this;\n            },\n\n            renderAncestors: function() {\n                var i, listElement,\n                    ancestors, ancestor,\n                    ancestorView = this,\n                    previousAncestor = null;\n                if (this.model.get('ancestor_info')) {\n                    ancestors = this.model.get('ancestor_info').ancestors;\n                    listElement = this.getListElement();\n                    // Note: the ancestors are processed in reverse order because the tree wants to\n                    // start at the root, but the ancestors are ordered by closeness to the unit,\n                    // i.e. subsection and then section.\n                    for (i = ancestors.length - 1; i >= 0; i--) {\n                        ancestor = ancestors[i];\n                        ancestorView = this.createChildView(\n                            ancestor,\n                            previousAncestor,\n                            {parentView: ancestorView, currentUnitId: this.model.get('id')}\n                        );\n                        ancestorView.render();\n                        listElement.append(ancestorView.$el);\n                        previousAncestor = ancestor;\n                        listElement = ancestorView.getListElement();\n                    }\n                }\n                return ancestorView;\n            },\n\n            getChildViewClass: function() {\n                return UnitOutlineChildView;\n            },\n\n            getTemplateContext: function() {\n                return _.extend(\n                    XBlockOutlineView.prototype.getTemplateContext.call(this),\n                    {currentUnitId: this.model.get('id')}\n                );\n            }\n        });\n\n        return UnitOutlineView;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/unit_outline.js","/**\n * The UnitOutlineChildView is used to render each Section,\n * Subsection, and Unit within the Unit Outline component on the unit\n * page.\n */\ndefine(['underscore', 'js/views/xblock_outline'],\n    function(_, XBlockOutlineView) {\n        var UnitOutlineChildView = XBlockOutlineView.extend({\n            initialize: function() {\n                XBlockOutlineView.prototype.initialize.call(this);\n                this.currentUnitId = this.options.currentUnitId;\n            },\n\n            getTemplateContext: function() {\n                return _.extend(\n                    XBlockOutlineView.prototype.getTemplateContext.call(this),\n                    {currentUnitId: this.currentUnitId}\n                );\n            },\n\n            getChildViewClass: function() {\n                return UnitOutlineChildView;\n            },\n\n            createChildView: function(childInfo, parentInfo, options) {\n                options = _.isUndefined(options) ? {} : options;\n                return XBlockOutlineView.prototype.createChildView.call(\n                    this, childInfo, parentInfo, _.extend(options, {currentUnitId: this.currentUnitId})\n                );\n            }\n        });\n\n        return UnitOutlineChildView;\n    }); // end define()\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/unit_outline_child.js","/**\n * Provides utilities for move xblock.\n */\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'common/js/components/views/feedback',\n    'common/js/components/views/feedback_alert',\n    'js/views/utils/xblock_utils',\n    'js/views/utils/move_xblock_utils',\n    'edx-ui-toolkit/js/utils/string-utils',\n    'jquery.smoothScroll'\n],\nfunction($, _, Backbone, Feedback, AlertView, XBlockViewUtils, MoveXBlockUtils, StringUtils) {\n    'use strict';\n    var redirectLink, moveXBlock, undoMoveXBlock, showMovedNotification, hideMovedNotification;\n\n    redirectLink = function(link) {\n        window.location.href = link;\n    };\n\n    moveXBlock = function(data) {\n        XBlockViewUtils.moveXBlock(data.sourceLocator, data.targetParentLocator)\n        .done(function(response) {\n            // hide modal\n            Backbone.trigger('move:hideMoveModal');\n            // hide xblock element\n            data.sourceXBlockElement.hide();\n            showMovedNotification(\n                StringUtils.interpolate(\n                    gettext('Success! \"{displayName}\" has been moved.'),\n                    {\n                        displayName: data.sourceDisplayName\n                    }\n                ),\n                {\n                    sourceXBlockElement: data.sourceXBlockElement,\n                    sourceDisplayName: data.sourceDisplayName,\n                    sourceLocator: data.sourceLocator,\n                    sourceParentLocator: data.sourceParentLocator,\n                    targetParentLocator: data.targetParentLocator,\n                    targetIndex: response.source_index\n                }\n            );\n            Backbone.trigger('move:onXBlockMoved');\n        });\n    };\n\n    undoMoveXBlock = function(data) {\n        XBlockViewUtils.moveXBlock(data.sourceLocator, data.sourceParentLocator, data.targetIndex)\n        .done(function() {\n            // show XBlock element\n            data.sourceXBlockElement.show();\n            showMovedNotification(\n                StringUtils.interpolate(\n                    gettext('Move cancelled. \"{sourceDisplayName}\" has been moved back to its original location.'),\n                    {\n                        sourceDisplayName: data.sourceDisplayName\n                    }\n                )\n            );\n            Backbone.trigger('move:onXBlockMoved');\n        });\n    };\n\n    showMovedNotification = function(title, data) {\n        var movedAlertView;\n        // data is provided when we click undo move button.\n        if (data) {\n            movedAlertView = new AlertView.Confirmation({\n                title: title,\n                actions: {\n                    primary: {\n                        text: gettext('Undo move'),\n                        class: 'action-save',\n                        click: function() {\n                            undoMoveXBlock(\n                                {\n                                    sourceXBlockElement: data.sourceXBlockElement,\n                                    sourceDisplayName: data.sourceDisplayName,\n                                    sourceLocator: data.sourceLocator,\n                                    sourceParentLocator: data.sourceParentLocator,\n                                    targetIndex: data.targetIndex\n                                }\n                            );\n                        }\n                    },\n                    secondary: [\n                        {\n                            text: gettext('Take me to the new location'),\n                            class: 'action-cancel',\n                            click: function() {\n                                redirectLink('/container/' + data.targetParentLocator);\n                            }\n                        }\n                    ]\n                }\n            });\n        } else {\n            movedAlertView = new AlertView.Confirmation({\n                title: title\n            });\n        }\n        movedAlertView.show();\n        // scroll to top\n        $.smoothScroll({\n            offset: 0,\n            easing: 'swing',\n            speed: 1000\n        });\n        movedAlertView.$('.wrapper').first().focus();\n        return movedAlertView;\n    };\n\n    hideMovedNotification = function() {\n        var movedAlertView = Feedback.active_alert;\n        if (movedAlertView) {\n            AlertView.prototype.hide.apply(movedAlertView);\n        }\n    };\n\n    return {\n        redirectLink: redirectLink,\n        moveXBlock: moveXBlock,\n        undoMoveXBlock: undoMoveXBlock,\n        showMovedNotification: showMovedNotification,\n        hideMovedNotification: hideMovedNotification\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/utils/move_xblock_utils.js","/**\n * XBlockAccessEditor is a view that allows the user to restrict access at the unit level on the container page.\n * This view renders the button to restrict unit access into the appropriate place in the unit page.\n */\ndefine(['js/views/baseview', 'edx-ui-toolkit/js/utils/html-utils'],\n    function(BaseView, HtmlUtils) {\n        'use strict';\n        var XBlockAccessEditor = BaseView.extend({\n            // takes XBlockInfo as a model\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                this.template = this.loadTemplate('xblock-access-editor');\n            },\n\n            render: function() {\n                HtmlUtils.append(\n                    this.$el,\n                    HtmlUtils.HTML(this.template({}))\n                );\n                return this;\n            }\n        });\n\n        return XBlockAccessEditor;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/xblock_access_editor.js","/**\n * The XBlockOutlineView is used to render an xblock and its children based upon the information\n * provided in the XBlockInfo model. It is a recursive set of views where each XBlock has its own instance.\n *\n * The class provides several opportunities to override the default behavior in subclasses:\n *  - shouldRenderChildren defaults to true meaning that the view should also create child views\n *  - shouldExpandChildren defaults to true meaning that the view should show itself as expanded\n *  - refresh is called when a server change has been made and the view needs to be refreshed\n *\n * The view can be constructed with an initialState option which is a JSON structure representing\n * the desired initial state. The parameters are as follows:\n *  - locator_to_show - the locator for the xblock which is the one being explicitly shown\n *  - scroll_offset - the scroll offset to use for the locator being shown\n *  - edit_display_name - true if the shown xblock's display name should be in inline edit mode\n */\ndefine(['jquery', 'underscore', 'gettext', 'js/views/baseview', 'common/js/components/utils/view_utils',\n    'js/views/utils/xblock_utils', 'js/views/xblock_string_field_editor',\n    'edx-ui-toolkit/js/utils/string-utils', 'edx-ui-toolkit/js/utils/html-utils'],\n    function($, _, gettext, BaseView, ViewUtils, XBlockViewUtils, XBlockStringFieldEditor, StringUtils, HtmlUtils) {\n        'use strict';\n        var XBlockOutlineView = BaseView.extend({\n            // takes XBlockInfo as a model\n\n            options: {\n                collapsedClass: 'is-collapsed'\n            },\n\n            templateName: 'xblock-outline',\n\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                this.initialState = this.options.initialState;\n                this.expandedLocators = this.options.expandedLocators;\n                this.template = this.options.template;\n                if (!this.template) {\n                    this.template = this.loadTemplate(this.templateName);\n                }\n                this.parentInfo = this.options.parentInfo;\n                this.parentView = this.options.parentView;\n                this.renderedChildren = false;\n                this.model.on('sync', this.onSync, this);\n            },\n\n            render: function() {\n                this.renderTemplate();\n                this.addButtonActions(this.$el);\n                this.addNameEditor();\n\n                // For cases in which we need to suppress the header controls during rendering, we'll\n                // need to add the current model's id/locator to the set of expanded locators\n                if (this.model.get('is_header_visible') !== null && !this.model.get('is_header_visible')) {\n                    var locator = this.model.get('id');\n                    if (!_.isUndefined(this.expandedLocators) && !this.expandedLocators.contains(locator)) {\n                        this.expandedLocators.add(locator);\n                        this.refresh();\n                    }\n                }\n\n                if (this.shouldRenderChildren() && this.shouldExpandChildren()) {\n                    this.renderChildren();\n                } else {\n                    this.renderedChildren = false;\n                }\n                return this;\n            },\n\n            renderTemplate: function() {\n                var html = this.template(this.getTemplateContext());\n                if (this.parentInfo) {\n                    this.setElement($(html));\n                } else {\n                    HtmlUtils.setHtml(\n                        this.$el,\n                        HtmlUtils.HTML(html)\n                    );\n                }\n            },\n\n            getTemplateContext: function() {\n                var xblockInfo = this.model,\n                    childInfo = xblockInfo.get('child_info'),\n                    parentInfo = this.parentInfo,\n                    xblockType = XBlockViewUtils.getXBlockType(this.model.get('category'), this.parentInfo),\n                    xblockTypeDisplayName = XBlockViewUtils.getXBlockType(this.model.get('category'), this.parentInfo, true),\n                    parentType = parentInfo ? XBlockViewUtils.getXBlockType(parentInfo.get('category')) : null,\n                    addChildName = null,\n                    defaultNewChildName = null,\n                    isCollapsed = this.shouldRenderChildren() && !this.shouldExpandChildren();\n                if (childInfo) {\n                    addChildName = StringUtils.interpolate(gettext('New {component_type}'), {\n                        component_type: childInfo.display_name\n                    }, true);\n                    defaultNewChildName = childInfo.display_name;\n                }\n                /* globals course */\n                return {\n                    xblockInfo: xblockInfo,\n                    visibilityClass: XBlockViewUtils.getXBlockVisibilityClass(xblockInfo.get('visibility_state')),\n                    typeListClass: XBlockViewUtils.getXBlockListTypeClass(xblockType),\n                    parentInfo: this.parentInfo,\n                    xblockType: xblockType,\n                    xblockTypeDisplayName: xblockTypeDisplayName,\n                    parentType: parentType,\n                    childType: childInfo ? XBlockViewUtils.getXBlockType(childInfo.category, xblockInfo) : null,\n                    childCategory: childInfo ? childInfo.category : null,\n                    addChildLabel: addChildName,\n                    defaultNewChildName: defaultNewChildName,\n                    isCollapsed: isCollapsed,\n                    includesChildren: this.shouldRenderChildren(),\n                    hasExplicitStaffLock: this.model.get('has_explicit_staff_lock'),\n                    staffOnlyMessage: this.model.get('staff_only_message'),\n                    course: course\n                };\n            },\n\n            renderChildren: function() {\n                var self = this,\n                    parentInfo = this.model;\n                if (parentInfo.get('child_info')) {\n                    _.each(this.model.get('child_info').children, function(childInfo) {\n                        var childOutlineView = self.createChildView(childInfo, parentInfo);\n                        childOutlineView.render();\n                        self.addChildView(childOutlineView);\n                    });\n                }\n                this.renderedChildren = true;\n            },\n\n            getListElement: function() {\n                return this.$('> .outline-content > ol');\n            },\n\n            addChildView: function(childView, xblockElement) {\n                if (xblockElement) {\n                    childView.$el.insertAfter(xblockElement);\n                } else {\n                    this.getListElement().append(childView.$el);\n                }\n            },\n\n            addNameEditor: function() {\n                var self = this,\n                    xblockField = this.$('.wrapper-xblock-field'),\n                    XBlockOutlineFieldEditor, nameEditor;\n                if (xblockField.length > 0) {\n                    // Make a subclass of the standard xblock string field editor which refreshes\n                    // the entire section that this view is contained in. This is necessary as\n                    // changing the name could have caused the section to change state.\n                    XBlockOutlineFieldEditor = XBlockStringFieldEditor.extend({\n                        refresh: function() {\n                            self.refresh();\n                        }\n                    });\n                    nameEditor = new XBlockOutlineFieldEditor({\n                        el: xblockField,\n                        model: this.model\n                    });\n                    nameEditor.render();\n                }\n            },\n\n            toggleExpandCollapse: function(event) {\n                // The course outline page tracks expanded locators. The unit location sidebar does not.\n                if (this.expandedLocators) {\n                    var locator = this.model.get('id');\n                    var wasExpanded = this.expandedLocators.contains(locator);\n                    if (wasExpanded) {\n                        this.expandedLocators.remove(locator);\n                    } else {\n                        this.expandedLocators.add(locator);\n                    }\n                }\n                // Ensure that the children have been rendered before expanding\n                this.ensureChildrenRendered();\n                BaseView.prototype.toggleExpandCollapse.call(this, event);\n            },\n\n            /**\n             * Verifies that the children are rendered (if they should be).\n             */\n            ensureChildrenRendered: function() {\n                if (!this.renderedChildren && this.shouldRenderChildren()) {\n                    this.renderChildren();\n                }\n            },\n\n            /**\n             * Adds handlers to the each button in the header's panel. This is managed outside of\n             * Backbone's own event registration so that the handlers don't get scoped to all the\n             * children of this view.\n             * @param element The root element of this view.\n             */\n            addButtonActions: function(element) {\n                var self = this;\n                element.find('.delete-button').click(_.bind(this.handleDeleteEvent, this));\n                element.find('.duplicate-button').click(_.bind(this.handleDuplicateEvent, this));\n                element.find('.button-new').click(_.bind(this.handleAddEvent, this));\n            },\n\n            shouldRenderChildren: function() {\n                return true;\n            },\n\n            shouldExpandChildren: function() {\n                return true;\n            },\n\n            getChildViewClass: function() {\n                return XBlockOutlineView;\n            },\n\n            createChildView: function(childInfo, parentInfo, options) {\n                var viewClass = this.getChildViewClass();\n                return new viewClass(_.extend({\n                    model: childInfo,\n                    parentInfo: parentInfo,\n                    parentView: this,\n                    initialState: this.initialState,\n                    expandedLocators: this.expandedLocators,\n                    template: this.template\n                }, options));\n            },\n\n            onSync: function(event) {\n                var hasChangedAttributes = ViewUtils.hasChangedAttributes(\n                    this.model,\n                    ['visibility_state', 'child_info', 'display_name', 'highlights']\n                );\n                if (hasChangedAttributes) {\n                    this.onXBlockChange();\n                }\n            },\n\n            onXBlockChange: function() {\n                var oldElement = this.$el,\n                    viewState = this.initialState;\n                this.render();\n                if (this.parentInfo) {\n                    oldElement.replaceWith(this.$el);\n                }\n                if (viewState) {\n                    this.setViewState(viewState);\n                }\n            },\n\n            setViewState: function(viewState) {\n                var locatorToShow = viewState.locator_to_show,\n                    scrollOffset = viewState.scroll_offset || 0,\n                    editDisplayName = viewState.edit_display_name,\n                    locatorElement;\n                if (locatorToShow) {\n                    if (locatorToShow === this.model.id) {\n                        locatorElement = this.$el;\n                    } else {\n                        locatorElement = this.$('.outline-item[data-locator=\"' + locatorToShow + '\"]');\n                    }\n                    if (locatorElement.length > 0) {\n                        ViewUtils.setScrollOffset(locatorElement, scrollOffset);\n                    } else {\n                        console.error('Failed to show item with locator ' + locatorToShow + '');\n                    }\n                    if (editDisplayName) {\n                        locatorElement.find('> div[class$=\"header\"] .xblock-field-value-edit').click();\n                    }\n                }\n                this.initialState = null;\n            },\n\n            /**\n             * Refresh the view's model from the server, which will cause the view to refresh.\n             * @returns {jQuery promise} A promise representing the refresh operation.\n             */\n            refresh: function() {\n                return this.model.fetch();\n            },\n\n            onChildAdded: function(locator, category) {\n                // For units, redirect to the new page, and for everything else just refresh inline.\n                if (category === 'vertical') {\n                    this.onUnitAdded(locator);\n                } else {\n                    this.refresh();\n                }\n            },\n\n            onUnitAdded: function(locator) {\n                ViewUtils.redirect('/container/' + locator + '?action=new');\n            },\n\n            onChildDeleted: function() {\n                this.refresh();\n            },\n\n            handleDeleteEvent: function(event) {\n                var self = this,\n                    parentView = this.parentView,\n                    xblockType = XBlockViewUtils.getXBlockType(this.model.get('category'), parentView.model, true);\n                event.preventDefault();\n                XBlockViewUtils.deleteXBlock(this.model, xblockType).done(function() {\n                    if (parentView) {\n                        parentView.onChildDeleted(self, event);\n                    }\n                });\n            },\n\n            /**\n             * Finds appropriate parent element for an xblock element.\n             * @param {jquery Element}  xblockElement  The xblock element to be duplicated.\n             * @param {String}  xblockType The front-end terminology of the xblock category.\n             * @returns {jquery Element} Appropriate parent element of xblock element.\n             */\n            getParentElement: function(xblockElement, xblockType) {\n                var xblockMap = {\n                        unit: 'subsection',\n                        subsection: 'section',\n                        section: 'course'\n                    },\n                    parentXblockType = xblockMap[xblockType];\n                return xblockElement.closest('.outline-' + parentXblockType);\n            },\n\n            /**\n             * Duplicate event handler.\n             */\n            handleDuplicateEvent: function(event) {\n                var self = this,\n                    xblockType = XBlockViewUtils.getXBlockType(self.model.get('category'), self.parentView.model),\n                    xblockElement = $(event.currentTarget).closest('.outline-item'),\n                    parentElement = self.getParentElement(xblockElement, xblockType);\n\n                event.preventDefault();\n                XBlockViewUtils.duplicateXBlock(xblockElement, parentElement)\n                    .done(function(data) {\n                        if (self.parentView) {\n                            self.parentView.onChildDuplicated(\n                                data.locator,\n                                xblockType,\n                                xblockElement\n                            );\n                        }\n                    });\n            },\n\n            handleAddEvent: function(event) {\n                var self = this,\n                    $target = $(event.currentTarget),\n                    category = $target.data('category');\n                event.preventDefault();\n                XBlockViewUtils.addXBlock($target).done(function(locator) {\n                    self.onChildAdded(locator, category, event);\n                });\n            }\n        });\n\n        return XBlockOutlineView;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/xblock_outline.js","/**\n * XBlockStringFieldEditor is a view that allows the user to inline edit an XBlock string field.\n * Clicking on the field value will hide the text and replace it with an input to allow the user\n * to change the value. Once the user leaves the field, a request will be sent to update the\n * XBlock field's value if it has been changed. If the user presses Escape, then any changes will\n * be removed and the input hidden again.\n */\ndefine(['js/views/baseview', 'js/views/utils/xblock_utils'],\n    function(BaseView, XBlockViewUtils) {\n        var XBlockStringFieldEditor = BaseView.extend({\n            events: {\n                'click .xblock-field-value-edit': 'showInput',\n                'click button[name=submit]': 'onClickSubmit',\n                'click button[name=cancel]': 'onClickCancel',\n                'click .xblock-string-field-editor': 'onClickEditor',\n                'change .xblock-field-input': 'updateField',\n                'focusout .xblock-field-input': 'onInputFocusLost',\n                'keyup .xblock-field-input': 'handleKeyUp'\n            },\n\n            // takes XBlockInfo as a model\n\n            initialize: function() {\n                BaseView.prototype.initialize.call(this);\n                this.fieldName = this.$el.data('field');\n                this.fieldDisplayName = this.$el.data('field-display-name');\n                this.template = this.loadTemplate('xblock-string-field-editor');\n                this.model.on('change:' + this.fieldName, this.onChangeField, this);\n            },\n\n            render: function() {\n                this.$el.append(this.template({\n                    value: this.model.escape(this.fieldName),\n                    fieldName: this.fieldName,\n                    fieldDisplayName: this.fieldDisplayName\n                }));\n                return this;\n            },\n\n            getLabel: function() {\n                return this.$('.xblock-field-value');\n            },\n\n            getInput: function() {\n                return this.$('.xblock-field-input');\n            },\n\n            onInputFocusLost: function() {\n                var currentValue = this.model.get(this.fieldName);\n                if (currentValue === this.getInput().val()) {\n                    this.hideInput();\n                }\n            },\n\n            onClickSubmit: function(event) {\n                event.preventDefault();\n                event.stopPropagation();\n                this.updateField();\n            },\n\n            onClickCancel: function(event) {\n                event.preventDefault();\n                event.stopPropagation();\n                this.cancelInput();\n            },\n\n            onClickEditor: function(event) {\n                event.stopPropagation();\n            },\n\n            onChangeField: function() {\n                var value = this.model.get(this.fieldName);\n                this.getLabel().text(value);\n                this.getInput().val(value);\n                this.hideInput();\n            },\n\n            showInput: function(event) {\n                var input = this.getInput();\n                event.preventDefault();\n                event.stopPropagation();\n                this.$el.addClass('is-editing');\n                input.focus().select();\n            },\n\n            hideInput: function() {\n                this.$el.removeClass('is-editing');\n            },\n\n            cancelInput: function() {\n                this.getInput().val(this.model.get(this.fieldName));\n                this.hideInput();\n            },\n\n            /**\n             * Refresh the model from the server so that it gets the latest publish and last modified information.\n             */\n            refresh: function() {\n                this.model.fetch();\n            },\n\n            updateField: function() {\n                var self = this,\n                    xblockInfo = this.model,\n                    newValue = this.getInput().val().trim(),\n                    oldValue = xblockInfo.get(this.fieldName);\n                // TODO: generalize this as not all xblock fields want to disallow empty strings...\n                if (newValue === '' || newValue === oldValue) {\n                    this.cancelInput();\n                    return;\n                }\n                return XBlockViewUtils.updateXBlockField(xblockInfo, this.fieldName, newValue).done(function() {\n                    self.refresh();\n                });\n            },\n\n            handleKeyUp: function(event) {\n                if (event.keyCode === 27) {   // Revert the changes if the user hits escape\n                    this.cancelInput();\n                }\n            }\n        });\n\n        return XBlockStringFieldEditor;\n    }); // end define();\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/xblock_string_field_editor.js","module.exports = \"<nav class=\\\"breadcrumbs\\\" aria-label=\\\"Course Outline breadcrumb\\\">\\n    <% _.each(breadcrumbs.slice(0, -1), function (breadcrumb, index, items) { %>\\n        <ol class=\\\"bc-container bc-<%- index %>\\\">\\n            <li class=\\\"bc-container-content\\\">\\n                <button class=\\\"parent-nav-button\\\" data-parent-index=\\\"<%- index %>\\\">\\n                    <%- breadcrumb %>\\n                </button>\\n                <span class=\\\"fa fa-angle-right breadcrumb-fa-icon\\\" aria-hidden=\\\"true\\\"></span>\\n            </li>\\n        </ol>\\n    <% }) %>\\n    <ol class=\\\"bc-container bc-<%- breadcrumbs.length - 1 %> last\\\">\\n        <li class=\\\"bc-container-content\\\">\\n            <span class=\\\"parent-displayname\\\"><%- breadcrumbs[breadcrumbs.length - 1] %></span>\\n        </li>\\n    </ol>\\n</nav>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cms/templates/js/move-xblock-breadcrumb.underscore\n// module id = ./cms/templates/js/move-xblock-breadcrumb.underscore\n// module chunks = 3 4","module.exports = \"<div class=\\\"xblock-items-category\\\">\\n    <span class=\\\"sr\\\">\\n        <%\\n        // Translators: message will be like `Units in Homework - Question Styles`, `Subsections in Example 1 - Getting started` etc.\\n        %>\\n        <%- StringUtils.interpolate(\\n                gettext(\\\"{categoryText} in {parentDisplayname}\\\"),\\n                {categoryText: categoryText, parentDisplayname: parentDisplayname}\\n            )\\n        %>\\n    </span>\\n    <span class=\\\"category-text\\\" aria-hidden=\\\"true\\\">\\n        <%- categoryText %>:\\n    </span>\\n</div>\\n<ul class=\\\"xblock-items-container\\\" data-items-category=\\\"<%- XBlocksCategory %>\\\">\\n    <% for (var i = 0; i < xblocks.length; i++) {\\n        var xblock = xblocks[i];\\n    %>\\n        <li class=\\\"xblock-item\\\" data-item-index=\\\"<%- i %>\\\">\\n            <% if (sourceXBlockId !== xblock.id && (xblock.get('child_info') || XBlocksCategory !== 'component')) { %>\\n                <button class=\\\"button-forward\\\" >\\n                    <span class=\\\"xblock-displayname truncate\\\">\\n                        <%- xblock.get('display_name') %>\\n                    </span>\\n                    <% if(currentLocationIndex === i) { %>\\n                        <span class=\\\"current-location\\\">\\n                            (<%- gettext('Current location') %>)\\n                        </span>\\n                    <% } %>\\n                    <span class=\\\"icon fa fa-arrow-right forward-sr-icon\\\" aria-hidden=\\\"true\\\"></span>\\n                    <span class=\\\"sr forward-sr-text\\\"><%- gettext(\\\"View child items\\\") %></span>\\n                </button>\\n            <% } else { %>\\n                <span class=\\\"component\\\">\\n                    <span class=\\\"xblock-displayname truncate\\\">\\n                        <%- xblock.get('display_name') %>\\n                    </span>\\n                    <% if(currentLocationIndex === i) { %>\\n                        <span class=\\\"current-location\\\">\\n                            (<%- gettext('Currently selected') %>)\\n                        </span>\\n                    <% } %>\\n                </span>\\n            <% } %>\\n        </li>\\n    <% } %>\\n    <% if(xblocks.length === 0) { %>\\n        <span class=\\\"xblock-no-child-message\\\">\\n            <%- noChildText %>\\n        </span>\\n    <% } %>\\n</ul>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cms/templates/js/move-xblock-list.underscore\n// module id = ./cms/templates/js/move-xblock-list.underscore\n// module chunks = 3 4","module.exports = \"<div class=\\\"ui-loading\\\">\\n    <p>\\n        <span class=\\\"spin\\\">\\n            <span class=\\\"icon fa fa-refresh\\\" aria-hidden=\\\"true\\\"></span>\\n        </span>\\n        <span class=\\\"copy\\\"><%- gettext('Loading') %></span>\\n    </p>\\n</div>\\n<div class='breadcrumb-container is-hidden'></div>\\n<div class='xblock-list-container'></div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cms/templates/js/move-xblock-modal.underscore\n// module id = ./cms/templates/js/move-xblock-modal.underscore\n// module chunks = 3 4","module.exports = \"<div class=\\\"meta-wrap\\\">\\n    <div class=\\\"meta\\\">\\n        <p><%= HtmlUtils.ensureHtml(messageHtml) %></p>\\n    </div>\\n    <nav class=\\\"pagination pagination-compact top\\\" aria-label=\\\"Compact Pagination\\\">\\n        <ol>\\n            <li class=\\\"nav-item previous\\\"><a class=\\\"nav-link previous-page-link\\\" href=\\\"#\\\"><span class=\\\"icon fa fa-angle-left\\\" aria-hidden=\\\"true\\\"></span> <span class=\\\"nav-label\\\"><%- gettext(\\\"Previous\\\") %></span></a></li>\\n            <li class=\\\"nav-item next\\\"><a class=\\\"nav-link next-page-link\\\" href=\\\"#\\\"><span class=\\\"nav-label\\\"><%- gettext(\\\"Next\\\") %></span> <span class=\\\"icon fa fa-angle-right\\\" aria-hidden=\\\"true\\\"></span></a></li>\\n        </ol>\\n    </nav>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cms/templates/js/paging-header.underscore\n// module id = ./cms/templates/js/paging-header.underscore\n// module chunks = 3","\n    'use strict';\n    define(['jquery', 'underscore', 'underscore.string', 'common/js/components/views/feedback'],\n        function($, _, str, SystemFeedbackView) {\n            var Alert = SystemFeedbackView.extend({\n                options: $.extend({}, SystemFeedbackView.prototype.options, {\n                    type: 'alert'\n                }),\n                slide_speed: 900,\n                show: function() {\n                    SystemFeedbackView.prototype.show.apply(this, arguments);\n                    this.$el.hide();\n                    this.$el.slideDown(this.slide_speed);\n                    return this;\n                },\n                hide: function() {\n                    this.$el.slideUp({\n                        duration: this.slide_speed\n                    });\n                    setTimeout(_.bind(SystemFeedbackView.prototype.hide, this, arguments),\n                           this.slideSpeed);\n                }\n            });\n\n        // create Alert.Warning, Alert.Confirmation, etc\n            var capitalCamel, intents;\n            capitalCamel = _.compose(str.capitalize, str.camelize);\n            intents = ['warning', 'error', 'confirmation', 'announcement', 'step-required', 'help', 'mini'];\n            _.each(intents, function(intent) {\n                var subclass;\n                subclass = Alert.extend({\n                    options: $.extend({}, Alert.prototype.options, {\n                        intent: intent\n                    })\n                });\n                Alert[capitalCamel(intent)] = subclass;\n            });\n\n            return Alert;\n        });\n\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/common/js/components/views/feedback_alert.js","\n    'use strict';\n    define([\n        'underscore',\n        'gettext',\n        'backbone',\n        'edx-ui-toolkit/js/utils/html-utils',\n        'common/templates/components/paging-footer.underscore'\n    ],\n        function(_, gettext, Backbone, HtmlUtils, pagingFooterTemplate) {\n            var PagingFooter = Backbone.View.extend({\n                events: {\n                    'click .next-page-link': 'nextPage',\n                    'click .previous-page-link': 'previousPage',\n                    'change .page-number-input': 'changePage'\n                },\n\n                initialize: function(options) {\n                    this.collection = options.collection;\n                    this.hideWhenOnePage = options.hideWhenOnePage || false;\n                    this.paginationLabel = options.paginationLabel || gettext('Pagination');\n                    this.collection.bind('add', _.bind(this.render, this));\n                    this.collection.bind('remove', _.bind(this.render, this));\n                    this.collection.bind('reset', _.bind(this.render, this));\n                },\n\n                render: function() {\n                    var onFirstPage = !this.collection.hasPreviousPage(),\n                        onLastPage = !this.collection.hasNextPage();\n                    if (this.hideWhenOnePage) {\n                        if (this.collection.getTotalPages() <= 1) {\n                            this.$el.addClass('hidden');\n                        } else if (this.$el.hasClass('hidden')) {\n                            this.$el.removeClass('hidden');\n                        }\n                    }\n\n                    HtmlUtils.setHtml(\n                        this.$el,\n                        HtmlUtils.template(pagingFooterTemplate)({\n                            current_page: this.collection.getPageNumber(),\n                            total_pages: this.collection.getTotalPages(),\n                            paginationLabel: this.paginationLabel\n                        })\n                    );\n                    this.$('.previous-page-link').toggleClass('is-disabled', onFirstPage).attr('aria-disabled', onFirstPage);\n                    this.$('.next-page-link').toggleClass('is-disabled', onLastPage).attr('aria-disabled', onLastPage);\n                    return this;\n                },\n\n                changePage: function() {\n                    var collection = this.collection,\n                        currentPage = collection.getPageNumber(),\n                        pageInput = this.$('#page-number-input'),\n                        pageNumber = parseInt(pageInput.val(), 10),\n                        validInput = true;\n                    if (!pageNumber || pageNumber > collection.getTotalPages() || pageNumber < 1) {\n                        validInput = false;\n                    }\n                    // If we still have a page number by this point,\n                    // and it's not the current page, load it.\n                    if (validInput && pageNumber !== currentPage) {\n                        collection.setPage(pageNumber);\n                    }\n                    pageInput.val(''); // Clear the value as the label will show beneath it\n                },\n\n                nextPage: function() {\n                    this.collection.nextPage();\n                },\n\n                previousPage: function() {\n                    this.collection.previousPage();\n                }\n            });\n\n            return PagingFooter;\n        }); // end define();\n\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/common/js/components/views/paging_footer.js","module.exports = \"<nav class=\\\"pagination pagination-full bottom\\\" aria-label=\\\"<%= paginationLabel %>\\\">\\n    <div class=\\\"nav-item previous\\\"><button class=\\\"nav-link previous-page-link\\\"><span class=\\\"icon fa fa-angle-left\\\" aria-hidden=\\\"true\\\"></span> <span class=\\\"nav-label\\\"><%= gettext(\\\"Previous\\\") %></span></button></div>\\n    <div class=\\\"nav-item page\\\">\\n        <div class=\\\"pagination-form\\\">\\n            <label class=\\\"page-number-label\\\" for=\\\"page-number-input\\\"><%= interpolate(\\n                    gettext(\\\"Page number out of %(total_pages)s\\\"),\\n                    {total_pages: total_pages},\\n                    true\\n                )%></label>\\n            <input id=\\\"page-number-input\\\" class=\\\"page-number-input\\\" name=\\\"page-number\\\" type=\\\"text\\\" size=\\\"4\\\" autocomplete=\\\"off\\\" aria-describedby=\\\"page-number-input-helper\\\"/>\\n            <span class=\\\"sr field-helper\\\" id=\\\"page-number-input-helper\\\"><%= gettext(\\\"Enter the page number you'd like to quickly navigate to.\\\") %></span>\\n        </div>\\n\\n        <span class=\\\"current-page\\\"><%= current_page %></span>\\n        <span class=\\\"sr\\\">&nbsp;out of&nbsp;</span>\\n        <span class=\\\"page-divider\\\" aria-hidden=\\\"true\\\">/</span>\\n        <span class=\\\"total-pages\\\"><%= total_pages %></span>\\n    </div>\\n    <div class=\\\"nav-item next\\\"><button class=\\\"nav-link next-page-link\\\"><span class=\\\"nav-label\\\"><%= gettext(\\\"Next\\\") %></span> <span class=\\\"icon fa fa-angle-right\\\" aria-hidden=\\\"true\\\"></span></button></div>\\n</nav>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/static/common/templates/components/paging-footer.underscore\n// module id = ./common/static/common/templates/components/paging-footer.underscore\n// module chunks = 3","(function() { module.exports = window[\"jQuery\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 1 2 3 4 7 8 9 11 12 13 14 15 16 17 18 19 22 23 24 25 26 27 28 29 30 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 83","(function() { module.exports = window[\"_\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 1\n// module chunks = 1 2 3 4 7 8 9 12 13 14 16 17 18 19 22 23 24 25 26 27 28 29 30 33 34 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74","(function() { module.exports = window[\"Backbone\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Backbone\"\n// module id = 2\n// module chunks = 1 3 4 7 8 9 12 13 18 19 22 23 32 84","(function() { module.exports = window[\"gettext\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gettext\"\n// module id = 3\n// module chunks = 3 4 8 12 13 14 18 19 23","(function() { module.exports = window[\"URI\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"URI\"\n// module id = 4\n// module chunks = 3 4 13"],"sourceRoot":""}